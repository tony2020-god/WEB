window.__require=function e(t,i,n){function o(c,l){if(!i[c]){if(!t[c]){var r=c.split("/");if(r=r[r.length-1],!t[r]){var a="function"==typeof __require&&__require;if(!l&&a)return a(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+c+"'")}c=r}var h=i[c]={exports:{}};t[c][0].call(h.exports,function(e){return o(t[c][1][e]||e)},h,h.exports,e,t,i,n)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({Host1_weel:[function(e,t){"use strict";cc._RF.push(t,"231fb6ZVWNN944v7V0dlDwZ","Host1_weel"),cc.Class({extends:cc.Component,properties:{GoBtn:{default:null,type:cc.Node},wheel:{default:null,type:cc.Node}},onLoad:function(){this.Prize_total=8,this.wheelState=0,this.IDAngle=360/this.Prize_total,this.Prize_Angle=0,this.GoBtn.on(cc.Node.EventType.MOUSE_DOWN,this.StartBtn,this)},StartBtn:function(){0===this.wheelState&&(this.wheelState=1,this.aniSlow_In())},lettorey:function(){this.Prize_ID=Math.floor(Math.random()*this.Prize_total),console.log(this.Prize_ID),this.Prize_Angle=this.Prize_ID*this.IDAngle,this.FinalAngle=this.Prize_Angle+Math.floor(Math.random()*(this.IDAngle-4)+3),console.log("FinalAngle :"+this.FinalAngle),this.wheelState=2,this.aniSlow_Out()},aniSlow_In:function(){var e=cc.tween(this.wheel).by(2,{angle:360},{easing:"circIn"}),t=cc.tween(this.wheel).by(.35,{angle:360}).repeatForever();this.ani_wheelState1=cc.tween(this.wheel).then(e).then(t).start()},aniSlow_Out:function(){var e=this;this.ani_wheelState1.stop();var t=1==Math.round(Math.random())?"circOut":"backOut",i=360*Math.ceil(this.wheel.angle/360)-this.wheel.angle;console.log("\u5dee\u503c: "+i),cc.tween(this.wheel).by(5,{angle:360+i+e.FinalAngle},{easing:t}).call(function(){e.ShowPrize()}).start()},ShowPrize:function(){console.log("\u734e\u54c1\u89d2\u5ea6: "+this.Prize_Angle),console.log("\u8f2a\u76e4\u5230\u9054\u7684\u89d2\u5ea6: "+this.wheel.angle),this.wheelState=0,console.log("\u606d\u559c\u62bd\u5230"+50*(this.Prize_ID+1)+"\u5143"),alert("\u606d\u559c\u62bd\u5230"+50*(this.Prize_ID+1)+"\u5143")}}),cc._RF.pop()},{}],Model:[function(e,t){"use strict";var i;function n(e){for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var n=t[i].split("=");if(n[0]==e)return n[1]}return""}cc._RF.push(t,"066b6OssvtByIddq1GP54g4","Model"),t.exports=((i={signner_name:[],signner_picture:[],signner_id:[],Signner_js:null,Signer_items:[],WhitchBlock:null,liffstate:"",Local_ID:"",GameName:"",People:0,WebSocket_NumberOfSign_Host:function(){var t=new WebSocket("wss://"+o.local_ID+"/ws/v1/host/signwall?activity_id="+o.activity_id);t.onopen=function(){console.log(" WebSocket_NumberOfSign_Host \u901a\u9053\u958b\u555f")},t.onmessage=function(t){console.log("response text msg: "+t.data);var i=e("Model"),n=JSON.parse(t.data);console.log("\u5df2\u7c3d\u5230\u73a9\u5bb6: ",n.message);for(var o=0;o<n.SignStaffs.length;o++)0==i.signner_id.includes(n.SignStaffs[o].id)&&(i.signner_id[o]=n.SignStaffs[o].id,i.signner_name[o]=n.SignStaffs[o].name,i.signner_picture[o]=n.SignStaffs[o].avatar,i.Signner_js.SpawnWinner(),console.log("\u5df2\u7c3d\u5230\u73a9\u5bb6\u59d3\u540d[] : "+i.signner_name[o]),console.log("\u5df2\u7c3d\u5230\u73a9\u5bb6\u982d\u50cf[] : "+i.signner_picture[o]))},t.onerror=function(){console.log(" WebSocket_NumberOfSign \u9023\u7dda\u932f\u8aa4")},t.onclose=function(){console.log(" WebSocket_NumberOfSign \u901a\u9053\u95dc\u9589"),o.WebSocket_NumberOfSign_Host()}},Game_Information:function(){var e="https://"+o.local_ID+"/v1/interact/game/draw_numbers/prize?activity_id="+o.activity_id,t=new XMLHttpRequest;t.open("GET",e,!0),t.onreadystatechange=function(){if(4==t.readyState&&t.status>=200&&t.status<=207){var e=t.responseText;console.log(e);var i=JSON.parse(t.responseText);o.Session=i.data.title;for(var n=0;n<i.data.PrizeStaffs.length;n++)o.prize_ID[n]=i.data.PrizeStaffs[n].id,o.prize_name[n]=i.data.PrizeStaffs[n].prize_name,o.prize_total[n]=i.data.PrizeStaffs[n].prize_name,o.prize_picture[n]=i.data.PrizeStaffs[n].remain;console.log(typeof e),console.log("status = "+t.status),console.log("readyState = "+t.readyState)}},t.send()},prize_ID:[],prize_name:[],prize_picture:[],prize_total:[],Draw_Number_js:""}).People=0,i.Numbers=[],i.Draw_Numbers=function(e,t){var i="https://"+o.local_ID+"/v1/game/draw_numbers?activity_id="+o.activity_id+"&prize_id="+e+"&people="+t,n=new XMLHttpRequest;n.open("GET",i,!0),n.onreadystatechange=function(){if(4==n.readyState&&n.status>=200&&n.status<=207){var e=n.responseText;console.log(e);var t=JSON.parse(n.responseText);o.Numbers=t.data.Numbers;for(var i=0;i<t.data.Prizes.length;i++)o.prize_ID[i]=t.data.Prizes[i].id,o.prize_name[i]=t.data.Prizes[i].prize_name,o.prize_total[i]=t.data.Prizes[i].prize_name,o.prize_picture[i]=t.data.Prizes[i].remain;o.Draw_Number_js.ShowNumbers(),console.log(typeof e),console.log("status = "+n.status),console.log("readyState = "+n.readyState)}},n.send()},i.WebSocket_NumberOfJoin_Host=function(){var t=new WebSocket("wss://ws/v1/activity?activity_id="+o.activity_id);t.onopen=function(){console.log(" WebSocket_NumberOfJoin_Host \u901a\u9053\u958b\u555f")},t.onmessage=function(t){console.log("response text msg: "+t.data);var i=e("Model"),n=JSON.parse(t.data);i.People=n.Activity.attend},t.onerror=function(){console.log(" WebSocket_NumberOfJoin_Host \u9023\u7dda\u932f\u8aa4")},t.onclose=function(){console.log(" WebSocket_NumberOfJoin_Host \u901a\u9053\u95dc\u9589"),o.WebSocket_NumberOfJoin_Host()}},i);var o=e("Model");o.activity_id=n("activity_id"),o.game_id=n("game_id"),o.liffstate=n("liff.state"),o.identify_id=n("identify"),function(){if(""!=o.activity_id&&""!=o.game_id||(o.liffstate.length>13&&(o.liffstate=o.liffstate.substr(17,o.liffstate.length)),console.log("LiffState"+o.liffstate)),o.liffstate.includes("%26game_id%3D")){var e=o.liffstate.split("%26game_id%3D");o.activity_id=e[0],console.log("LiffState.activity_id ="+o.activity_id),2==e.length&&(e=e[1].split("#mst_challenge"),o.game_id=e[0],console.log("LiffState.game_id ="+o.game_id))}}(),cc._RF.pop()},{Model:"Model"}],NewScript:[function(e,t){"use strict";cc._RF.push(t,"6d0efRnsChM6Jd1eAmnyvDU","NewScript"),cc.Class({extends:cc.Component,properties:{Ingame:{default:[],type:[cc.Node]},animalAtlas:{default:[],type:[cc.SpriteFrame]}},onLoad:function(){},start:function(){this.KK()},KK:function(){}}),cc._RF.pop()},{}],PickNumbers:[function(e,t){"use strict";cc._RF.push(t,"396aa5PQ7hPkoJnN6agssej","PickNumbers");var i=e("Model");cc.Class({extends:cc.Component,properties:{PickPeople:{default:null,type:cc.Label},EditBOX:{default:null,type:cc.Node},items_parent:{default:null,type:cc.Node},WaitForDraw:{default:null,type:cc.Node},LotteryNumbers:{default:null,type:cc.Prefab},Prize_name:{default:null,type:cc.Label},Prize_Amount:{default:null,type:cc.Label},Prize_Picture:{default:null,type:cc.Sprite},Alret:{default:null,type:cc.Node},People_total:{default:null,type:cc.Label}},onLoad:function(){i.local_ID="hilives.net"==window.location.host?"api.hilives.net":"apidev.hilives.net",i.GameName=cc.director.getScene()._name,i.Draw_Number_js=this,i.WebSocket_NumberOfJoin_Host(),i.Game_Information()},start:function(){this.PickPeopleNumber=1,this.Prize_index=0,this.ShowPicture(this.Prize_index),this.Prize_name.string=i.prize_name[this.Prize_index],this.Prize_Amount.string=i.prize_total[this.Prize_index]},StartDraw:function(){this.items_parent.removeAllChildren();var e=parseInt(this.PickPeople.string);e>i.People||e>i.prize_total[this.Prize_index]?(this.PickPeople.string=1,this.PickPeopleNumber=1,this.EditBOX.getComponent(cc.EditBox).string="1",this.Alret.active=!0):(this.WaitForDraw.active=!0,i.Draw_Numbers(i.prize_ID[this.Prize_index],this.PickPeopleNumber))},Input:function(){var e=parseInt(this.PickPeople.string);this.PickPeopleNumber=e,this.EditBOX.getComponent(cc.EditBox).string=this.PickPeople.string},ControllPickPeople:function(e,t){var n=i.prize_total[this.Prize_index]>i.People?i.People:i.prize_total[this.Prize_index];this.PickPeople.string="add"==t?this.PickPeopleNumber==n?this.PickPeopleNumber=n:this.PickPeopleNumber+=1:1==this.PickPeopleNumber?this.PickPeopleNumber=1:this.PickPeopleNumber-=1,this.EditBOX.getComponent(cc.EditBox).string=this.PickPeople.string},ChoosePrize:function(e,t){this.Prize_index="next"==t?this.Prize_index>=i.prize_name.length-1?this.Prize_index:this.Prize_index++:this.Prize_index<=0?this.Prize_index:this.Prize_index--,this.ShowPicture(this.Prize_index),this.Prize_name.string=i.prize_name[this.Prize_index],this.Prize_Amount.string=i.prize_total[this.Prize_index]},ShowPicture:function(e){var t=this;cc.assetManager.loadRemote(i.prize_picture[e],{ext:".jpg"},function(e,i){if(e)console.log("\u932f\u8aa4");else{var n=new cc.SpriteFrame(i);t.Prize_Picture.spriteFrame=n}})},CloseAlret:function(){this.Alret.active=!1},ShowNumbers:function(){for(var e=0;e<this.NumberArrey.length;e++){var t=cc.instantiate(this.LotteryNumbers);t.parent=this.items_parent,t.getChildByName("\u865f\u78bc").getComponent(cc.Label).string=i.Numbers[e]}this.Prize_Amount.string=i.prize_total[this.Prize_index]},update:function(){this.People_total.string=i.People}}),cc._RF.pop()},{Model:"Model"}],ShowSignner:[function(e,t){"use strict";cc._RF.push(t,"b7450lebqJEnoZcVILO9KpZ","ShowSignner");var i=e("Signner"),n=e("Model");cc.Class({extends:cc.Component,properties:{items:{default:null,type:cc.Prefab},bar:{default:null,type:cc.Node},items_parent:{default:null,type:cc.Node}},onLoad:function(){n.local_ID="hilives.net"==window.location.host?"api.hilives.net":"apidev.hilives.net",console.log("window:"+window.location.host),console.log("local_ID: "+n.local_ID),n.Signner_js=this,n.WebSocket_NumberOfSign_Host(),this.itemlist=[],this.indexcount=0},start:function(){},SpawnWinner:function(){this.indexcount++;var e=cc.instantiate(this.items);e.parent=this.items_parent;var t=e.getComponent(i);this.itemlist.push(t),this.itemlist[this.indexcount-1].updateInfo(this.indexcount-1)},AddNew:function(){var e=Math.floor(20*Math.random())+1;console.log(e),0==n.signner_id.includes(e)&&n.signner_id.push(e),this.SpawnWinner()},update:function(){}}),cc._RF.pop()},{Model:"Model",Signner:"Signner"}],Signner:[function(e,t){"use strict";cc._RF.push(t,"f26adAmHgBE17GvhrR2SV8Y","Signner");var i=e("Model");cc.Class({extends:cc.Component,properties:{MoveObject:{default:null,type:cc.Node},playerName:{default:null,type:cc.Label},playerAvatar:{default:null,type:cc.Sprite}},updateInfo:function(e){this.playerName.string=i.signner_name[e],this.playerAvatar.spriteFrames=i.signner_picture[e],cc.assetManager.loadRemote(i.signner_picture[e],{ext:".jpg"},function(t,n){if(t)console.log("\u932f\u8aa4");else{var o=new cc.SpriteFrame(n);i.Signner_js.itemlist[e].playerAvatar.spriteFrame=o}})},onLoad:function(){this.items_parent=cc.find("\u756b\u5e03/\u5df2\u7c3d\u5230\u6b04/view/content"),this.WhitchBlock=this.items_parent.getChildrenCount()%3,console.log("\u7b2c\u5e7e\u683c"+this.WhitchBlock)},start:function(){1==this.WhitchBlock?(this.MoveObject.setPosition(-610,1150),this.node.getComponent(sp.Skeleton).setAnimation(0,"down",!1),cc.tween(this.MoveObject).to(.23,{position:cc.v2(0,1150)}).to(.3,{scale:1.2}).to(.3,{scale:1}).to(.82,{position:cc.v2(0,0)}).start()):2==this.WhitchBlock?(this.MoveObject.setPosition(-610,571),this.node.getComponent(sp.Skeleton).setAnimation(0,"middle",!1),cc.tween(this.MoveObject).to(.23,{position:cc.v2(0,571)}).to(.3,{scale:1.2}).to(.3,{scale:1}).to(.53,{position:cc.v2(0,0)}).start()):0==this.WhitchBlock&&(this.MoveObject.setPosition(-610,0),this.node.getComponent(sp.Skeleton).setAnimation(0,"up",!1),cc.tween(this.MoveObject).to(.23,{position:cc.v2(0,0)}).to(.3,{scale:1.2}).to(.3,{scale:1}).start())},update:function(){}}),cc._RF.pop()},{Model:"Model"}],ani:[function(e,t){"use strict";cc._RF.push(t,"58d98+WtihHuKwhuv8/GTaa","ani"),cc.Class({extends:cc.Component,properties:{GoBtn:{default:null,type:cc.Node},wheel:{default:null,type:cc.Node}},onLoad:function(){this.Prize_total=9,this.wheelState=0,this.IDAngle=360/this.Prize_total,this.Prize_Angle=0,this.GoBtn.on(cc.Node.EventType.MOUSE_DOWN,this.StartBtn,this)},StartBtn:function(){0===this.wheelState&&(this.wheelState=1,this.aniSlow_In())},lettorey:function(){this.Prize_ID=Math.floor(Math.random()*this.Prize_total),console.log(this.Prize_ID),this.Prize_Angle=this.Prize_ID*this.IDAngle;var e=this.Prize_Angle+Math.floor(this.IDAngle/2),t=this.Prize_Angle-Math.floor(this.IDAngle/2);this.FinalAngle=Math.floor(Math.random()*(e-(t+1))+t),console.log("FinalAngle :"+this.FinalAngle),this.wheelState=2,this.aniSlow_Out()},aniSlow_In:function(){var e=cc.tween(this.wheel).by(2,{angle:360},{easing:"circIn"}),t=cc.tween(this.wheel).by(.5,{angle:360}).repeatForever();this.ani_wheelState1=cc.tween(this.wheel).then(e).then(t).start()},aniSlow_Out:function(){var e=this;this.ani_wheelState1.stop();var t=1==Math.round(Math.random())?"circOut":"backOut",i=360*Math.ceil(this.wheel.angle/360)-this.wheel.angle;console.log("\u5dee\u503c: "+i),cc.tween(this.wheel).by(6,{angle:360+i+e.FinalAngle},{easing:t}).call(function(){e.ShowPrize()}).start()},ShowPrize:function(){console.log("\u734e\u54c1\u89d2\u5ea6: "+this.Prize_Angle),console.log("\u8f2a\u76e4\u5230\u9054\u7684\u89d2\u5ea6: "+this.wheel.angle),this.wheelState=0,console.log("\u606d\u559c\u62bd\u5230"+50*(this.Prize_ID+1)+"\u5143"),alert("\u606d\u559c\u62bd\u5230"+50*(this.Prize_ID+1)+"\u5143")}}),cc._RF.pop()},{}],game:[function(e,t){"use strict";cc._RF.push(t,"f602fEZoAVONJ+gRTEBX/bR","game"),cc.Class({extends:cc.Component,properties:{content:{default:null,type:cc.Node},PrizeImage:{default:[],type:cc.SpriteFrame}},onLoad:function(){this.speed=.06,this.cycle=0,this.lotterymessage=!1,this.PrizeID=3,this.count=0,this.index=0},start:function(){for(var e=0;e<this.content.children.length;e++)this.content.children[e].getChildByName("prize").getComponent(cc.Sprite).spriteFrame=this.PrizeImage[e%this.PrizeImage.length]},startAction:function(){0==this.count&&(this.GoAni=function(){this.count>this.cycle*this.content.children.length+this.PrizeID&&this.lotterymessage?(this.unschedule(this.GoAni),this.count=0):this.count>this.cycle*this.content.children.length&&this.lotterymessage||this.count<5?(this.ControlAni(),this.unschedule(this.GoAni),this.schedule(this.GoAni,8*this.speed)):this.count>5&&this.count<12||this.count==(this.cycle-1)*this.content.children.length?(this.ControlAni(),this.unschedule(this.GoAni),this.schedule(this.GoAni,3*this.speed)):this.count>12&&this.count<20?(this.ControlAni(),this.unschedule(this.GoAni),this.schedule(this.GoAni,this.speed)):this.count==(this.cycle-2)*this.content.children.length?(this.ControlAni(),this.unschedule(this.GoAni),this.schedule(this.GoAni,2*this.speed)):(this.ControlAni(),console.log(.5*this.speed))},this.schedule(this.GoAni,this.speed))},lottery:function(){this.cycle=Math.ceil(this.count/this.content.children.length)+3,this.lotterymessage=!0},ControlAni:function(){this.content.children[(this.index+this.content.children.length-1)%this.content.children.length].color=new cc.Color(255,255,255),this.index=this.index%this.content.children.length,this.content.children[this.index].color=new cc.Color(255,0,0),this.index++,this.count++}}),cc._RF.pop()},{}]},{},["ShowSignner","Signner","PickNumbers","Host1_weel","game","NewScript","ani","Model"]);