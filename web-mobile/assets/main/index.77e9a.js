window.__require=function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!a&&u)return u(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){return o(t[s][1][e]||e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<i.length;s++)o(i[s]);return o}({Ani_Color:[function(e,t){"use strict";cc._RF.push(t,"f1c99jfTJ9NaoWnMUnjWq/F","Ani_Color"),cc.Class({extends:cc.Component,properties:{Time:{default:.5,type:cc.Float},Color1:{default:[],type:cc.Float},Color2:{default:[],type:cc.Float},Delay:{default:0,type:cc.Float}},start:function(){this.TwinklingAni()},TwinklingAni:function(){cc.tween(this.node).repeatForever(cc.tween().to(this.Time,{color:cc.color(this.Color1[0],this.Color1[1],this.Color1[2])}).to(this.Time,{color:cc.color(this.Color2[0],this.Color2[1],this.Color2[2])}).delay(this.Delay)).start()}}),cc._RF.pop()},{}],Ani_Opacity_Progressive:[function(e,t){"use strict";cc._RF.push(t,"d8f4bSmc/FBfIaAx6V4dlj8","Ani_Opacity_Progressive"),cc.Class({extends:cc.Component,properties:{Target:{default:[],type:[cc.Node]}},start:function(){this.CountTarget(),this.count=1},CountTarget:function(){this.schedule(function(){this.judge(this.count-1)},.08,this.Target.length)},judge:function(e){this.count==this.Target.length+1?this.clear():(this.count+=1,this.Target[e].active=!0,this.OpacityAni(this.Target[e]))},clear:function(){this.count=1,this.scheduleOnce(function(){for(var e=0;e<this.Target.length;e++)this.Target[e].active=!1,this.Target[e].opacity=0;this.CountTarget()},1)},OpacityAni:function(e){cc.tween(e).to(1,{opacity:255}).start()}}),cc._RF.pop()},{}],Ani_Opacity:[function(e,t){"use strict";cc._RF.push(t,"ab26c/F9apDIKeJ9h9Oww5V","Ani_Opacity"),cc.Class({extends:cc.Component,properties:{Twinkling:{default:!1,type:cc.bool},Time:{default:.5,type:cc.Float},Opacity:{default:255,type:cc.Float},Opacity2:{default:0,type:cc.Float},Delay:{default:0,type:cc.Float}},start:function(){0==this.Twinkling?this.OpacityAni():this.TwinklingAni()},OpacityAni:function(){this.OpacityAniTween=cc.tween(this.node).delay(this.Delay).to(this.Time,{opacity:this.Opacity}).start()},TwinklingAni:function(){this.TwinklingAniTween=cc.tween(this.node).repeatForever(cc.tween().to(this.Time,{opacity:this.Opacity}).to(this.Time,{opacity:this.Opacity2}).delay(this.Delay)).start()},StopTween:function(){0==this.Twinkling?this.OpacityAniTween.stop():this.TwinklingAniTween.stop()}}),cc._RF.pop()},{}],Ani_PositionIN:[function(e,t){"use strict";cc._RF.push(t,"42fbfC7khBCK6aYf/B39dqR","Ani_PositionIN"),cc.Class({extends:cc.Component,properties:{Time:{default:.5,type:cc.Float},x:{default:0,type:cc.Float},y:{default:0,type:cc.Float},Delay:{default:0,type:cc.Float}},start:function(){this.PositionInAni()},PositionInAni:function(){cc.tween(this.node).delay(this.Delay).to(this.Time,{position:cc.v2(this.x,this.y)}).start()}}),cc._RF.pop()},{}],Ani_Scale:[function(e,t){"use strict";cc._RF.push(t,"cc3e4aMCB1GtIUNAODUamhR","Ani_Scale"),cc.Class({extends:cc.Component,properties:{Twinkling:{default:!1,type:cc.bool},Loop:{default:!1,type:cc.bool},Time1:{default:.5,type:cc.Float},Time2:{default:.5,type:cc.Float},Scale:{default:255,type:cc.Float},Scale2:{default:0,type:cc.Float},Delay:{default:0,type:cc.Float}},start:function(){1==this.Loop?this.LoopAni():1==this.Twinkling?this.TwinklingAni():this.ScaleAni()},ScaleAni:function(){cc.tween(this.node).to(this.Time1,{scale:(this.Scale,this.Scale)}).start()},TwinklingAni:function(){var e=this;cc.tween(this.node).repeatForever(cc.tween().call(function(){e.node.active=!0}).to(this.Time1,{scale:(this.Scale,this.Scale)}).delay(this.Delay).to(this.Time2,{scale:(this.Scale2,this.Scale2)})).start()},LoopAni:function(){var e=this;cc.tween(this.node).repeatForever(cc.tween().to(this.Time1,{scale:(this.Scale,this.Scale)}).call(function(){e.node.scale=(e.Scale2,e.Scale2)})).start()}}),cc._RF.pop()},{}],Ani_UPandDOWN:[function(e,t){"use strict";cc._RF.push(t,"89209mb7B5E7opQmXjzQ00M","Ani_UPandDOWN"),cc.Class({extends:cc.Component,properties:{Time:{default:.8,type:cc.Float},PosX:{default:0,type:cc.Float},PosY:{default:80,type:cc.Float},Delay:{default:0,type:cc.Float}},onLoad:function(){},start:function(){cc.tween(this.node).repeatForever(cc.tween().by(this.Time,{position:cc.v2(this.PosX,this.PosY)}).by(this.Time,{position:cc.v2(this.PosX,-this.PosY)}).by(this.Time,{position:cc.v2(this.PosX,this.PosY)}).by(this.Time,{position:cc.v2(this.PosX,-this.PosY)}).delay(this.Delay)).start()}}),cc._RF.pop()},{}],BackGround_Theme:[function(e,t){"use strict";cc._RF.push(t,"0f50cGW9sJAaIe0BHTkMxzZ","BackGround_Theme");var n=e("Model");cc.Class({extends:cc.Component,properties:{Image:{default:!1,type:cc.bool},Animations:{default:!1,type:cc.bool},AnimationStart:{default:"",type:cc.string},AnimationLoop:{default:!1,type:cc.bool}},onLoad:function(){"host"==n.role?this.Role="\u4e3b\u6301\u4eba":this.Role="\u73a9\u5bb6";var e=this;1==this.Image?cc.resources.load(n.GameName+"/"+n.BackGround_Theme+"/"+this.Role+"/\u5716\u7247/"+this.node.name,cc.SpriteFrame,function(t,n){e.node.getComponent(cc.Sprite).spriteFrame=t?null:n}):1==this.Animations&&cc.resources.load(n.GameName+"/"+n.BackGround_Theme+"/"+this.Role+"/\u52d5\u5716/"+this.node.name,sp.SkeletonData,function(t,n){t?e.node.getComponent(sp.Skeleton).skeletonData=null:(e.node.getComponent(sp.Skeleton).skeletonData=n,e.node.getComponent(sp.Skeleton).setAnimation(0,e.AnimationStart,e.AnimationLoop))})},start:function(){}}),cc._RF.pop()},{Model:"Model"}],BeforeGameCountDown:[function(e,t){"use strict";cc._RF.push(t,"229e69xzhlPnIkUCyDYOGKO","BeforeGameCountDown");var n=e("Model");cc.Class({extends:cc.Component,properties:{countdownspritelist:{default:[],type:[cc.SpriteFrame]},countdownSound:{default:null,type:cc.AudioClip},countdownfinishSound:{default:null,type:cc.AudioClip},countdownsprite:cc.Sprite},onLoad:function(){},start:function(){parent.postMessage("Count","https://"+window.location.host),this.count=0,this.schedule(function(){cc.director.getScene()._name.includes("Guest3_CountDown")?this.Guset_countdown():cc.director.getScene()._name.includes("Host2_CountDown")&&this.Host_countdown()},1,4)},Host_countdown:function(){this.count++,this.countdownsprite.spriteFrame=this.countdownspritelist[this.count-1],console.log(this.count),this.count<4?this.currentsound=cc.audioEngine.play(this.countdownSound,!1,.5):4==this.count?(n.WebSocket_GameStatus_Host("gaming",.1),this.currentsound=cc.audioEngine.play(this.countdownfinishSound,!1,.5)):5==this.count&&cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Host3_Game",function(e,t){cc.director.runScene(t)})},Guset_countdown:function(){this.count++,this.countdownsprite.spriteFrame=this.countdownspritelist[this.count-1],5==this.count&&cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Guest4_Game",function(e,t){cc.director.runScene(t)})}}),cc._RF.pop()},{Model:"Model"}],1:[function(e,t,n){"use strict";n.byteLength=function(e){var t=u(e),n=t[0],i=t[1];return 3*(n+i)/4-i},n.toByteArray=function(e){var t,n,i=u(e),s=i[0],a=i[1],c=new r(l(0,s,a)),d=0,f=a>0?s-4:s;for(n=0;n<f;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;return 2===a&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,c[d++]=255&t),1===a&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t),c},n.fromByteArray=function(e){for(var t,n=e.length,o=n%3,r=[],s=0,a=n-o;s<a;s+=16383)r.push(d(e,s,s+16383>a?a:s+16383));return 1===o?(t=e[n-1],r.push(i[t>>2]+i[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],r.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),r.join("")};for(var i=[],o=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)i[a]=s[a],o[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){return 3*(t+n)/4-n}function d(e,t,n){for(var o,r,s=[],a=t;a<n;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(i[(r=o)>>18&63]+i[r>>12&63]+i[r>>6&63]+i[63&r]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){(function(t){"use strict";var i=e("base64-js"),o=e("ieee754"),r=e("isarray");function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return u(this,e,t,n)}function u(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?m(e,t,n,i):"string"==typeof t?h(e,t,n):g(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t,n,i){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof i?a(e,t).fill(n,i):a(e,t).fill(n):a(e,t)}function f(e,t){if(l(t),e=a(e,t<0?0:0|y(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|v(t,n),o=(e=a(e,i)).write(t,n);return o!==i&&(e=e.slice(0,o)),e}function p(e,t){var n=t.length<0?0:0|y(t.length);e=a(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function m(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=p(e,t),e}function g(e,t){if(c.isBuffer(t)){var n=0|y(t.length);return 0===(e=a(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?a(e,0):p(e,t);if("Buffer"===t.type&&r(t.data))return p(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function v(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(e).length;default:if(i)return Q(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return O(this,t,n);case"ascii":return F(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function b(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function C(e,t,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:S(e,t,n,i,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):S(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function S(e,t,n,i,o){var r,s=1,a=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var l=-1;for(r=n;r<a;r++)if(u(e,r)===u(t,-1===l?0:r-l)){if(-1===l&&(l=r),r-l+1===c)return l*s}else-1!==l&&(r-=r-l),l=-1}else for(n+c>a&&(n=a-c),r=n;r>=0;r--){for(var d=!0,f=0;f<c;f++)if(u(e,r+f)!==u(t,f)){d=!1;break}if(d)return r}return-1}function w(e,t,n,i){n=Number(n)||0;var o=e.length-n;i?(i=Number(i))>o&&(i=o):i=o;var r=t.length;if(r%2!=0)throw new TypeError("Invalid hex string");i>r/2&&(i=r/2);for(var s=0;s<i;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function k(e,t,n,i){return K(Q(t,e.length-n),e,n,i)}function T(e,t,n,i){return K(Y(t),e,n,i)}function M(e,t,n,i){return T(e,t,n,i)}function A(e,t,n,i){return K(X(t),e,n,i)}function P(e,t,n,i){return K(V(t,e.length-n),e,n,i)}function E(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function O(e,t,n){n=Math.min(e.length,n);for(var i=[],o=t;o<n;){var r,s,a,c,u=e[o],l=null,d=u>239?4:u>223?3:u>191?2:1;if(o+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(r=e[o+1]))&&(c=(31&u)<<6|63&r)>127&&(l=c);break;case 3:r=e[o+1],s=e[o+2],128==(192&r)&&128==(192&s)&&(c=(15&u)<<12|(63&r)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:r=e[o+1],s=e[o+2],a=e[o+3],128==(192&r)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&r)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|1023&l),i.push(l),o+=d}return R(i)}n.Buffer=c,n.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},n.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),n.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return d(null,e,t,n)},c.allocUnsafe=function(e){return f(null,e)},c.allocUnsafeSlow=function(e){return f(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,r=Math.min(n,i);o<r;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!r(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=c.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},c.byteLength=v,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):_.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,i,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var r=(o>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(r,s),u=this.slice(i,o),l=e.slice(t,n),d=0;d<a;++d)if(u[d]!==l[d]){r=u[d],s=l[d];break}return r<s?-1:s<r?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return C(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return C(this,e,t,n,!1)},c.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var r=!1;;)switch(i){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return M(this,e,t,n);case"base64":return A(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,n);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function R(e){var t=e.length;if(t<=N)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=N));return n}function F(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(127&e[o]);return i}function I(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(e[o]);return i}function x(e,t,n){var i,o=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>o)&&(n=o);for(var r="",s=t;s<n;++s)r+=(i=e[s])<16?"0"+i.toString(16):i.toString(16);return r}function G(e,t,n){for(var i=e.slice(t,n),o="",r=0;r<i.length;r+=2)o+=String.fromCharCode(i[r]+256*i[r+1]);return o}function B(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,i,o,r){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<r)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function L(e,t,n,i){t<0&&(t=65535+t+1);for(var o=0,r=Math.min(e.length-n,2);o<r;++o)e[n+o]=(t&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function z(e,t,n,i){t<0&&(t=4294967295+t+1);for(var o=0,r=Math.min(e.length-n,4);o<r;++o)e[n+o]=t>>>8*(i?o:3-o)&255}function W(e,t,n,i){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,i,r){return r||W(e,0,n,4),o.write(e,t,n,i,23,4),n+4}function H(e,t,n,i,r){return r||W(e,0,n,8),o.write(e,t,n,i,52,8),n+8}c.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;n=new c(o,void 0);for(var r=0;r<o;++r)n[r]=this[r+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var i=this[e],o=1,r=0;++r<t&&(o*=256);)i+=this[e+r]*o;return i},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i},c.prototype.readUInt8=function(e,t){return t||B(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||B(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||B(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var i=this[e],o=1,r=0;++r<t&&(o*=256);)i+=this[e+r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var i=t,o=1,r=this[e+--i];i>0&&(o*=256);)r+=this[e+--i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readInt8=function(e,t){return t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||B(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||B(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||B(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||B(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||B(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||B(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,i){e=+e,t|=0,n|=0,i||D(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,r=0;for(this[t]=255&e;++r<n&&(o*=256);)this[t+r]=e/o&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,i){e=+e,t|=0,n|=0,i||D(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,r=1;for(this[t+o]=255&e;--o>=0&&(r*=256);)this[t+o]=e/r&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):z(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):z(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var o=Math.pow(2,8*n-1);D(this,e,t,n,o-1,-o)}var r=0,s=1,a=0;for(this[t]=255&e;++r<n&&(s*=256);)e<0&&0===a&&0!==this[t+r-1]&&(a=1),this[t+r]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var o=Math.pow(2,8*n-1);D(this,e,t,n,o-1,-o)}var r=n-1,s=1,a=0;for(this[t+r]=255&e;--r>=0&&(s*=256);)e<0&&0===a&&0!==this[t+r+1]&&(a=1),this[t+r]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):z(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):z(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return H(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return H(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o,r=i-n;if(this===e&&n<t&&t<i)for(o=r-1;o>=0;--o)e[o+t]=this[o+n];else if(r<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<r;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+r),t);return r},c.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{var s=c.isBuffer(e)?e:Q(new c(e,i).toString()),a=s.length;for(r=0;r<n-t;++r)this[r+t]=s[r%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function J(e){if((e=q(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Q(e,t){var n;t=t||1/0;for(var i=e.length,o=null,r=[],s=0;s<i;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&r.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&r.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&r.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;r.push(n)}else if(n<2048){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function Y(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function V(e,t){for(var n,i,o,r=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(n=e.charCodeAt(s))>>8,o=n%256,r.push(o),r.push(i);return r}function X(e){return i.toByteArray(J(e))}function K(e,t,n,i){for(var o=0;o<i&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":1,ieee754:4,isarray:3}],3:[function(e,t){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],4:[function(e,t,n){n.read=function(e,t,n,i,o){var r,s,a=8*o-i-1,c=(1<<a)-1,u=c>>1,l=-7,d=n?o-1:0,f=n?-1:1,h=e[t+d];for(d+=f,r=h&(1<<-l)-1,h>>=-l,l+=a;l>0;r=256*r+e[t+d],d+=f,l-=8);for(s=r&(1<<-l)-1,r>>=-l,l+=i;l>0;s=256*s+e[t+d],d+=f,l-=8);if(0===r)r=1-u;else{if(r===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,i),r-=u}return(h?-1:1)*s*Math.pow(2,r-i)},n.write=function(e,t,n,i,o,r){var s,a,c,u=8*r-o-1,l=(1<<u)-1,d=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:r-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*c-1)*Math.pow(2,o),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;e[n+h]=255&a,h+=p,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[n+h]=255&s,h+=p,s/=256,u-=8);e[n+h-p]|=128*m}},{}],ColorString:[function(e,t){"use strict";cc._RF.push(t,"ad2c1/DCDFPRYkAq8aXpcf/","ColorString"),cc.Class({extends:cc.Component,properties:{},start:function(){},colorOfString:function(e){if(null==e||7!=e.length)return null;var t=e.toLowerCase();if("#"==t.charAt(0)){t=t.slice(1);var n=parseInt(t[0]+t[1],16),i=parseInt(t[2]+t[3],16),o=parseInt(t[4]+t[5],16);return new cc.Color(n,i,o,255)}}}),cc._RF.pop()},{}],Customize_Skin:[function(e,t){"use strict";cc._RF.push(t,"c0e5e2UJ2BE+KSVCjACi+Wk","Customize_Skin");var n=e("Model");cc.Class({extends:cc.Component,properties:{Index:{default:0,type:cc.Float}},onLoad:function(){var e=this;cc.assetManager.loadRemote(n.Domain+n.customize_pictures[this.Index],{ext:".jpg"},function(t,n){if(t)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);e.node.getComponent(cc.Sprite).spriteFrame=i}})},start:function(){}}),cc._RF.pop()},{Model:"Model"}],Guest1_ConfirmDeviceMotionEvent:[function(e,t){"use strict";cc._RF.push(t,"8f065kKO3ZMjZ+0XvZbCxxo","Guest1_ConfirmDeviceMotionEvent");var n=e("Model");cc.Class({extends:cc.Component,properties:{WrongAlert:{default:null,type:cc.Node}},onLoad:function(){this.join=!1,this.AlertText=cc.find("\u756b\u5e03/\u8b66\u544a/\u8b66\u544a\u6587\u5b57"),n.TopTitle=cc.find("\u756b\u5e03/\u5834\u666f/\u6a19\u984c/\u4e0a\u65b9\u5c0f\u6a19").getComponent(cc.Sprite).spriteFrame,n.Prize_BackGround=cc.find("\u756b\u5e03/\u5834\u666f/\u80cc\u666f").getComponent(cc.Sprite).spriteFrame,n.Guest1_Join_JS=this},start:function(){cc.systemEvent.setAccelerometerEnabled(!0),cc.systemEvent.on(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this),"close"==n.HostWindow&&(this.AlertText.getComponent(cc.Label).string="\u4e3b\u8fa6\u55ae\u4f4d\u5df2\u95dc\u9589\u8996\u7a97\uff0c\u904a\u6232\u4e2d\u6b62",this.WrongAlert.active=!0)},onDeviceMotionEvent:function(e){var t=e.acc.x.toFixed(2),i=e.acc.y.toFixed(2),o=e.acc.z.toFixed(2),r=parseFloat(t)+parseFloat(i)+parseFloat(o);0==r&&"Android"==cc.sys.os&&1==this.join&&"close"!=n.GameStatusMessage&&"\u932f\u8aa4: \u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u4e0b\u4e00\u8f2a\u904a\u6232"!=n.CannotJoinGame?(this.AlertText.getComponent(cc.Label).string="\u6b64\u8a2d\u5099\u4e0d\u652f\u63f4\u6416\u4e00\u6416\u529f\u80fd",this.WrongAlert.active=!0,cc.systemEvent.setAccelerometerEnabled(!1)):0!=r&&"Android"==cc.sys.os&&1==this.join&&"close"!=n.GameStatusMessage&&"calculate"!=n.GameStatusMessage&&"end"!=n.GameStatusMessage?(this.join=!1,n.WebSocket_NumberOfPeople_Guest(500,!0)):"close"==n.GameStatusMessage&&"\u932f\u8aa4: \u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u4e0b\u4e00\u8f2a\u904a\u6232"!=n.CannotJoinGame&&1==this.join?(this.join=!1,this.AlertText.getComponent(cc.Label).string="\u8acb\u7b49\u5f85\u4e3b\u8fa6\u65b9\u9023\u63a5\u5f8c\u518d\u52a0\u5165\u904a\u6232",this.WrongAlert.active=!0):"calculate"!=n.GameStatusMessage&&"end"!=n.GameStatusMessage||1!=this.join||(this.join=!1,this.AlertText.getComponent(cc.Label).string="\u8acb\u7b49\u5f85\u4e3b\u8fa6\u65b9\u958b\u555f\u65b0\u7684\u4e00\u8f2a",this.WrongAlert.active=!0)},JoinGame:function(){var e=this;this.join=!0,"iOS"==cc.sys.os&&1==this.join&&"close"!=n.GameStatusMessage&&"calculate"!=n.GameStatusMessage&&"end"!=n.GameStatusMessage?"function"==typeof DeviceOrientationEvent.requestPermission&&DeviceOrientationEvent.requestPermission().then(function(t){"granted"===t&&(n.WebSocket_NumberOfPeople_Guest(500,!0),e.join=!1)}).catch(function(e){console.log(e)}):"close"==n.GameStatusMessage&&"\u932f\u8aa4: \u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u4e0b\u4e00\u8f2a\u904a\u6232"!=n.CannotJoinGame&&1==this.join?(this.join=!1,this.AlertText.getComponent(cc.Label).string="\u8acb\u7b49\u5f85\u4e3b\u8fa6\u65b9\u9023\u63a5\u5f8c\u518d\u52a0\u5165\u904a\u6232",this.WrongAlert.active=!0):"calculate"!=n.GameStatusMessage&&"end"!=n.GameStatusMessage||1!=this.join||(this.join=!1,this.AlertText.getComponent(cc.Label).string="\u8acb\u7b49\u5f85\u4e3b\u8fa6\u65b9\u958b\u555f\u65b0\u7684\u4e00\u8f2a",this.WrongAlert.active=!0)},ConnetSuccess:function(){""==n.CannotJoinGame?cc.director.loadScene("Guest2_Wait"):(this.AlertText.getComponent(cc.Label).string=n.CannotJoinGame,this.WrongAlert.active=!0)},ConnetFail:function(){this.AlertText.getComponent(cc.Label).string="\u7121\u6cd5\u9023\u63a5\u4f3a\u670d\u5668",this.WrongAlert.active=!0},CloseAlert:function(){this.WrongAlert.active=!1,"\u932f\u8aa4: \u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u4e0b\u4e00\u8f2a\u904a\u6232"==n.CannotJoinGame&&"close"!=n.HostWindow?cc.director.loadScene("Guest5_Prize"):n.HostWindow="open"}}),cc._RF.pop()},{Model:"Model"}],Guest1_JoinGame:[function(e,t){"use strict";cc._RF.push(t,"bb6f1qnP6hJZbNXL4cYNlkr","Guest1_JoinGame");var n=e("Model");cc.Class({extends:cc.Component,properties:{WrongAlert:{default:null,type:cc.Node},AlertText:{default:null,type:cc.Label}},start:function(){n.Guest1_Join_JS=this,n.TopTitle=cc.find("\u756b\u5e03/\u5834\u666f/\u6a19\u984c/\u4e0a\u65b9\u5c0f\u6a19").getComponent(cc.Sprite).spriteFrame,n.Prize_BackGround=cc.find("\u756b\u5e03/\u5834\u666f/\u80cc\u666f").getComponent(cc.Sprite).spriteFrame,this.ingame=!1,"QA"==n.GameName&&(n.QA_Guest=new WebSocket("wss://"+n.local_ID+"/ws/v1/game/guest/QA?activity_id="+n.activity_id+"&game_id="+n.game_id+"&game="+n.GameName),n.WebSocket_QA_Guest(!1,.1)),"close"==n.HostWindow&&(this.AlertText.string="\u4e3b\u8fa6\u55ae\u4f4d\u5df2\u95dc\u9589\u8996\u7a97\uff0c\u904a\u6232\u4e2d\u6b62",this.WrongAlert.active=!0)},JoinGame:function(){"close"==n.GameStatusMessage&&"\u932f\u8aa4: \u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u4e0b\u4e00\u8f2a\u904a\u6232"!=n.CannotJoinGame?(this.AlertText.string="\u8acb\u7b49\u5f85\u4e3b\u8fa6\u65b9\u9023\u63a5\u5f8c\u518d\u52a0\u5165\u904a\u6232",this.WrongAlert.active=!0):"calculate"==n.GameStatusMessage||"end"==n.GameStatusMessage?(this.AlertText.string="\u8acb\u7b49\u5f85\u4e3b\u8fa6\u65b9\u958b\u555f\u65b0\u7684\u4e00\u8f2a",this.WrongAlert.active=!0):0==this.ingame&&(this.ingame=!0,n.WebSocket_NumberOfPeople_Guest(500,!0))},ConnetSuccess:function(){""==n.CannotJoinGame&&"QA"!=n.GameName?cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Guest2_Wait",function(e,t){cc.director.runScene(t)}):""==n.CannotJoinGame&&"QA"==n.GameName?(n.WebSocket_UpDateScore_Guest(),cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Guest2_WaitingQuestion",function(e,t){cc.director.runScene(t)})):""!=n.CannotJoinGame&&(this.AlertText.string=n.CannotJoinGame,this.WrongAlert.active=!0)},ConnetFail:function(){this.AlertText.string="\u7121\u6cd5\u9023\u63a5\u4f3a\u670d\u5668",this.WrongAlert.active=!0,this.ingame=!1},CloseAlert:function(){this.WrongAlert.active=!1,"\u932f\u8aa4: \u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u4e0b\u4e00\u8f2a\u904a\u6232"==n.CannotJoinGame&&"close"!=n.HostWindow?cc.director.loadScene("Guest5_Prize"):n.HostWindow="open"}}),cc._RF.pop()},{Model:"Model"}],Guest1_PrizeInformation:[function(e,t){"use strict";cc._RF.push(t,"b83ce5vZENGcp/Bx3GTkY93","Guest1_PrizeInformation");var n=e("Model"),i=e("Guest5_PrizeRecordItem");cc.Class({extends:cc.Component,properties:{prize_information:{default:null,type:cc.Node},prize_information_Btn:{default:null,type:cc.Sprite},prize_Btn_UP:{default:null,type:cc.SpriteFrame},prize_Btn_DOWN:{default:null,type:cc.SpriteFrame},prize_information_Item:{default:null,type:cc.Prefab},items_parent:{default:null,type:cc.Node}},onload:function(){},start:function(){this.OpenPrize_Information=!1,this.itemlist=[],this.indexcount=0,this.SpawnPrizeInformation()},PrizeInformation_Press:function(){0==this.OpenPrize_Information?(this.prize_information_Btn.spriteFrame=this.prize_Btn_DOWN,this.OpenPrize_Information=!0,cc.tween(this.prize_information).to(.1,{position:cc.v2(0,-190)}).start()):(this.prize_information_Btn.spriteFrame=this.prize_Btn_UP,cc.tween(this.prize_information).to(.2,{position:cc.v2(0,-2527)}).start(),this.OpenPrize_Information=!1)},SpawnPrizeInformation:function(){for(var e=0;e<n.prize_name_guest.length;e++){var t=cc.instantiate(this.prize_information_Item);t.parent=this.items_parent;var o=t.getComponent(i);"yes"==n.exchangePrize[e]?t.setSiblingIndex(n.prize_name_guest.length):t.setSiblingIndex(0),o.updateInfo(e)}this.indexcount=n.prize_name_guest.length-1},SpawnPrize:function(){this.indexcount++;var e=cc.instantiate(this.prize_information_Item);e.parent=this.items_parent,e.setSiblingIndex(0),e.getComponent(i).updatePrizeBlock(this.indexcount)},URLFuc:function(e,t){"prize"==t?window.location.href="https://"+window.location.host+"/guest/winning?activity_id="+n.activity_id:"home"==t?window.location.href="https://"+window.location.host+"/guest?activity_id="+n.activity_id:"session"==t&&(window.location.href="https://"+window.location.host+"/guest/game/"+n.GameName+"?activity_id="+n.activity_id)},update:function(){}}),cc._RF.pop()},{Guest5_PrizeRecordItem:"Guest5_PrizeRecordItem",Model:"Model"}],Guest2_WaitForStart:[function(e,t){"use strict";cc._RF.push(t,"6dc05RqXWxMa4vuAhRC6dsu","Guest2_WaitForStart");var n=e("Model");cc.Class({extends:cc.Component,properties:{},start:function(){this.waitonesecond=!1,this.scheduleOnce(function(){this.waitonesecond=!0},1.1)},update:function(){"start"!=n.GameStatusMessage&&"gaming"!=n.GameStatusMessage||1!=this.waitonesecond?"end"==n.GameStatusMessage&&1==this.waitonesecond?cc.director.loadScene("Guest5_Prize"):"close"==n.GameStatusMessage&&1==this.waitonesecond&&(n.HostWindow="close",cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Guest1_JoinGame",function(e,t){cc.director.runScene(t)})):0==n.AlreadyPlayed?cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Guest3_CountDown",function(e,t){cc.director.runScene(t)}):cc.director.loadScene("Guest5_Prize")}}),cc._RF.pop()},{Model:"Model"}],Guest2_WaitingForQuestion:[function(e,t){"use strict";cc._RF.push(t,"c2bd3wUqZlDsIwM6v+H0Fa5","Guest2_WaitingForQuestion");var n=e("Model");cc.Class({extends:cc.Component,properties:{Rank:{default:null,type:cc.Label},Score:{default:null,type:cc.Label},Time:{default:null,type:cc.Label}},onLoad:function(){},start:function(){this.UpdateRankScore()},update:function(){"gaming"==n.GameStatusMessage?cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Guest3_Answer",function(e,t){cc.director.runScene(t)}):"end"==n.GameStatusMessage?cc.director.loadScene("Guest_Prize"):"close"==n.GameStatusMessage&&(n.HostWindow="close",cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Guest1_JoinGame",function(e,t){cc.director.runScene(t)}))},UpdateRankScore:function(){this.Rank.string=n.Rank,this.Score.string=n.Score,this.Time.string=n.gametimelimit}}),cc._RF.pop()},{Model:"Model"}],Guest3_Game:[function(e,t){"use strict";cc._RF.push(t,"dad24nwGSpLXoN5VdJLp2I3","Guest3_Game");var n=e("Model"),i=e("Guest2_WaitingForQuestion"),o=e("Ani_Opacity");e("../../\u5171\u7528\u6a21\u584a/Model").QuestionScore,cc.Class({extends:i,properties:{Options:{default:[],type:cc.Node},Question:{default:null,type:cc.Label},TimeBar:{default:null,type:cc.Sprite},Timelight:{default:null,type:cc.Sprite},RedTimeBar:{default:null,type:cc.SpriteFrame},RedTimelight:{default:null,type:cc.SpriteFrame},ConfirmBtn:{default:null,type:cc.Button},ConfirmBrightImg:{default:null,type:cc.SpriteFrame},AnswerTime:{default:null,type:cc.Label},Lights:{default:[],type:cc.Node}},onLoad:function(){this.ColorString=this.node.getComponent("ColorString"),this.CurrentChoose="",n.Choose="",this.state=0,this.lerp=1.1/n.gametimelimit*.03,this.TakeTime=0,this.AnswerTime.string=this.TakeTime},start:function(){this.LightBlueColor=this.ColorString.colorOfString("#88FCFE"),this.DarkBlueColor=this.ColorString.colorOfString("#203E3E"),this.GrayColor=this.ColorString.colorOfString("#515050"),this.WhiteColor=this.ColorString.colorOfString("#FFFFFF"),this.RedColor=this.ColorString.colorOfString("#FF1D1D"),this.GreenColor=this.ColorString.colorOfString("#1DFF61"),this.Question.string=n.QuestionCount+". "+n.Question[n.QuestionCount-1],this.UpdateRankScore();for(var e=0;e<4;e++)this.Options[e].getChildByName("\u9078\u9805\u6587\u5b57").getComponent(cc.Label).string=n.Options[n.QuestionCount-1][e],this.OpacityAni(this.Options[e].getChildByName("\u9078\u9805\u6587\u5b57")),this.OpacityAni(this.Options[e].getChildByName("\u9078\u9805\u5b57\u6bcd"));this.schedule(this.TakeTimeSchedule,.1),1==n.XMLTimeLimit&&this.schedule(this.TimeBarProgress,.03)},ChooseOptions:function(e,t){if("result"!=n.GameStatusMessage&&this.CurrentChoose!=t&&"calculate"!=n.GameStatusMessage&&""==n.Choose){this.ConfirmBtn.interactable=!0,this.ConfirmBtn.node.getComponent(cc.Sprite).spriteFrame=this.ConfirmBrightImg,this.ConfirmBtn.node.getComponent(o).enabled=!0,this.Lights[0].active=!0;for(var i=0;i<4;i++){if(this.CurrentChoose=t,this.Options[i].color=i==t?this.WhiteColor:this.GrayColor,i==t){this.OpacityAni(this.Options[i].getChildByName("\u5916\u6846\u71c8")),this.Options[i].getChildByName("\u5916\u6846\u71c8").getComponent(sp.Skeleton).setAnimation(0,"Lightflicker",!1);var r=this.Options[i];this.scheduleOnce(function(){r.getChildByName("\u5916\u6846\u71c8").getComponent(sp.Skeleton).timeScale=1,r.getChildByName("\u5916\u6846\u71c8").getComponent(sp.Skeleton).setAnimation(0,"lightning",!0)},1)}else this.Options[i].getChildByName("\u5916\u6846\u71c8").opacity=0;this.Options[i].getChildByName("\u9078\u9805\u5b57\u6bcd").color=this.Options[i].getChildByName("\u9078\u9805\u6587\u5b57").color=i==t?this.LightBlueColor:this.DarkBlueColor}}},ConfirmAnswer:function(){this.ConfirmBtn.interactable=!1,this.ConfirmBtn.node.getComponent(o).StopTween(),this.ConfirmBtn.node.opacity=255,this.Lights[0].active=!1,this.Lights[1].active=!0,this.Lights[2].active=!0,this.unschedule(this.TakeTimeSchedule),this.CurrentChoose==n.Answer[n.QuestionCount-1]&&(n.SecondScore=n.SecondScore+this.TakeTime),n.Choose=this.CurrentChoose,n.WebSocket_QA_Guest(!0,.1)},OpacityAni:function(e){e.opacity=0,cc.tween(e).to(.3,{opacity:255}).start()},TakeTimeSchedule:function(){this.TakeTime=this.TakeTime+.1,this.AnswerTime.string=this.TakeTime.toFixed(1)},TimeBarProgress:function(){this.TimeBar.fillRange-=this.lerp,this.count++,n.gametimeCountDown<=10&&0==this.alreadyred&&(this.alreadyred=!0,this.TimeBar.spriteFrame=this.RedTimeBar,this.Timelight.spriteFrame=this.RedTimelight,this.OpacityAni_Time()),this.TimeBar.fillRange<0&&(this.Timelight.node.active=!1,this.unschedule(this.TimeBarProgress))},OpacityAni_Time:function(){cc.tween(this.Timelight.node).repeatForever(cc.tween().to(.2,{opacity:0}).to(.2,{opacity:255})).start()},update:function(){if("result"==n.GameStatusMessage&&0==this.state){this.ConfirmBtn.interactable=!1,this.state=1,this.unschedule(this.TimeBarProgress);for(var e=0;e<4;e++)e==n.Answer[n.QuestionCount-1]?(this.Options[e].color=this.WhiteColor,this.Options[e].getComponent(sp.Skeleton).setAnimation(0,"right",!1),this.Options[e].getChildByName("\u9078\u9805\u6587\u5b57").color=this.Options[e].getChildByName("\u9078\u9805\u5b57\u6bcd").color=this.Options[e].getChildByName("\u5916\u6846\u71c8").color=this.GreenColor,this.OpacityAni(this.Options[e].getChildByName("\u9078\u9805\u6587\u5b57")),this.OpacityAni(this.Options[e].getChildByName("\u9078\u9805\u5b57\u6bcd"))):e!=n.Answer[n.QuestionCount-1]&&""==this.CurrentChoose&&(this.Options[e].getChildByName("\u9078\u9805\u6587\u5b57").color=this.Options[e].getChildByName("\u9078\u9805\u5b57\u6bcd").color=this.DarkBlueColor,this.Options[e].color=this.GrayColor);this.CurrentChoose!=n.Answer[n.QuestionCount-1]&&""!=this.CurrentChoose?(this.Options[this.CurrentChoose].getComponent(sp.Skeleton).setAnimation(0,"Wrong",!1),this.Options[this.CurrentChoose].getChildByName("\u9078\u9805\u6587\u5b57").color=this.Options[this.CurrentChoose].getChildByName("\u9078\u9805\u5b57\u6bcd").color=this.Options[this.CurrentChoose].getChildByName("\u5916\u6846\u71c8").color=this.RedColor):this.CurrentChoose==n.Answer[n.QuestionCount-1]&&""!=this.CurrentChoose&&(n.Score=Math.round(n.Score+n.QuestionScore[n.QuestionCount-1]+.5*n.QuestionScore[n.QuestionCount-1]/Math.ceil(this.TakeTime)),n.CorrectAnswerCount++,this.Score.string=n.Score),n.QuestionCount++}else"question"==n.GameStatusMessage&&1==this.state?cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Guest2_WaitingQuestion",function(e,t){cc.director.runScene(t)}):"calculate"==n.GameStatusMessage&&1==this.state&&n.QA_Guest.close()}}),cc._RF.pop()},{"../../\u5171\u7528\u6a21\u584a/Model":"Model",Ani_Opacity:"Ani_Opacity",Guest2_WaitingForQuestion:"Guest2_WaitingForQuestion",Model:"Model"}],Guest4_CatchRedpacket:[function(e,t){"use strict";cc._RF.push(t,"bcb12aXiNtNJqC5IhrlOMRA","Guest4_CatchRedpacket");var n=e("Model");cc.Class({extends:cc.Component,properties:{aniRedPacket:{default:null,type:cc.Node},aniButton:{default:null,type:cc.Node},aniHand:{default:null,type:cc.Node}},onLoad:function(){cc.director.getPhysicsManager().enabled=!0},start:function(){this.RopeCount=0,this.ButtunClickCheck=0,this.aniButtunStates="None",this.schedule(this.CheckCountinuePress,.5)},Rope:function(){"None"==this.aniButtunStates?(this.aniButtunStates="\u958b\u59cb\u5957\u7d05\u5305",this.aniButton.getComponent(sp.Skeleton).setAnimation(0,"animation3",!0),this.aniHand.getComponent(sp.Skeleton).timeScale=2.5,this.aniRedPacket.getComponent(sp.Skeleton).setAnimation(0,"catch1-2",!1),this.aniRedPacket.getComponent(sp.Skeleton).addAnimation(0,"catch1-3",!0)):"\u958b\u59cb\u5957\u7d05\u5305"==this.aniButtunStates&&this.RopeCount<=20&&(this.RopeCount++,20==this.RopeCount&&(this.unschedule(this.CheckCountinuePress),n.Lottery_Guest(),this.scheduleOnce(function(){"thanks"==n.result?this.aniRedPacket.getComponent(sp.Skeleton).setAnimation(0,"catch1-5",!1):this.aniRedPacket.getComponent(sp.Skeleton).setAnimation(0,"catch1-4",!1),this.scheduleOnce(function(){n.GameStatusMessage="end"},1.5)},3)))},CheckCountinuePress:function(){this.RopeCount!=this.ButtunClickCheck?this.ButtunClickCheck=this.RopeCount:(this.RopeCount=0,this.ButtunClickCheck=0)}}),cc._RF.pop()},{Model:"Model"}],Guest4_GameCountDown_ShowTime:[function(e,t){"use strict";cc._RF.push(t,"19103C1C8ROE6IEqrTwBI9B","Guest4_GameCountDown_ShowTime");var n=e("Model"),i=e("Guest4_GameCountDown");cc.Class({extends:i,properties:{countdown:{default:null,type:cc.Node},NoLinitTimeImg:{default:null,type:cc.Node},countdownText:{default:null,type:cc.Label},waitForCount:{default:null,type:cc.Node}},start:function(){this.alreadyend=!1,0==n.XMLTimeLimit&&(this.countdown.active=!1,this.NoLinitTimeImg.active=!0)},lateUpdate:function(){1==n.XMLTimeLimit&&(this.countdownText.string=n.gametimeCountDown),"calculate"==n.GameStatusMessage&&0==this.alreadyend?(n.QuestionCount=1,this.alreadyend=!0,this.waitForCount.active=!0,"QA"==n.GameName&&n.QA_Guest.close()):"close"==n.GameStatusMessage&&0==this.alreadyend?(this.alreadyend=!0,n.HostWindow="close",cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Guest1_JoinGame",function(e,t){cc.director.runScene(t)})):"end"==n.GameStatusMessage&&1==this.alreadyend&&(this.alreadyend=!1,n.Lottery_Guest(),this.scheduleOnce(function(){cc.director.loadScene("Guest_Prize")},2))}}),cc._RF.pop()},{Guest4_GameCountDown:"Guest4_GameCountDown",Model:"Model"}],Guest4_GameCountDown:[function(e,t){"use strict";cc._RF.push(t,"037baTi8DRKwokRLHQEF/UG","Guest4_GameCountDown");var n=e("Model");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.already=!1},lateUpdate:function(){"end"==n.GameStatusMessage&&0==this.already?(this.already=!0,cc.director.loadScene("Guest_Prize")):"close"==n.GameStatusMessage&&0==this.already&&(this.already=!0,n.HostWindow="close",cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Guest1_JoinGame",function(e,t){cc.director.runScene(t)}))}}),cc._RF.pop()},{Model:"Model"}],Guest4_ShakeRedpacket:[function(e,t){"use strict";cc._RF.push(t,"da8fbrVeyxAB7FB9/coyTfy","Guest4_ShakeRedpacket");var n=e("Model");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.GetPrize=!1,this.shakecount=0},start:function(){cc.systemEvent.setAccelerometerEnabled(!0),cc.systemEvent.on(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},onDeviceMotionEvent:function(e){var t=e.acc.x.toFixed(2),i=e.acc.y.toFixed(2),o=e.acc.z.toFixed(2);this.speed=Math.abs(t-.2)+Math.abs(i-.2)+Math.abs(o-.2),this.speed>2?(this.shakecount++,this.shakecount>=5&&0==this.GetPrize&&(cc.systemEvent.setAccelerometerEnabled(!1),cc.systemEvent.off(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this),this.GetPrize=!0,n.Lottery_Guest(),this.scheduleOnce(function(){n.GameStatusMessage="end"},3))):this.shakecount=0}}),cc._RF.pop()},{Model:"Model"}],Guest4_TugOfWar:[function(e,t){"use strict";cc._RF.push(t,"6bb02zGTmhBHKJjjJaft1Za","Guest4_TugOfWar"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){cc.systemEvent.setAccelerometerEnabled(!0),cc.systemEvent.on(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},onDeviceMotionEvent:function(e){var t=e.acc.x.toFixed(2);console.log("X :"+t),this.speed=Math.abs(t-.2)+Math.abs(y-.2)+Math.abs(z-.2)},Open:function(){"iOS"==cc.sys.os&&"function"==typeof DeviceOrientationEvent.requestPermission&&DeviceOrientationEvent.requestPermission().then(function(){}).catch(function(e){console.log(e)})}}),cc._RF.pop()},{}],Guest4_Whack_a_mole:[function(e,t){"use strict";cc._RF.push(t,"83d95EkbptGn5JBBdtEmj8P","Guest4_Whack_a_mole");var n=e("Model");cc.Class({extends:cc.Component,properties:{mouseHoles:{default:null,type:cc.Node},mouseTypeImg:{default:[],type:[cc.SpriteFrame]},mouseIndexArr:null},onLoad:function(){this.Hammer=cc.find("\u69cc\u5b50"),n.WebSocket_UpDateScore_Guest(),this.GetCustomize_pictures()},GetCustomize_pictures:function(){var e=this;cc.assetManager.loadRemote(n.Domain+n.customize_pictures[3],{ext:".jpg"},function(t,n){if(t)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);e.mouseTypeImg[0]=i}}),cc.assetManager.loadRemote(n.Domain+n.customize_pictures[2],{ext:".jpg"},function(t,n){if(t)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);e.mouseTypeImg[1]=i}}),cc.assetManager.loadRemote(n.Domain+n.customize_pictures[4],{ext:".jpg"},function(t,n){if(t)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);e.mouseTypeImg[2]=i}}),console.log(this.mouseTypeImg)},start:function(){this.mouseIndexArr=[],this.node.on("touchstart",function(e){this.Hammer.setPosition(e.currentTouch._startPoint.x+100,e.currentTouch._startPoint.y-90),this.Hammer.active=!0,this.scheduleOnce(function(){this.Hammer.active=!1},.15)},this),this.schedule(function(){this.MouseComeOut()},.5)},updateMouseNodeInfo:function(e,t){e.getComponent("Guest_MouseManager").isLive=!0,e.getComponent("Guest_MouseManager").tag=t},MouseComeOut:function(){for(var e=0;e<3;e++){var t=Math.floor(Math.random()*this.mouseHoles.childrenCount),n=Math.floor(Math.random()*this.mouseTypeImg.length);if(-1===this.mouseIndexArr.indexOf(t)){var i=this.mouseHoles.children[t].getChildByName("\u906e\u7f69").getChildByName("\u9f20");this.updateMouseNodeInfo(i,n),this.mouseIndexArr.push(t),i.getComponent(cc.Sprite).spriteFrame=this.mouseTypeImg[n],i.getComponent("Guest_MouseManager").GetData(t,n),i.getComponent("Guest_MouseManager").MouseAnimation()}}}}),cc._RF.pop()},{Model:"Model"}],Guest5_PrizeRecordItem:[function(e,t){"use strict";cc._RF.push(t,"34a39kGdyJLpY+shmDebf2c","Guest5_PrizeRecordItem");var n=e("Model");cc.Class({extends:cc.Component,properties:{timelabel:{default:null,type:cc.Label},roundlabel:{default:null,type:cc.Label},prize_namelabel:{default:null,type:cc.Label},PrizeMethod:{default:null,type:cc.Label},Prize_img:{default:null,type:cc.Sprite},AlreadyExchange:{default:null,type:cc.Node}},onLoad:function(){this.prize_method_chinese=null},updateInfo:function(e){var t=this;cc.assetManager.loadRemote(n.Domain+n.prize_picture[e],{ext:".jpg"},function(e,n){if(e)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);t.Prize_img.getComponent(cc.Sprite).spriteFrame=i}}),this.timelabel.string=n.Win_Time[e],this.roundlabel.string="\u7b2c"+n.getprize_round[e]+"\u8f2a",this.prize_namelabel.string=n.prize_name_guest[e],this.prize_method_chinese="site"==n.prize_method[e]?"\u73fe\u5834\u514c\u63db":"\u90f5\u4ef6\u514c\u63db",this.PrizeMethod.string=this.prize_method_chinese,"yes"==n.exchangePrize[e]&&(this.AlreadyExchange.active=!0)},updatePrizeBlock:function(e){var t=this;cc.assetManager.loadRemote(n.Domain+n.PrizeStaffs[e].picture,{ext:".jpg"},function(e,n){if(e)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);t.Prize_img.getComponent(cc.Sprite).spriteFrame=i}}),this.timelabel.string=n.PrizeStaffs[e].win_time,this.roundlabel.string="\u7b2c"+n.PrizeStaffs[e].round+"\u8f2a",this.prize_namelabel.string=n.PrizeStaffs[e].prize_name,this.prize_method_chinese="site"==n.PrizeStaffs[e].method?"\u73fe\u5834\u514c\u63db":"\u90f5\u4ef6\u514c\u63db",this.PrizeMethod.string=this.prize_method_chinese,"yes"==n.PrizeStaffs[e].status&&(this.AlreadyExchange.active=!0)}}),cc._RF.pop()},{Model:"Model"}],Guest5_Prize:[function(e,t){"use strict";cc._RF.push(t,"36c4a49rStLe63/oPQEoHYv","Guest5_Prize");var n=e("Model"),i=e("Guest5_PrizeRecordItem");cc.Class({extends:cc.Component,properties:{items:{default:null,type:cc.Prefab},ResultWindow:{default:null,type:cc.Node},Note:{default:null,type:cc.Node},CannotNextRound:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.prize_parents=cc.find("\u756b\u5e03/\u5df2\u7372\u5f97\u7684\u734e\u54c1\u5217\u8868/view/\u5167\u5bb9"),this.Title=cc.find("\u756b\u5e03/\u5834\u666f/\u6a19\u984c/\u4e0a\u65b9\u5c0f\u6a19"),this.BackGround=cc.find("\u756b\u5e03/\u5834\u666f/\u80cc\u666f")},start:function(){this.Title.getComponent(cc.Sprite).spriteFrame=n.TopTitle,this.BackGround.getComponent(cc.Sprite).spriteFrame=n.Prize_BackGround,"thanks"==n.result&&0==n.AlreadyPlayed&&"\u932f\u8aa4: \u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u4e0b\u4e00\u8f2a\u904a\u6232"!=n.CannotJoinGame?(this.ResultWindow.active=!0,this.ResultWindow.getChildByName("\u5f97\u734e\u7d50\u679c\u52d5\u756b").getComponent(sp.Skeleton).setAnimation(0,"lost",!0)):"thanks"!=n.result&&0==n.AlreadyPlayed&&"\u932f\u8aa4: \u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u4e0b\u4e00\u8f2a\u904a\u6232"!=n.CannotJoinGame?(this.ResultWindow.active=!0,this.ResultWindow.getChildByName("\u5f97\u734e\u7d50\u679c\u52d5\u756b").getComponent(sp.Skeleton).setAnimation(0,"win",!0),"close"==n.AllowRePrize&&(n.CannotJoinGame="\u932f\u8aa4: \u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u4e0b\u4e00\u8f2a\u904a\u6232",this.Note.getComponent(cc.Sprite).spriteFrame=this.CannotNextRound)):"\u932f\u8aa4: \u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u4e0b\u4e00\u8f2a\u904a\u6232"==n.CannotJoinGame&&(this.Note.getComponent(cc.Sprite).spriteFrame=this.CannotNextRound),this.setData(),this.GameStateJudge=!0},setData:function(){for(var e=0;e<n.prize_name_guest.length;e++){var t=cc.instantiate(this.items);t.parent=this.prize_parents,"yes"==n.exchangePrize[e]?t.setSiblingIndex(n.prize_name_guest.length):t.setSiblingIndex(0),t.getComponent(i).updateInfo(e)}},URLFuc:function(e,t){"prize"==t?window.location.href="https://"+window.location.host+"/guest/winning?activity_id="+n.activity_id:"home"==t?window.location.href="https://"+window.location.host+"/guest?activity_id="+n.activity_id:"session"==t&&(window.location.href="https://"+window.location.host+"/guest/game/"+n.GameName+"?activity_id="+n.activity_id)},CloseResult:function(){this.ResultWindow.active=!1},update:function(){"open"==n.GameStatusMessage&&"\u932f\u8aa4: \u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u4e0b\u4e00\u8f2a\u904a\u6232"!=n.CannotJoinGame&&1==this.GameStateJudge&&(n.AlreadyPlayed=0,n.result="thanks",cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Guest1_JoinGame",function(e,t){cc.director.runScene(t)}))}}),cc._RF.pop()},{Guest5_PrizeRecordItem:"Guest5_PrizeRecordItem",Model:"Model"}],Guest_MouseManager:[function(e,t){"use strict";cc._RF.push(t,"25315n6hs9I2Zo5QX1kiHB3","Guest_MouseManager");var n=e("Model");cc.Class({extends:cc.Component,properties:{isLive:!1,tag:null,dead:{default:null,type:cc.SpriteFrame},bomb:{default:null,type:cc.SpriteFrame},AddPoint:{default:null,type:cc.Node},MinusPoint:{default:null,type:cc.Node}},onLoad:function(){this.HolesParent=cc.find("\u756b\u5e03/\u5834\u666f/\u5730\u9f20\u6d1e"),this.GameManager=cc.find("\u756b\u5e03").getComponent("Guest4_Whack_a_mole"),this.GameScore=cc.find("\u756b\u5e03/\u5834\u666f/\u5f97\u5206\u6846/\u5206\u6578")},start:function(){this.node.on("touchstart",this.Hit,this),this.StartPosition=this.node.position,this.HitAniTarget=null,this.delytime=0,this.AddPoint_OriPos=this.AddPoint.position,this.MinusPoint_OriPos=this.MinusPoint.position,this.rateTotal=0,this.ratePass=0,this.GameScore.getComponent(cc.Label).string=n.Score},Hit:function(){1==this.isLive&&(this.rateTotal++,this.mouseani.stop(),this.isLive=!1,this.node.setPosition(-462.525,414.31,0),this.node.getComponent(cc.Sprite).spriteFrame=2==this.tag?this.bomb:this.dead,this.tag<2?(0==this.tag?(this.AddPoint.getComponent(cc.Label).string=1,n.Score+=1):(this.AddPoint.getComponent(cc.Label).string=3,n.Score+=3),this.ratePass++,this.AddPoint.active=!0,this.HitAniTarget=this.AddPoint):2==this.tag&&(n.Score-=1,n.Score=n.Score<0?0:n.Score,this.MinusPoint.active=!0,this.HitAniTarget=this.MinusPoint),this.HitAnimation(),this.GameScore.getComponent(cc.Label).string=n.Score,this.scheduleOnce(function(){this.HitAniTarget.opacity=255,this.AddPoint.active=!1,this.AddPoint.position=this.AddPoint_OriPos,this.MinusPoint.active=!1,this.MinusPoint.position=this.MinusPoint_OriPos,this.ResetHole()},.5)),n.SecondScore=this.ratePass/this.rateTotal},GetData:function(e,t){this.randomNodeIndex=e,this.delytime=2==t?1:.5},MouseAnimation:function(){var e=this;this.mouseani=cc.tween(this.node).by(.5,{position:cc.v2(0,520)}).delay(this.delytime).by(.5,{position:cc.v2(0,-510)}).call(function(){e.ResetHole()}).start()},HitAnimation:function(){this.hitani=cc.tween(this.HitAniTarget).to(.5,{opacity:0,position:cc.v2(this.HitAniTarget.position.x,40)}).start()},ResetHole:function(){this.node.position=this.StartPosition,this.GameManager.mouseIndexArr.splice(this.GameManager.mouseIndexArr.indexOf(this.randomNodeIndex,0),1)}}),cc._RF.pop()},{Model:"Model"}],Guest_rwdPlayer:[function(e,t){"use strict";cc._RF.push(t,"47ce2xxDsBPgqV10snO3sxM","Guest_rwdPlayer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){window.addEventListener("orientationchange",function(){cc.view._orientation!=cc.macro.ORIENTATION_AUTO&&cc.view.setOrientation(cc.macro.ORIENTATION_AUTO),180!=window.orientation&&0!=window.orientation||cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT),90!=window.orientation&&-90!=window.orientation||cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT)})}}),cc._RF.pop()},{}],HelloWorld:[function(e,t){"use strict";cc._RF.push(t,"1eb9e6WzEpPLpaae3N7ZWEa","HelloWorld");var n=e("./goeasy-2.0.12.min.js");window.Global={goEasy:null},cc.Class({extends:cc.Component,properties:{editbox:cc.EditBox,goEasy:null,content:""},onLoad:function(){this.initGoEasy(),this.connectGoEasy(),this.subscribe()},start:function(){},initGoEasy:function(){Global.goEasy=n.getInstance({host:"singapore.goeasy.io",appkey:"BC-64f4ade695d54cdcbcd9c4413fd94e1f",modules:["pubsub"]})},connectGoEasy:function(){var e=this;Global.goEasy.connect({onSuccess:function(){console.log("\u8fde\u63a5\u6210\u529f"),e.updateContent({content:"\u8fde\u63a5\u6210\u529f"})},onFailed:function(t){var n={content:"Failed to connect GoEasy, code:"+t.code+",error:"+t.content};e.updateContent(n)},onProgress:function(t){var n={content:"\u8fde\u63a5\u4e2d"+t};console.log("\u8fde\u63a5\u4e2d"),e.updateContent(n)}})},updateContent:function(e){var t=this.getCurrentTime()+" "+e.content;console.log(t)},subscribe:function(){var e=this;Global.goEasy.pubsub.subscribe({channel:"my_channel",onMessage:function(t){e.updateContent(t),cc.log("\u6536\u5230\u6d88\u606f")},onSuccess:function(){e.updateContent({content:"Channel\u8ba2\u9605\u6210\u529f\u3002"})},onFailed:function(t){var n={content:"errorCode:"+t.code+",\u9519\u8bef\u4fe1\u606f:"+t.content};e.updateContent(n)}})},publish:function(){""!=this.content&&Global.goEasy.pubsub.publish({channel:"my_channel",message:this.content,onSuccess:function(){console.log("\u6d88\u606f\u53d1\u5e03\u6210\u529f\u3002")},onFailed:function(e){console.log("\u6d88\u606f\u53d1\u9001\u5931\u8d25\uff0c\u9519\u8bef\u7f16\u7801\uff1a"+e.code+" \u9519\u8bef\u4fe1\u606f\uff1a"+e.content)}}),this.editbox.string=""},onChanged:function(e,t){this.content=e,this.editbox=t},getCurrentTime:function(){var e=new Date;return e.getHours()+":"+e.getMinutes()},update:function(){}}),cc._RF.pop()},{"./goeasy-2.0.12.min.js":"goeasy-2.0.12.min"}],Host1_Begin:[function(e,t){"use strict";cc._RF.push(t,"17b47HkTOJLkaG/+zNZSvjZ","Host1_Begin");var n=e("Model");cc.Class({extends:cc.Component,properties:{round:{default:null,type:cc.Label},NowPeople:{default:null,type:cc.Label},Session:{default:null,type:cc.Label},WrongAlert:{default:null,type:cc.Node}},onLoad:function(){n.HostStart_js=this,n.connet_ws=!1,this.Session.string="\u7576\u524d\u5834\u6b21 : "+n.Session,this.AlertText=cc.find("\u756b\u5e03/\u8b66\u544a/\u8b66\u544a\u6587\u5b57")},start:function(){parent.postMessage("Start","https://"+window.location.host),cc.director.preloadScene("Host3_Game")},touchBegin:function(){0==n.people?(this.AlertText.getComponent(cc.Label).string="\u5c1a\u672a\u6709\u73a9\u5bb6\u52a0\u5165\u904a\u6232",this.WrongAlert.active=!0):(1==n.XMLTimeLimit&&(n.gametimeCountDown=n.gametimelimit),n.CurrentRound=n.round,n.WebSocket_GameStatus_Host("start",.1))},WS_OnMessage:function(){this.scheduleOnce(function(){1==n.connet_ws?(n.NumberOfLotteryWS_Host=new WebSocket("wss://"+n.local_ID+"/ws/v1/game/winning/staff?activity_id="+n.activity_id+"&game_id="+n.game_id+"&game="+n.GameName),n.GameStatusMessage="start","QA"!=n.GameName?cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Host2_CountDown",function(e,t){cc.director.runScene(t)}):cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Host2_Question",function(e,t){cc.director.runScene(t)}),n.connet_ws=!1):(this.AlertText.getComponent(cc.Label).string="\u5c1a\u672a\u8207\u4f3a\u670d\u5668\u9023\u63a5",this.WrongAlert.active=!0)},.7)},CloseAlert:function(){this.WrongAlert.active=!1},update:function(){this.round.string=n.round,this.NowPeople.string=n.people}}),cc._RF.pop()},{Model:"Model"}],Host1_ComboBox:[function(e,t){"use strict";cc._RF.push(t,"c10feOZfKlIu4q7VKCG/Htl","Host1_ComboBox");var n=e("Model"),i=e("weel"),o=e("Jiugongge");cc.Class({extends:cc.Component,properties:{FirstOption:{default:null,type:cc.Button},MainMode:{default:null,type:cc.Label},Rule:{default:null,type:cc.Label},OptionsBox:{default:null,type:cc.Node},Winner_scroll:{default:null,type:cc.Node},Prize_scroll:{default:null,type:cc.Node},Mainobject:{default:null,type:cc.Node}},onLoad:function(){"turntable"==n.game_type?this.Weel_js=cc.find("\u756b\u5e03").getComponent(i):"jiugongge"==n.game_type&&(this.jiugongge_js=cc.find("\u756b\u5e03").getComponent(o))},start:function(){n.WebSocket_GameStatus_Host("close",.1),this.ChooseColor=this.FirstOption.normalColor,this.NormalColor=this.FirstOption.disabledColor,this.HoverColor=this.FirstOption.pressedColor,this.lastChoose=this.FirstOption,this.BoxStatus="close"},OptionBoxFuc:function(e,t){"controlBox"==t?this.schedule(this.ProgressBar,.01):(t.includes("\u5e78\u904b\u8f2a\u76e4")?(this.Weel_js.wheelState=0,this.Mainobject.stopAllActions(),this.Mainobject.rotation=0):this.jiugongge_js.ClearStatus(),n.mode=t.includes("\u9806\u5e8f\u53c3\u8207")?"order":"simultaneous",this.Winner_scroll.active=!t.includes("\u9806\u5e8f\u53c3\u8207"),this.Prize_scroll.active=!!t.includes("\u9806\u5e8f\u53c3\u8207"),t.includes("\u540c\u6642\u53c3\u8207")?(t.includes("\u5e78\u904b\u8f2a\u76e4")?this.aniSlow_In():this.jiugongge_js.TogetherAni(),n.WebSocket_GameStatus_Host("open",.1)):n.WebSocket_GameStatus_Host("close",.1),this.MainMode.string=t,this.Rule.string=t.includes("\u9806\u5e8f\u53c3\u8207")?"\u53c3\u52a0\u8005\u4f9d\u5e8f\u4e0a\u53f0\u62bd\u734e\uff0c\u4e26\u6703\u5728\u73fe\u5834\u767c\u653e\u734e\u54c1":"\u53c3\u52a0\u8005\u6383QRC\uff0c\u6703\u767c\u653e\u62bd\u734e\u6b21\u6578\uff0c\u5c07\u5728\u5404\u81ea\u7684\u624b\u6a5f\u4e0a\u62bd\u734e",this.lastChoose.normalColor=this.NormalColor,this.lastChoose.hoverColor=this.HoverColor,e.target.getComponent(cc.Button).normalColor=e.target.getComponent(cc.Button).hoverColor=this.ChooseColor,this.lastChoose=e.target.getComponent(cc.Button),this.schedule(this.ProgressBar,.01))},ProgressBar:function(){"close"==this.BoxStatus?(this.OptionsBox.active=!0,this.OptionsBox.getComponent(cc.Sprite).fillRange-=.2,this.OptionsBox.getComponent(cc.Sprite).fillRange<=-1&&(this.unschedule(this.ProgressBar),this.BoxStatus="open")):(this.OptionsBox.getComponent(cc.Sprite).fillRange+=.2,this.OptionsBox.getComponent(cc.Sprite).fillRange>=0&&(this.unschedule(this.ProgressBar),this.OptionsBox.active=!1,this.BoxStatus="close"))},aniSlow_In:function(){var e=cc.tween(this.Mainobject).by(10,{angle:360},{easing:"sineIn"}),t=cc.tween(this.Mainobject).by(5,{angle:360}).repeatForever();this.ani_wheelState1=cc.tween(this.Mainobject).then(e).then(t).start()}}),cc._RF.pop()},{Jiugongge:"Jiugongge",Model:"Model",weel:"weel"}],Host1_Congratulations:[function(e,t){"use strict";cc._RF.push(t,"613f4QghntKYon8kxwB9vBH","Host1_Congratulations");var n=e("Model");cc.Class({extends:cc.Component,properties:{prizeName:{default:null,type:cc.Label},prizeAvatar:{default:null,type:cc.Sprite}},updateInfo:function(){var e=this;this.prizeName.string="\u606d\u559c\u7372\u5f97 "+n.prize_name_guest,cc.assetManager.loadRemote(n.prize_picture,{ext:".jpg"},function(t,n){if(t)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);e.prizeAvatar.spriteFrame=i}})},onLoad:function(){},start:function(){}}),cc._RF.pop()},{Model:"Model"}],Host1_QRC:[function(e,t){"use strict";cc._RF.push(t,"4796bjRVSRAf5kel14YmIma","Host1_QRC");var n=e("Model");cc.Class({extends:cc.Component,properties:{},start:function(){var e=new QRCode(-1,QRErrorCorrectLevel.H);e.addData("https://hilives.net/interact/game/redpack?activity_id="+n.activity_id+"&game_id="+n.game_id),e.make();for(var t=this.node.getComponent(cc.Graphics),i=this.node.width/e.getModuleCount(),o=this.node.height/e.getModuleCount(),r=0;r<e.getModuleCount();r++)for(var s=0;s<e.getModuleCount();s++){e.isDark(r,s)?t.fillColor=cc.Color.BLACK:t.fillColor=cc.Color.WHITE;var a=Math.ceil((s+1)*i)-Math.floor(s*i),c=Math.ceil((r+1)*i)-Math.floor(r*i);t.rect(Math.round(s*i),Math.round(r*o),a,c),t.fill()}}}),cc._RF.pop()},{Model:"Model"}],Host1_WeelShowWinner:[function(e,t){"use strict";cc._RF.push(t,"eeb698HErRIJKOhBXrHgdOq","Host1_WeelShowWinner");var n=e("Model"),i=e("Host3_ShowNewWinner"),o=e("Host4_WinnerRedpaket");cc.Class({extends:i,properties:{Session:{default:null,type:cc.Label}},start:function(){this.items_parent=cc.find("\u756b\u5e03/\u4e2d\u734e\u5217\u8868/view/\u5167\u5bb9"),n.WebSocket_NumberOfLottery_Host(),parent.postMessage("Game","https://"+window.location.host),this.Session.string="\u7576\u524d\u5834\u6b21 : "+n.Session},SpawnNewWinner:function(){this.indexcount++,this.index.push(this.indexcount);var e=cc.instantiate(this.items);e.parent=this.items_parent,e.setSiblingIndex(0);var t=e.getComponent(o);this.itemlist.push(t),this.itemlist[this.indexcount-1].updateInfo(this.indexcount-1)}}),cc._RF.pop()},{Host3_ShowNewWinner:"Host3_ShowNewWinner",Host4_WinnerRedpaket:"Host4_WinnerRedpaket",Model:"Model"}],Host2_ShowQuestion:[function(e,t){"use strict";cc._RF.push(t,"db8feOc69tHCbzSR5QPl9mm","Host2_ShowQuestion");var n=e("Model");cc.Class({extends:cc.Component,properties:{Bar:{default:null,type:cc.Sprite},Question:{default:null,type:cc.Node},QuestionScore:{default:null,type:cc.Label},StopTimeButton:{default:null,type:cc.SpriteFrame},StopTimeButtonBlue:{default:null,type:cc.SpriteFrame},ContinueTimeButton:{default:null,type:cc.SpriteFrame},ContinueButtonBlue:{default:null,type:cc.SpriteFrame}},onLoad:function(){parent.postMessage("Start","https://"+window.location.host)},start:function(){n.WebSocket_GameStatus_Host("question",.1),this.lerp=1.1/n.QuestionSecond*.03,console.log(n.QuestionSecond),this.Stop=!1,this.Question.getComponent(cc.Label).string=n.Question[n.QuestionCount-1],this.QuestionScore.string="\u984c\u76ee\u5f97\u5206"+n.QuestionScore[n.QuestionCount-1],n.WebSocket_NumberOfLottery_Score_Host(),1==n.XMLTimeLimit&&(n.gametimeCountDown=n.gametimelimit),this.schedule(this.ProgressBar,.03)},Button:function(e,t){var i=e.target;"time"==t&&0==this.Stop?(this.Stop=!0,i.getComponent(cc.Button).normalSprite=this.ContinueTimeButton,i.getComponent(cc.Button).hoverSprite=this.ContinueButtonBlue):"time"==t&&1==this.Stop?(this.Stop=!1,i.getComponent(cc.Button).normalSprite=this.StopTimeButton,i.getComponent(cc.Button).hoverSprite=this.StopTimeButtonBlue):"StartAnswer"==t&&(this.unschedule(this.ProgressBar),n.WebSocket_GameStatus_Host("gaming",.1),cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Host3_Game",function(e,t){cc.director.runScene(t)}))},ProgressBar:function(){1!=this.Stop&&(this.Bar.getComponent(cc.Sprite).fillRange-=this.lerp,this.Bar.getComponent(cc.Sprite).fillRange<=0&&(this.unschedule(this.ProgressBar),n.WebSocket_GameStatus_Host("gaming",.1),cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Host3_Game",function(e,t){cc.director.runScene(t)})))}}),cc._RF.pop()},{Model:"Model"}],Host3_GameTimeCountDown_competition:[function(e,t){"use strict";cc._RF.push(t,"cc070tZabBPcZg3fu06JAgR","Host3_GameTimeCountDown_competition");var n=e("Model"),i=e("Host3_GameTimeCountDown");cc.Class({extends:i,properties:{},start:function(){this.alreadystop=!1},countdown:function(){"end"!=n.GameStatusMessage&&"calculate"!=n.GameStatusMessage&&"result"!=n.GameStatusMessage&&(n.gametimeCountDown--,n.WebSocket_GameStatus_Host("gaming",.1),this.countdownText.string=n.gametimeCountDown,10==n.gametimeCountDown&&(this.currentsound=cc.audioEngine.play(this.tensecond,!0,15)),0==n.gametimeCountDown&&("QA"==n.GameName?(n.WebSocket_GameStatus_Host("result",.1),n.GameStatusMessage="result"):(n.WebSocket_GameStatus_Host("calculate",.1),n.GameStatusMessage="calculate")))},update:function(){"calculate"!=n.GameStatusMessage&&"result"!=n.GameStatusMessage||0!=this.alreadystop||(this.alreadystop=!0,cc.audioEngine.stop(this.currentsound))}}),cc._RF.pop()},{Host3_GameTimeCountDown:"Host3_GameTimeCountDown",Model:"Model"}],Host3_GameTimeCountDown:[function(e,t){"use strict";cc._RF.push(t,"edcd5kCsdpKrZH8BJltQ2Jk","Host3_GameTimeCountDown");var n=e("Model");cc.Class({extends:cc.Component,properties:{countdownText:{default:null,type:cc.Label},tensecond:{default:null,type:cc.AudioClip}},onLoad:function(){this.alreadystop=!1,1==n.XMLTimeLimit?(this.countdownText.string=n.gametimeCountDown,this.schedule(function(){this.countdown()},1,n.gametimelimit+1)):0==n.XMLTimeLimit&&"redpack"==n.GameName&&(this.NoLimitTime=cc.find("\u756b\u5e03/\u5834\u666f/\u5012\u6578\u71c8\u7c60/\u7121\u9650\u6642"),this.NoLimitTime.active=!0)},start:function(){},countdown:function(){"end"!=n.GameStatusMessage&&0!=n.gametimeCountDown&&(n.gametimeCountDown--,this.countdownText.string=n.gametimeCountDown,10==n.gametimeCountDown&&(this.currentsound=cc.audioEngine.play(this.tensecond,!0,15)),0==n.gametimeCountDown&&(n.WebSocket_GameStatus_Host("end",.1),n.GameStatusMessage="end"))},update:function(){"end"==n.GameStatusMessage&&0==this.alreadystop&&(this.alreadystop=!0,cc.audioEngine.stop(this.currentsound))}}),cc._RF.pop()},{Model:"Model"}],Host3_Game:[function(e,t){"use strict";cc._RF.push(t,"e75dbxyPdZGi5ZhayAt05CV","Host3_Game");var n=e("Model"),i=e("Host3_WinRecordItem_Score");cc.Class({extends:cc.Component,properties:{Result:{default:[],type:cc.Sprite},ResultAnswered:{default:[],type:cc.Node},PeopleAnswered:{default:null,type:cc.Label},NowQuestionCount:{default:null,type:cc.Label},Options:{default:[],type:cc.Node},Question:{default:null,type:cc.Label},QuestionScore:{default:null,type:cc.Label},Rank:{default:[],type:cc.Node},ShowAnswerString:{default:null,type:cc.Label},TimeBar:{default:null,type:cc.Sprite},Timelight:{default:null,type:cc.Sprite},RedTimeBar:{default:null,type:cc.SpriteFrame},RedTimelight:{default:null,type:cc.SpriteFrame},Calculate:{default:null,type:cc.Node},RightResult:{default:null,type:cc.SpriteFrame},ResultBtn:{default:null,type:cc.Node}},onLoad:function(){n.WinnerData=this,n.WebSocket_QA_Host(),this.timenode=cc.find("\u756b\u5e03/\u79d2\u6578\u8655\u7406/\u79d2\u6578"),this.lerp=1.1/n.gametimelimit*.03,this.count=0,this.c=0,this.alreadyred=!1,this.alreadyredPrint=!1,this.SpawnNewWinner(),this.schedule(this.OpacityAni,.2),parent.postMessage("Game","https://"+window.location.host)},start:function(){this.ColorString=this.node.getComponent("ColorString"),this.Question.string=n.Question[n.QuestionCount-1],this.QuestionScore.string=n.QuestionScore[n.QuestionCount-1],this.SeeResult=!1,this.NowQuestionCount.string=n.QuestionCount+"/"+n.Question.length;for(var e=0;e<4;e++)this.Options[e].getChildByName("\u9078\u9805\u6587\u5b57").getComponent(cc.Label).string=n.Options[n.QuestionCount-1][e],this.OpacityAni_Start(this.Options[e].getChildByName("\u9078\u9805\u6587\u5b57")),this.OpacityAni_Start(this.Options[e].getChildByName("\u9078\u9805\u5b57\u6bcd"));1==n.XMLTimeLimit&&this.schedule(this.TimeBarProgress,.03)},SpawnNewWinner:function(){for(var e=0;e<5;e++){if(null==n.winner_name[e])return;this.Rank[e].getComponent(i).updateInfo(e)}},OpacityAni:function(){null!=n.winner_name[this.c]?(this.PlayDarkAni(this.Rank[this.c].getChildByName("\u9ed1\u5e03")),this.c++,console.log("c"+this.c),5==this.c&&this.unschedule(this.OpacityAni)):this.unschedule(this.OpacityAni)},AnswerButton:function(){0==this.SeeResult?(n.WebSocket_GameStatus_Host("result",.1),n.GameStatusMessage="result",this.ShowAnswerString.node.parent.active=!1):(n.WebSocket_GameStatus_Host("question",.1),cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Host2_Question",function(e,t){cc.director.runScene(t)}))},ResultButton:function(){this.Calculate.active=!0,n.WebSocket_GameStatus_Host("calculate",.1)},NextSence:function(){n.WebSocket_GameStatus_Host("end",.1),cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Host4_Last",function(e,t){cc.director.runScene(t)})},PrintResult:function(){this.SeeResult=!0,this.c=0,n.QuestionCount++,this.timenode.active=!1,this.ShowAnswerString.string="\u4e0b\u4e00\u984c",this.TimeBar.fillRange=0;for(var e=0;e<5;e++)this.PlayBrightAni(this.Rank[e].getChildByName("\u9ed1\u5e03"));this.scheduleOnce(function(){this.SpawnNewWinner(),this.BeDark()},1.2)},BeDark:function(){this.schedule(this.OpacityAni,.2)},PrintResultBar:function(){if(1!=this.alreadyredPrint){this.alreadyredPrint=!0,this.PrintResult();for(var e=0;e<4;e++)this.ResultAnswered[e].active=!0,this.ResultAnswered[e].getComponent(cc.Label).string=n.AnswerResult[e]+"\u4eba",e!=n.Answer[n.QuestionCount-2]?this.Options[e].color=this.Options[e].getChildByName("\u9078\u9805\u6587\u5b57").color=this.Options[e].getChildByName("\u9078\u9805\u5b57\u6bcd").color=this.ColorString.colorOfString("#045858"):(this.Options[e].getComponent(sp.Skeleton).setAnimation(0,"colorchange",!1),this.Options[e].getChildByName("\u4eba\u6578PC").getComponent(cc.Sprite).spriteFrame=this.RightResult,this.Options[e].color=this.Options[e].getChildByName("\u9078\u9805\u6587\u5b57").color=this.Options[e].getChildByName("\u9078\u9805\u5b57\u6bcd").color=this.ColorString.colorOfString("#4DFB31"));this.schedule(this.ProgressBarA,.01),this.schedule(this.ProgressBarB,.01),this.schedule(this.ProgressBarC,.01),this.schedule(this.ProgressBarD,.01),this.scheduleOnce(function(){n.QuestionCount<=n.Question.length&&(this.ShowAnswerString.node.parent.active=!0),this.ResultBtn.active=!0},1.5)}},PlayBrightAni:function(e){cc.tween(e).to(.5,{opacity:255}).start()},PlayDarkAni:function(e){cc.tween(e).to(.5,{opacity:0}).start()},OpacityAni_Start:function(e){e.opacity=0,cc.tween(e).to(.3,{opacity:255}).start()},OpacityAni_Time:function(){cc.tween(this.Timelight.node).repeatForever(cc.tween().to(.2,{opacity:0}).to(.2,{opacity:255})).start()},ProgressBarA:function(){0!=n.AnswerResult[0]?(this.Result[0].fillRange-=.01,this.Result[0].fillRange<=-n.AnswerResult[0]/n.people&&this.unschedule(this.ProgressBarA)):this.unschedule(this.ProgressBarA)},ProgressBarB:function(){0!=n.AnswerResult[1]?(this.Result[1].fillRange-=.01,this.Result[1].fillRange<=-n.AnswerResult[1]/n.people&&this.unschedule(this.ProgressBarB)):this.unschedule(this.ProgressBarB)},ProgressBarC:function(){0!=n.AnswerResult[2]?(this.Result[2].fillRange-=.01,this.Result[2].fillRange<=-n.AnswerResult[2]/n.people&&this.unschedule(this.ProgressBarC)):this.unschedule(this.ProgressBarC)},ProgressBarD:function(){0!=n.AnswerResult[3]?(this.Result[3].fillRange-=.01,this.Result[3].fillRange<=-n.AnswerResult[3]/n.people&&this.unschedule(this.ProgressBarD)):this.unschedule(this.ProgressBarD)},TimeBarProgress:function(){this.TimeBar.fillRange-=this.lerp,this.count++,n.gametimeCountDown<=10&&0==this.alreadyred&&(this.alreadyred=!0,this.TimeBar.spriteFrame=this.RedTimeBar,this.Timelight.spriteFrame=this.RedTimelight,this.OpacityAni_Time()),this.TimeBar.fillRange<0&&(this.Timelight.node.active=!1,this.unschedule(this.TimeBarProgress))},update:function(){this.PeopleAnswered.string=n.AnswerPeople}}),cc._RF.pop()},{Host3_WinRecordItem_Score:"Host3_WinRecordItem_Score",Model:"Model"}],Host3_ShowNewWinner_NewestWinner:[function(e,t){"use strict";cc._RF.push(t,"01c0cvG7rtNEKfeKqtPa8Hn","Host3_ShowNewWinner_NewestWinner");var n=e("Model"),i=e("Host3_ShowNewWinner");cc.Class({extends:i,properties:{items3_Text:{default:null,type:cc.Label},items4_Text:{default:null,type:cc.Label},items3_Picture:{default:null,type:cc.Sprite},items4_Picture:{default:null,type:cc.Sprite}},onLoad:function(){this.itemlist=[],this.winlist=[],this.index=[],this.indexcount=0,this.alreadyend=!1,this.items3_Text.string="",this.items3_Picture.spriteFrame=null,n.WinnerData=this,n.SpawnNewestWinner=!0},NewestWinner:function(){var e=this;this.items3_Picture.spriteFrame=null,this.items3_Text.string=n.winner_name[n.winner_name.length-1],cc.assetManager.loadRemote(n.winner_picture[n.winner_name.length-1],{ext:".jpg"},function(t,n){if(t)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);e.items3_Picture.spriteFrame=i}}),n.winner_name.length>=2?(e.items4_Picture.spriteFrame=null,this.items4_Text.string=n.winner_name[n.winner_name.length-2],cc.assetManager.loadRemote(n.winner_picture[n.winner_name.length-2],{ext:".jpg"},function(t,n){if(t)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);e.items4_Picture.spriteFrame=i}})):(this.items4_Text.string="",this.items4_Picture.spriteFrame=null)}}),cc._RF.pop()},{Host3_ShowNewWinner:"Host3_ShowNewWinner",Model:"Model"}],Host3_ShowNewWinner_Score:[function(e,t){"use strict";cc._RF.push(t,"03276Fbw89CPYjVjkDILSwm","Host3_ShowNewWinner_Score");var n=e("Model"),i=e("Host3_WinRecordItem_Score"),o=e("Host3_ShowNewWinner");cc.Class({extends:o,properties:{round:{default:null,type:cc.Label},WaitingRank:{default:null,type:cc.Node},Winners:{default:[],type:cc.Node},base:{default:null,type:cc.Node}},onLoad:function(){this.alreadyend=!1,this.itemlist=[],this.winlist=[],this.index=[],this.indexcount=0,this.WinnerArrey=[],this.objectpos=[],this.object=[],this.destroyobject=[],this.destroyindex=[],this.MaxShow=6,n.WinnerData=this,n.SpawnNewestWinner=!1},start:function(){this.items_parent=cc.find("\u756b\u5e03/\u4e2d\u734e\u5217\u8868/view"),n.WebSocket_NumberOfLottery_Score_Host(),parent.postMessage("Game","https://"+window.location.host),this.round.string=n.CurrentRound},SpawnNewWinner:function(){if("calculate"!=n.GameStatusMessage){if(this.nullcount=1,this.count=this.MaxShow,this.destroyobject=[],this.destroyindex=[],0==n.winner_id.length){this.WinnerArrey.length=0;for(var e=0;e<this.MaxShow;e++)this.items_parent.children[e].getChildByName("\u5206\u6578").getComponent(cc.Label).string="0\u5206",n.winner_score.push(0),cc.tween(this.items_parent.children[e]).to(.5,{opacity:0}).start()}else for(var t=0;t<this.MaxShow;t++)0==n.winner_id.includes(this.WinnerArrey[t])&&null!=this.WinnerArrey[t]&&(n.winner_id.push(this.WinnerArrey[t]),n.winner_score.push(0),cc.tween(this.items_parent.children[t]).to(.5,{opacity:0}).start());for(var o=0;o<this.MaxShow;o++)if(this.objectpos[o]=this.items_parent.children[o].position,o==this.MaxShow-1){for(var r=0;r<this.MaxShow;r++){var s=!1;if(console.log("this.WinnerArrey "+this.WinnerArrey+"gameModel.winner_id"+n.winner_id),null==this.WinnerArrey[r]&&null!=n.winner_id[r]&&0==this.WinnerArrey.includes(n.winner_id[r])&&0==s&&r<this.MaxShow)console.log(r+"\u8abf\u6574\u900f\u660e\u5ea6"),s=!0,this.items_parent.children[r].getComponent(i).updateInfo(r),this.items_parent.children[r].getComponent(i).judgeTopThree(r),this.WinnerArrey.push(n.winner_id[r]),cc.tween(this.items_parent.children[r]).to(.5,{opacity:255}).start();else if(this.WinnerArrey[r]!=n.winner_id[r]&&1==this.WinnerArrey.includes(n.winner_id[r])&&0==s){s=!0;var a=r,c=this.WinnerArrey.indexOf(n.winner_id[r]);console.log(r+"\u8b8a\u66f4\u4f4d\u7f6e");var u=this.items_parent.children[c],l=this.items_parent.children[a].position;u.getComponent(i).judgeTopThree(r),u.getChildByName("\u5206\u6578").getComponent(cc.Label).string=n.winner_score[r]+"\u5206",cc.tween(this.items_parent.children[c]).to(.5,{position:l,opacity:255}).start()}else null!=this.WinnerArrey[r]&&null!=n.winner_id[r]&&0==this.WinnerArrey.includes(n.winner_id[r])&&0==s?(s=!0,this.WinnerArrey.length<this.MaxShow?(console.log(r+"\u8abf\u6574\u900f\u660e\u5ea6\u3001\u8b8a\u66f4\u4f4d\u7f6e"),this.items_parent.children[this.WinnerArrey.length].getComponent(i).updateInfo(r),this.items_parent.children[this.WinnerArrey.length].getComponent(i).judgeTopThree(r),u=this.items_parent.children[this.WinnerArrey.length],this.WinnerArrey.push(n.winner_id[r]),this.index=r,cc.tween(u).to(.5,{position:this.objectpos[r],opacity:255}).start(),this.nullcount++):(console.log(r+"\u751f\u6210"),(u=cc.instantiate(this.items)).parent=this.items_parent,u.getComponent(i).updateInfo(r),u.getComponent(i).judgeTopThree(r),this.WinnerArrey.push(n.winner_id[r]),u.setPosition(this.base.position),this.base.setSiblingIndex(this.items_parent.children.length-1),cc.tween(u).to(.5,{position:this.objectpos[r]}).start())):this.WinnerArrey[r]==n.winner_id[r]&&r<this.MaxShow&&(console.log(r+"\u5206\u6578\u8b8a\u66f4"),(u=this.items_parent.children[r]).getChildByName("\u5206\u6578").getComponent(cc.Label).string=n.winner_score[r]+"\u5206");this.WinnerArrey[r]!=n.winner_id[r]&&n.winner_id.indexOf(this.WinnerArrey[r])>=this.MaxShow&&(a=n.winner_id.indexOf(this.WinnerArrey[r]),c=r,console.log(r+"\u522a\u9664"),u=this.items_parent.children[c],l=this.base.position,this.destroyobject.push(u),this.destroyindex.push(c),u.getChildByName("\u5206\u6578").getComponent(cc.Label).string=n.winner_score[r]+"\u5206",cc.tween(u).to(.4,{position:l,opacity:50}).start())}this.scheduleOnce(function(){for(var e=0;e<this.destroyobject.length;e++){console.log("\u6467\u6bc0 "+this.destroyobject[e].getChildByName("\u73a9\u5bb6\u540d\u7a31").getComponent(cc.Label).string);var t=this.WinnerArrey.indexOf(this.destroyindex[e]);this.WinnerArrey.splice(t,1),this.destroyobject[e].destroy()}},.5),this.scheduleOnce(function(){for(var e=0;e<this.MaxShow;e++)this.object[e]=this.items_parent.children[e],console.log("object: "+this.items_parent.children[e].getChildByName("\u73a9\u5bb6\u540d\u7a31").getComponent(cc.Label).string);for(var t=0;t<this.WinnerArrey.length;t++){console.log("\u9577\u5ea6 :"+this.WinnerArrey.length);var o=n.winner_id.indexOf(this.object[t].getComponent(i).id);this.object[t].setSiblingIndex(o),console.log(t+this.object[t].getChildByName("\u73a9\u5bb6\u540d\u7a31").getComponent(cc.Label).string+"\u8981\u53bb"+o+"id ="+this.object[t].getComponent(i).id),console.log("item_parent :"+this.items_parent.children[t].getChildByName("\u73a9\u5bb6\u540d\u7a31").getComponent(cc.Label).string),t==this.WinnerArrey.length-1&&this.Reset()}},.7)}}},Reset:function(){for(var e=0;e<this.MaxShow;e++){if(null==n.winner_id[e])return;this.WinnerArrey[e]=n.winner_id[e],console.log("\u91cd\u6574"+this.WinnerArrey.length)}},ClearRank:function(){this.indexcount=0,this.index.length=0,this.itemlist.length=0,this.items_parent.removeAllChildren()},NextSence:function(){n.WebSocket_GameStatus_Host("end",.1),n.GameStatusMessage="end",this.scheduleOnce(function(){cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Host4_Last",function(e,t){cc.director.runScene(t)})},2)},CloseGame:function(){n.WebSocket_GameStatus_Host("calculate",.1),n.GameStatusMessage="calculate"},update:function(){"calculate"==n.GameStatusMessage&&0==this.alreadyend&&(this.alreadyend=!0,this.WaitingRank.active=!0)}}),cc._RF.pop()},{Host3_ShowNewWinner:"Host3_ShowNewWinner",Host3_WinRecordItem_Score:"Host3_WinRecordItem_Score",Model:"Model"}],Host3_ShowNewWinner:[function(e,t){"use strict";cc._RF.push(t,"061559Bg5ZGurxX7ddMHO9N","Host3_ShowNewWinner");var n=e("Model"),i=e("Host3_WinRecordItem");cc.Class({extends:cc.Component,properties:{items:{default:null,type:cc.Prefab},items2:{default:null,type:cc.Prefab},prize_total:{default:null,type:cc.Label}},onLoad:function(){this.itemlist=[],this.winlist=[],this.index=[],this.indexcount=0,this.alreadyend=!1,cc.director.getPhysicsManager().enabled=!0,n.WinnerData=this,n.SpawnNewestWinner=!1},start:function(){this.items_parent=cc.find("\u756b\u5e03/\u4e2d\u734e\u5217\u8868/view/\u5167\u5bb9"),n.WebSocket_NumberOfLottery_Host(),parent.postMessage("Game","https://"+window.location.host),this.prize_total.string=n.prize_total},SpawnNewWinner:function(){if(n.winner_name.length%2==0){this.indexcount++,this.index.push(this.indexcount),(t=cc.instantiate(this.items)).parent=this.items_parent,t.setSiblingIndex(0);var e=t.getComponent(i);this.itemlist.push(e),this.itemlist[this.indexcount-1].updateInfo(this.indexcount-1)}else{var t;this.indexcount++,this.index.push(this.indexcount),(t=cc.instantiate(this.items2)).parent=this.items_parent,t.setSiblingIndex(0),e=t.getComponent(i),this.itemlist.push(e),this.itemlist[this.indexcount-1].updateInfo(this.indexcount-1)}this.prize_total.string=n.prize_total},CloseGame:function(){n.WebSocket_GameStatus_Host("end",.1),n.GameStatusMessage="end"},update:function(){"end"==n.GameStatusMessage&&0==this.alreadyend&&(this.alreadyend=!0,n.NumberOfLotteryWS_Host.close(),cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Host4_Last",function(e,t){cc.director.runScene(t)}))}}),cc._RF.pop()},{Host3_WinRecordItem:"Host3_WinRecordItem",Model:"Model"}],Host3_WinRecordItem_Score:[function(e,t){"use strict";cc._RF.push(t,"e7c76p0jrlDFbC91FqfD5fX","Host3_WinRecordItem_Score");var n=e("Model"),i=e("Host3_WinRecordItem");cc.Class({extends:i,properties:{Score:{default:null,type:cc.Label},Rank:{default:null,type:cc.Label},TopOne:{default:null,type:cc.SpriteFrame},TopTwo:{default:null,type:cc.SpriteFrame},TopThree:{default:null,type:cc.SpriteFrame},TopThreeFrame:{default:null,type:cc.Node}},updateInfo:function(e){var t=this;this.playerName.string=n.winner_name[e],this.Score.string=n.winner_score[e]+"\u5206",this.id=n.winner_id[e],cc.assetManager.loadRemote(n.winner_picture[e],{ext:".jpg"},function(e,n){if(e)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);t.playerAvatar.spriteFrame=i}})},judgeTopThree:function(e){this.scheduleOnce(function(){var t=this;this.Rank.string=e+1,this.index=e,e<3?cc.tween(this.TopThreeFrame).to(.3,{opacity:0}).call(function(){0==t.index?t.TopThreeFrame.getComponent(cc.Sprite).spriteFrame=t.TopOne:1==t.index?t.TopThreeFrame.getComponent(cc.Sprite).spriteFrame=t.TopTwo:2==t.index&&(t.TopThreeFrame.getComponent(cc.Sprite).spriteFrame=t.TopThree)}).to(.5,{opacity:255}).start():cc.tween(this.TopThreeFrame).to(.5,{opacity:0}).start()},.8)},onLoad:function(){},start:function(){}}),cc._RF.pop()},{Host3_WinRecordItem:"Host3_WinRecordItem",Model:"Model"}],Host3_WinRecordItem:[function(e,t){"use strict";cc._RF.push(t,"9bc09ZSX01DaKAtO2ymPTAw","Host3_WinRecordItem");var n=e("Model");cc.Class({extends:cc.Component,properties:{playerName:{default:null,type:cc.Label},playerAvatar:{default:null,type:cc.Sprite}},updateInfo:function(e){var t=this;this.playerName.string=n.winner_name[e],cc.assetManager.loadRemote(n.winner_picture[e],{ext:".jpg"},function(e,n){if(e)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);t.playerAvatar.spriteFrame=i}})},onLoad:function(){},start:function(){}}),cc._RF.pop()},{Model:"Model"}],Host4_ShowWinner_Score:[function(e,t){"use strict";cc._RF.push(t,"30fee/C7QlJUptjtX8M3+go","Host4_ShowWinner_Score");var n=e("Model"),i=e("Host4_WinnerRedpaket_Score"),o=e("Host4_ShowWinner");cc.Class({extends:o,properties:{Rank:{default:[],type:cc.Node}},onLoad:function(){this.winlist=[],this.index=[],this.indexcount=0,this.items_parent=cc.find("\u756b\u5e03/\u4e2d\u734e\u5217\u8868/view/\u5167\u5bb9"),this.AlertText=cc.find("\u756b\u5e03/\u8b66\u544a/\u8b66\u544a\u6587\u5b57")},start:function(){this.SpawnWinner(),"QA"!=n.GameName&&(this.round.string=n.CurrentRound),parent.postMessage("End","https://"+window.location.host)},SpawnWinner:function(){for(var e=0;e<3;e++){if(null==n.PrizeStaffs[e])return;this.Rank[e].getComponent(i).updateInfo(e)}for(var t=3;t<n.PrizeStaffs.length;t++){var o=cc.instantiate(this.items);o.parent=this.items_parent,o.getComponent(i).updateInfo(t)}}}),cc._RF.pop()},{Host4_ShowWinner:"Host4_ShowWinner",Host4_WinnerRedpaket_Score:"Host4_WinnerRedpaket_Score",Model:"Model"}],Host4_ShowWinner:[function(e,t){"use strict";cc._RF.push(t,"950f2YBL+VE0pB4ISoh9tdi","Host4_ShowWinner");var n=e("Host4_WinnerRedpaket"),i=e("Model");cc.Class({extends:cc.Component,properties:{items:{default:null,type:cc.Prefab},round:{default:null,type:cc.Label},WrongAlert:{default:null,type:cc.Node}},onLoad:function(){this.itemlist=[],this.winlist=[],this.index=[],this.indexcount=0,this.items_parent=cc.find("\u756b\u5e03/\u4e2d\u734e\u5217\u8868/view/\u5167\u5bb9"),this.AlertText=cc.find("\u756b\u5e03/\u8b66\u544a/\u8b66\u544a\u6587\u5b57")},start:function(){this.SpawnWinner(),this.round.string=i.CurrentRound,parent.postMessage("End","https://"+window.location.host)},NextRound:function(){0==i.prize_total?(this.AlertText.getComponent(cc.Label).string="\u6c92\u6709\u734e\u54c1\u4e86\uff0c\u7121\u6cd5\u958b\u555f\u4e0b\u4e00\u8f2a",this.WrongAlert.active=!0):(i.WebSocket_GameStatus_Host("open",.1),this.scheduleOnce(function(){1==i.connet_ws?(i.GameStatusMessage="open",i.QuestionCount=1,i.winner_name=[],i.prize_name_host=[],i.winner_picture=[],i.prize_name_host=[],i.winner_score=[],cc.resources.loadScene(i.GameName+"/"+i.BackGround_Theme+"/Host4_Last",function(e,t){cc.director.runScene(t)}),i.connet_ws=!1):(this.AlertText.getComponent(cc.Label).string="\u5c1a\u672a\u8207\u4f3a\u670d\u5668\u9023\u63a5",this.WrongAlert.active=!0)},.6))},CloseAlert:function(){this.WrongAlert.active=!1},SpawnWinner:function(){for(var e=0;e<i.winner_name.length;e++){var t=cc.instantiate(this.items);t.parent=this.items_parent;var o=t.getComponent(n);this.itemlist.push(o),this.itemlist[e].updateInfo(e)}},update:function(){}}),cc._RF.pop()},{Host4_WinnerRedpaket:"Host4_WinnerRedpaket",Model:"Model"}],Host4_WinnerRedpaket_Score:[function(e,t){"use strict";cc._RF.push(t,"c237c+bnwBLar8WzbOWNqmQ","Host4_WinnerRedpaket_Score");var n=e("Model");cc.Class({extends:cc.Component,properties:{playerName:{default:null,type:cc.Label},prize_name:{default:null,type:cc.Label},playerAvatar:{default:null,type:cc.Sprite},Score:{default:null,type:cc.Label},Rank:{default:null,type:cc.Label}},updateInfo:function(e){var t=this;this.playerName.string=n.PrizeStaffs[e].name,this.prize_name.string=n.PrizeStaffs[e].prize_name,this.Score.string=n.PrizeStaffs[e].score+"\u5206",e>2&&(this.Rank.string=e+1),cc.assetManager.loadRemote(n.PrizeStaffs[e].avatar,{ext:".jpg"},function(e,n){if(e)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);t.playerAvatar.spriteFrame=i}})},onLoad:function(){},start:function(){}}),cc._RF.pop()},{Model:"Model"}],Host4_WinnerRedpaket:[function(e,t){"use strict";cc._RF.push(t,"0e162/m1CBNZLvJg8kV82EK","Host4_WinnerRedpaket");var n=e("Model");cc.Class({extends:cc.Component,properties:{playerName:{default:null,type:cc.Label},prize_name:{default:null,type:cc.Label},playerAvatar:{default:null,type:cc.Sprite}},updateInfo:function(e){var t=this;this.playerName.string=n.winner_name[e],this.playerAvatar.spriteFrames=n.winner_picture[e],this.prize_name.string=n.prize_name_host[e],cc.assetManager.loadRemote(n.winner_picture[e],{ext:".jpg"},function(e,n){if(e)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);t.playerAvatar.spriteFrame=i}})},onLoad:function(){},start:function(){}}),cc._RF.pop()},{Model:"Model"}],Host_Game:[function(e,t){"use strict";cc._RF.push(t,"e226dHzdKZCGJXygWglwib/","Host_Game"),cc.Class({extends:cc.Component,properties:{Redpacket:{default:null,type:cc.Node}},start:function(){this.schedule(function(){0==Math.floor(2*Math.random())?this.Redpacket.getComponent(sp.Skeleton).setAnimation(0,"bees1",!1):this.Redpacket.getComponent(sp.Skeleton).setAnimation(0,"bees2",!1)},3.2)}}),cc._RF.pop()},{}],Host_MouseManager:[function(e,t){"use strict";cc._RF.push(t,"e23b3EXmPNLnrwxcZ/ZKoiT","Host_MouseManager");var n=e("Guest_MouseManager");cc.Class({extends:n,properties:{},onLoad:function(){this.HolesParent=cc.find("\u756b\u5e03/\u5834\u666f/\u5730\u9f20\u6d1e"),this.GameManager=cc.find("\u756b\u5e03").getComponent("Host_RandomSpawn")},start:function(){this.StartPosition=this.node.position,this.HitAniTarget=null,this.delytime=0,this.AddPoint_OriPos=this.AddPoint.position,this.MinusPoint_OriPos=this.MinusPoint.position},Hit:function(e){1==this.isLive&&(this.mouseani.stop(),this.isLive=!1,this.node.setPosition(0,-185.826,0),this.node.getComponent(cc.Sprite).spriteFrame=2==this.tag?this.bomb:this.dead,e.active=!0,this.scheduleOnce(function(){e.active=!1},.3),this.tag<2?(this.AddPoint.getComponent(cc.Label).string=0==this.tag?1:3,this.AddPoint.active=!0,this.HitAniTarget=this.AddPoint):2==this.tag&&(this.MinusPoint.active=!0,this.HitAniTarget=this.MinusPoint),this.HitAnimation(),this.scheduleOnce(function(){this.HitAniTarget.opacity=255,this.AddPoint.active=!1,this.AddPoint.position=this.AddPoint_OriPos,this.MinusPoint.active=!1,this.MinusPoint.position=this.MinusPoint_OriPos,this.ResetHole()},.5))}}),cc._RF.pop()},{Guest_MouseManager:"Guest_MouseManager"}],Host_RandomSpawn:[function(e,t){"use strict";cc._RF.push(t,"91bc3keIb9BRqI/N2ZbePz0","Host_RandomSpawn");var n=e("Guest4_Whack_a_mole");cc.Class({extends:n,properties:{},onLoad:function(){this.GetCustomize_pictures()},start:function(){this.mouseIndexArr=[],this.schedule(function(){this.MouseComeOut()},.5),cc.director.getScene()._name.includes("Host3_Game")&&this.schedule(function(){this.RandomHit()},.2)},updateMouseNodeInfo:function(e,t){e.getComponent("Host_MouseManager").isLive=!0,e.getComponent("Host_MouseManager").tag=t},RandomHit:function(){var e=Math.floor(Math.random()*this.mouseHoles.childrenCount);if(1===this.mouseIndexArr.indexOf(e)){var t=this.mouseHoles.children[e].getChildByName("\u906e\u7f69").getChildByName("\u9f20"),n=this.mouseHoles.children[e].getChildByName("\u69cc\u5b50");t.getComponent("Host_MouseManager").Hit(n)}}}),cc._RF.pop()},{Guest4_Whack_a_mole:"Guest4_Whack_a_mole"}],Jiugongge:[function(e,t){"use strict";cc._RF.push(t,"1f984c5Uq5KJIQsmVPFSs2c","Jiugongge");var n=e("Model"),i=e("Host1_Congratulations"),o=e("prizeInformation"),r=e("Guest1_PrizeInformation");cc.Class({extends:cc.Component,properties:{CannotTouch:{default:null,type:cc.Node},Prize:{default:null,type:cc.Node},items:{default:null,type:cc.Prefab},items_parent:{default:null,type:cc.Node},AlretNode:{default:null,type:cc.Node},Jiugongge_sound:{default:[],type:cc.AudioClip},Jiugongge_Ani:{default:null,type:cc.Node},Prizes_Infor:{default:null,type:cc.Node},GObuttun:{default:null,type:cc.Node},Steam:{default:null,type:cc.Node},Title:{default:null,type:cc.Node},Lightning:{default:null,type:cc.Node},prize_picture:{default:null,type:cc.Node},ChanceText:{default:null,type:cc.Label}},onLoad:function(){n.Prize_Infromation(),n.Game_js=this,this.speed=.06,this.cycle=0,this.lotterymessage=!1,this.Prize_ID=0,this.count=0,this.playing=!1,this.index=0,this.indexprize=[],this.itemlist=[],this.indexcount=0,this.prizenode=this.Prize.getChildByName("\u5f97\u734e\u61f8\u6d6e\u7a97"),this.GamePrizeInfor=cc.find("\u756b\u5e03").getComponent(r),this.ThanksJoin=[],this.alreadyLottery=!1},start:function(){"guest"==n.role?(this.ChanceText.string=n.chance,n.mode="simultaneous"):n.mode="order",this.AlertText=this.AlretNode.getChildByName("\u8b66\u544a\u6587\u5b57").getComponent(cc.Label)},SpawnPrize:function(){for(var e=0;e<n.Prizestack_id.length;e++)""==n.Prizestack_id[e]&&this.ThanksJoin.push(e),this.Prizes_Infor.children[e].getChildByName("\u734e\u54c1\u540d\u7a31").getComponent(cc.Label).string=n.Prizestack_name[e],this.Prizes_Infor.children[e].getChildByName("\u734e\u54c1\u7167\u7247\u6846").getChildByName("\u906e\u7f69").getChildByName("\u734e\u54c1\u7167\u7247").getComponent(o).setinformation(e)},startAction:function(){if(""!=n.CannotJoinGame)return this.AlertText.string="\u6c92\u6709\u734e\u54c1\u4e86\uff0c\u7121\u6cd5\u62bd\u734e\uff0c\u8acb\u4e3b\u6301\u4eba\u65b0\u589e\u734e\u54c1\u5f8c\u91cd\u65b0\u5237\u65b0\u9801\u9762",void(this.AlretNode.active=!0);if(1!=this.playing&&("order"==n.mode||"host"!=n.role)){if("guest"==n.role){if(0==n.chance)return this.AlertText.string="\u6c92\u6709\u62bd\u734e\u6a5f\u6703\u4e86\uff0c\u7121\u6cd5\u62bd\u734e",void(this.AlretNode.active=!0);if("close"==n.AllowRePrize&&n.PrizeStaffs.length>0)return this.AlertText.string="\u932f\u8aa4 :\u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u904a\u6232\u62bd\u734e",void(this.AlretNode.active=!0);n.chance--,this.ChanceText.string=n.chance}this.CannotTouch.active=!0,this.playing=!0,this.Jiugongge_Ani.getComponent(sp.Skeleton).setAnimation(0,"Rotate",!0),this.GoAni=function(){if(this.count==8*this.cycle+this.Prize_ID&&this.lotterymessage)this.unschedule(this.GoAni),this.ControlAni(),this.count=this.Prize_ID,this.index=this.Prize_ID,this.Jiugongge_Ani.getComponent(sp.Skeleton).timeScale=1,this.alreadyLottery=!1,this.scheduleOnce(function(){this.JudgePrize_type()},.5);else if(this.count>=8*this.cycle&&this.count<8*this.cycle+this.Prize_ID&&this.lotterymessage||this.count<5)this.Jiugongge_Ani.getComponent(sp.Skeleton).timeScale=3,this.ControlAni(),this.unschedule(this.GoAni),this.schedule(this.GoAni,8*this.speed);else if(this.count>=5&&this.count<=12)this.Jiugongge_Ani.getComponent(sp.Skeleton).timeScale=4,this.ControlAni(),this.unschedule(this.GoAni),this.schedule(this.GoAni,3*this.speed);else if(this.count>12&&this.count<20)this.Jiugongge_Ani.getComponent(sp.Skeleton).timeScale=10,this.ControlAni(),this.unschedule(this.GoAni),this.schedule(this.GoAni,this.speed);else if(this.count>=8*(this.cycle-2)&&this.count<8*(this.cycle-1))this.Jiugongge_Ani.getComponent(sp.Skeleton).timeScale=7,this.ControlAni(),this.unschedule(this.GoAni),this.schedule(this.GoAni,2*this.speed);else if(this.count>=8*(this.cycle-1)&&this.count<8*this.cycle)this.Jiugongge_Ani.getComponent(sp.Skeleton).timeScale=5,this.ControlAni(),this.unschedule(this.GoAni),this.schedule(this.GoAni,5*this.speed);else{if(this.Jiugongge_Ani.getComponent(sp.Skeleton).timeScale=15,this.ControlAni(),1==this.alreadyLottery)return;this.alreadyLottery=!0,this.scheduleOnce(function(){n.Lottery_Guest()},3)}},this.schedule(this.GoAni,this.speed)}},lettorey:function(){if(""!=n.CannotJoinGame)return this.unschedule(this.GoAni),this.Jiugongge_Ani.getComponent(sp.Skeleton).timeScale=1,this.Jiugongge_Ani.getComponent(sp.Skeleton).setAnimation(0,"Broken",!1),this.Title.getComponent(sp.Skeleton).setAnimation(0,"Broken",!1),cc.director.getScene()._name.includes("Host")?(this.Lightning.getComponent(sp.Skeleton).setAnimation(0,"PC",!0),this.Steam.getComponent(sp.Skeleton).setAnimation(0,"Broken_PC",!0),this.currentsound=cc.audioEngine.play(this.Jiugongge_sound[7],!1,.7)):(this.Lightning.getComponent(sp.Skeleton).setAnimation(0,"Phone",!0),this.Steam.getComponent(sp.Skeleton).setAnimation(0,"Broken_M",!0)),void this.scheduleOnce(function(){this.AlertText.string="\u6c92\u6709\u734e\u54c1\u4e86\uff0c\u7121\u6cd5\u62bd\u734e\uff0c\u8acb\u4e3b\u6301\u4eba\u65b0\u589e\u734e\u54c1\u5f8c\u91cd\u65b0\u5237\u65b0\u9801\u9762",this.AlretNode.active=!0},1.2);this.cycle=Math.ceil(this.count/8)+4;for(var e=0;e<n.Prizestack_id.length;e++)if(""!=n.prize_ID&&n.Prizestack_id[e]==n.prize_ID)this.Prize_ID=e;else if(""==n.prize_ID){var t=Math.floor(Math.random()*this.ThanksJoin.length);this.Prize_ID=this.ThanksJoin[t]}this.lotterymessage=!0},JudgePrize_type:function(){"first"==n.prize_type?(this.Title.getComponent(sp.Skeleton).setAnimation(0,"A1",!1),cc.director.getScene()._name.includes("Host")?(this.Jiugongge_Ani.getComponent(sp.Skeleton).setAnimation(0,"1_PC",!1),this.currentsound=cc.audioEngine.play(this.Jiugongge_sound[1],!1,.5)):this.Jiugongge_Ani.getComponent(sp.Skeleton).setAnimation(0,"1_Phone",!1),this.GObuttun.getComponent(sp.Skeleton).setAnimation(0,"Roll_Open",!1)):"second"==n.prize_type?(this.Jiugongge_Ani.getComponent(sp.Skeleton).setAnimation(0,"A2",!1),this.GObuttun.getComponent(sp.Skeleton).setAnimation(0,"Open",!1),"host"==n.role&&(this.currentsound=cc.audioEngine.play(this.Jiugongge_sound[2],!1,1))):"third"==n.prize_type?(this.Jiugongge_Ani.getComponent(sp.Skeleton).setAnimation(0,"A3",!1),this.GObuttun.getComponent(sp.Skeleton).setAnimation(0,"Open",!1),"host"==n.role&&(this.currentsound=cc.audioEngine.play(this.Jiugongge_sound[3],!1,1))):"special"==n.prize_type?(this.Jiugongge_Ani.getComponent(sp.Skeleton).setAnimation(0,"A4",!1),this.GObuttun.getComponent(sp.Skeleton).setAnimation(0,"Open",!1),"host"==n.role&&(this.currentsound=cc.audioEngine.play(this.Jiugongge_sound[4],!1,1))):"thanks"==n.prize_type&&(this.Jiugongge_Ani.getComponent(sp.Skeleton).setAnimation(0,"A5",!1),this.GObuttun.getComponent(sp.Skeleton).setAnimation(0,"Open",!1),"host"==n.role&&(this.currentsound=cc.audioEngine.play(this.Jiugongge_sound[5],!1,1))),"guest"==n.role&&"thanks"!=n.prize_type&&this.GamePrizeInfor.SpawnPrize(),this.scheduleOnce(function(){this.ShowPrize()},2)},ShowPrize:function(){var e=this;cc.assetManager.loadRemote(n.prize_picture,{ext:".jpg"},function(t,n){if(t)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);e.prize_picture.getComponent(cc.Sprite).spriteFrame=i}}),this.Prize.getChildByName("\u5f97\u734e\u61f8\u6d6e\u7a97").getChildByName("\u734e\u9805").getComponent(cc.Label).string=n.prize_name_guest,this.Prize.getChildByName("\u5f97\u734e\u61f8\u6d6e\u7a97").getChildByName("\u54ed\u81c9").active="thanks"==n.prize_type,this.Prize.getChildByName("\u5f97\u734e\u61f8\u6d6e\u7a97").getChildByName("\u5f97\u734e_\u4e2d\u592e\u5716\u6a19").active="thanks"!=n.prize_type,this.Prize.active=!0,this.PrizeAni(),this.lotterymessage=!1,this.playing=!1,this.cycle=0,this.CannotTouch.active=!1,"host"==n.role&&"thanks"!=n.prize_type&&(this.currentsound=cc.audioEngine.play(this.Jiugongge_sound[6],!1,1)),"order"==n.mode&&"guest"!=n.role&&"thanks"!=n.prize_type&&this.Congratulations()},PrizeAni:function(){this.lotterymessage=!1,this.playing=!1,cc.tween(this.prizenode).to(1,{scale:1},{easing:"elasticOut"}).start()},Congratulations:function(){this.indexcount++,this.indexprize.push(this.indexcount);var e=cc.instantiate(this.items);e.parent=this.items_parent,e.setSiblingIndex(0);var t=e.getComponent(i);this.itemlist.push(t),this.itemlist[this.indexcount-1].updateInfo(this.indexcount-1)},closeFuc:function(e,t){"prize"==t?(this.Prize.active=!1,this.ClearJiugonggeEffect()):"alret"==t&&""==n.CannotJoinGame&&(this.AlretNode.active=!1),this.prizenode.scale=0},ClearJiugonggeEffect:function(){this.Jiugongge_Ani.getComponent(sp.Skeleton).setAnimation(0,"usual",!0),this.GObuttun.getComponent(sp.Skeleton).setAnimation(0,"Usual",!1),this.Lightning.getComponent(sp.Skeleton).setAnimation(0,"usual",!0),"guest"==n.role?this.Title.getComponent(sp.Skeleton).setAnimation(0,"usual_Phone",!0):this.Title.getComponent(sp.Skeleton).setAnimation(0,"usual_PC",!0)},ControlAni:function(){"host"==n.role&&"order"==n.mode&&(this.currentsound=cc.audioEngine.play(this.Jiugongge_sound[0],!1,.2)),this.Prizes_Infor.children[(this.index+8-1)%8].getChildByName("\u6c92\u9078\u4e0a\u906e\u7f69").active=!0,this.index=this.index%8,this.Prizes_Infor.children[this.index].getChildByName("\u6c92\u9078\u4e0a\u906e\u7f69").active=!1,this.index++,this.count++},TogetherAni:function(){this.GoTogetherAni=function(){this.Jiugongge_Ani.getComponent(sp.Skeleton).timeScale=1,this.ControlAni()},this.schedule(this.GoTogetherAni,8*this.speed)},ClearStatus:function(){this.count=0,this.index=0,this.unscheduleAllCallbacks();for(var e=0;e<8;e++)this.Prizes_Infor.children[e].getChildByName("\u6c92\u9078\u4e0a\u906e\u7f69").active=!0},update:function(){"close"==n.GameStatusMessage&&"guest"==n.role&&(this.AlertText.string="\u8acb\u7b49\u5f85\u4e3b\u8fa6\u65b9\u958b\u555f\u540c\u6642\u53c3\u8207\u6a21\u5f0f\u624d\u80fd\u9032\u884c\u904a\u6232",this.AlretNode.active=!0)}}),cc._RF.pop()},{Guest1_PrizeInformation:"Guest1_PrizeInformation",Host1_Congratulations:"Host1_Congratulations",Model:"Model",prizeInformation:"prizeInformation"}],LightControl:[function(e,t){"use strict";cc._RF.push(t,"4d0ccv4GLtKRblss4janxEs","LightControl"),e("Model"),cc.Class({extends:cc.Component,properties:{NormalLight:{default:null,type:cc.Node},StartLight:{default:null,type:cc.Node}},onLoad:function(){},start:function(){this.starting=!1,this.schedule(this.CheckCountinuePress,3)},Button:function(){this.starting=!0,this.NormalLight.active=!1,this.StartLight.scale=0,this.StartLight.active=!0,this.scheduleOnce(function(){10==this.StartLight.scale&&(this.starting=!1)},5)},CheckCountinuePress:function(){0==this.starting&&(this.NormalLight.active=!0)}}),cc._RF.pop()},{Model:"Model"}],Model:[function(e,t){"use strict";function n(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var i=t[n].split("=");if(i[0]==e)return i[1]}return""}cc._RF.push(t,"e7bd7G7ruVO1L6VM6c+ndqb","Model"),t.exports={TopTitle:null,Prize_BackGround:null,WhitchPrize_index:0,XMLTimeLimit:!1,gametimelimit:5,gametimeCountDown:0,round:1,Domain:null,GameStatusMessage:"close",result:"thanks",prize_total:0,role:null,Game_Information:function(){var e="https://"+i.local_ID+"/v1/interact/game/"+i.GameName+"?game_id="+i.game_id,t=new XMLHttpRequest;t.open("GET",e,!0),t.onreadystatechange=function(){if(4==t.readyState&&t.status>=200&&t.status<=207){t.responseText;var e=JSON.parse(t.responseText);if(i.Session=e.data.title,"QA"==i.GameName){for(var n=0;n<e.data.questions.length;n++)i.Question[n]=e.data.questions[n].question,i.Options[n]=e.data.questions[n].options,i.Answer[n]=e.data.questions[n].answer,i.QuestionScore[n]=e.data.questions[n].score;i.QuestionCount=e.data.qa_round,i.QuestionSecond=e.data.qa_second}i.AllowRePrize=e.data.allow,i.game_type=e.data.game_type,i.BackGround_Theme=e.data.topic,i.customize_pictures=e.data.customize_pictures,"open"==e.data.limit_time?(i.XMLTimeLimit=!0,i.gametimelimit=e.data.second):i.XMLTimeLimit=!1}},t.send()},RoleComfirm:function(){var e="https://"+i.local_ID+"/v1/user?activity_id="+i.activity_id+"&game_id="+i.game_id+"&game="+i.GameName+"&session_id="+i.session_id+"&login="+i.login,t=new XMLHttpRequest;t.open("GET",e,!0),t.onreadystatechange=function(){if(4==t.readyState&&t.status>=200&&t.status<=207){var e=JSON.parse(t.responseText);i.role=e.data.User.role,i.User_id=e.data.User.user_id,i.User_Name=e.data.User.name,i.User_Picture=e.data.User.avatar,i.round=e.data.Game.game_round,i.prize_total=e.data.Game.prize_amount,i.chance=e.data.Times,i.PrizeStaffs=e.data.PrizeStaffs;for(var n=0;n<e.data.PrizeStaffs.length;n++)i.prize_ID[n]=e.data.PrizeStaffs[n].id,i.prize_name_guest[n]=e.data.PrizeStaffs[n].prize_name,i.prize_method[n]=e.data.PrizeStaffs[n].prize_method,i.Win_Time[n]=e.data.PrizeStaffs[n].win_time,i.getprize_round[n]=e.data.PrizeStaffs[n].round,i.prize_picture[n]=e.data.PrizeStaffs[n].prize_picture,i.exchangePrize[n]=e.data.PrizeStaffs[n].status;i.Score=e.data.Game.game_score,i.SecondScore=e.data.Game.game_score_2,i.Rank=e.data.Game.game_rank,"QA"==i.GameName&&(i.QuestionCount=e.data.Game.qa_round),i.CheckRole=!0}else 4==t.readyState&&t.status>=400&&(e=JSON.parse(t.responseText),i.CheckRole=!0,i.CannotJoinGame=e.message)},t.send()},Lottery_Guest:function(){var e="https://"+i.local_ID+"/v1/game/lucky?activity_id="+i.activity_id+"&game_id="+i.game_id+"&game="+i.GameName+"&session_id="+i.session_id+"&mode="+i.mode,t=new XMLHttpRequest;t.open("GET",e,!0),t.onreadystatechange=function(){if(4==t.readyState&&t.status>=200&&t.status<=207){var e=JSON.parse(t.responseText);if(i.result=e.data.PrizeStaff.prize_method,"lottery"==i.GameName)i.prize_ID=e.data.PrizeStaff.prize_id,i.prize_name_guest=e.data.PrizeStaff.prize_name,i.prize_picture=e.data.PrizeStaff.prize_picture,i.prize_type=e.data.PrizeStaff.prize_type,i.PrizeStaffs=e.data.PrizeStaffs,i.Game_js.lettorey();else for(var n=0;n<e.data.PrizeStaffs.length;n++)i.prize_ID[n]=e.data.PrizeStaffs[n].id,i.prize_name_guest[n]=e.data.PrizeStaffs[n].prize_name,i.prize_method[n]=e.data.PrizeStaffs[n].prize_method,i.Win_Time[n]=e.data.PrizeStaffs[n].win_time,i.getprize_round[n]=e.data.PrizeStaffs[n].round,i.prize_picture[n]=e.data.PrizeStaffs[n].prize_picture,i.exchangePrize[n]=e.data.PrizeStaffs[n].status}else 4==t.readyState&&t.status>=400&&(e=JSON.parse(t.responseText),i.CannotJoinGame=e.message,"lottery"==i.GameName&&i.Game_js.lettorey())},t.send()},winner_name:[],winner_picture:[],winner_id:[],winner_score:[],HostStart_js:null,WinnerData:null,WebSocket_NumberOfPeople_Guest:function(t,n){0==n?(i.NumberOfPeople_Guest=new WebSocket("wss://"+i.local_ID+"/ws/v1/game/staff?activity_id="+i.activity_id+"&game_id="+i.game_id+"&game="+i.GameName),i.NumberOfPeople_Guest.onopen=function(){},i.NumberOfPeople_Guest.onerror=function(){},i.NumberOfPeople_Guest.onclose=function(){"\u932f\u8aa4: \u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u4e0b\u4e00\u8f2a\u904a\u6232"!=i.CannotJoinGame&&i.WebSocket_NumberOfPeople_Guest(1e3,!1)}):setTimeout(function(){i.NumberOfPeople_Guest.readyState===WebSocket.OPEN?i.NumberOfPeople_Guest.send(JSON.stringify({User:{user_id:i.User_id,name:i.User_Name,avatar:i.User_Picture},Game:{game_round:"start"==i.GameStatusMessage||"gaming"==i.GameStatusMessage?i.round-1:i.round}})):"\u932f\u8aa4: \u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u4e0b\u4e00\u8f2a\u904a\u6232"!=i.CannotJoinGame?i.Guest1_Join_JS.ConnetFail():i.Guest1_Join_JS.ConnetSuccess()},t),i.NumberOfPeople_Guest.onmessage=function(t){var n=e("Model"),i=JSON.parse(t.data);n.CannotJoinGame=i.error,n.AlreadyPlayed=i.PrizeStaff.id,n.Score=i.Game.game_score,n.Rank=i.Game.game_rank,n.SecondScore=i.Game.game_score_2,n.CorrectAnswerCount=i.Game.game_correct,n.QuestionCount=i.Game.qa_round;for(var o=0;o<i.PrizeStaffs.length;o++)n.prize_ID[o]=i.PrizeStaffs[o].id,n.prize_name_guest[o]=i.PrizeStaffs[o].prize_name,n.prize_method[o]=i.PrizeStaffs[o].prize_method,n.Win_Time[o]=i.PrizeStaffs[o].win_time,n.getprize_round[o]=i.PrizeStaffs[o].round,n.prize_picture[o]=i.PrizeStaffs[o].prize_picture,n.exchangePrize[o]=i.PrizeStaffs[o].status;n.Guest1_Join_JS.ConnetSuccess()}},WebSocket_NumberOfPeople_Host:function(){var t=new WebSocket("wss://"+i.local_ID+"/ws/v1/game/people?activity_id="+i.activity_id+"&game_id="+i.game_id+"&game="+i.GameName);t.onopen=function(){},t.onmessage=function(t){var n=e("Model"),i=JSON.parse(t.data);n.people=i.Game.game_attend,n.round=i.Game.game_round},t.onerror=function(){},t.onclose=function(){i.WebSocket_NumberOfPeople_Host()}},WebSocket_GameStatus_Guest:function(){var t=new WebSocket("wss://"+i.local_ID+"/ws/v1/game/status/guest?activity_id="+i.activity_id+"&game_id="+i.game_id+"&game="+i.GameName);t.onopen=function(){},t.onmessage=function(t){var n=e("Model"),i=JSON.parse(t.data);n.GameStatusMessage=i.Game.game_status,n.round=i.Game.game_round,n.gametimeCountDown=i.Game.game_second},t.onerror=function(){},t.onclose=function(){i.WebSocket_GameStatus_Guest()}},WebSocket_GameStatus_Host:function(t,n){i.GameStatusWS_Host.onopen=function(){},i.GameStatusWS_Host.onmessage=function(t){var n=e("Model"),i=JSON.parse(t.data);n.GameStatusMessage=i.Game.game_status,n.connet_ws=!0,"start"==n.GameStatusMessage&&n.HostStart_js.WS_OnMessage()},i.GameStatusWS_Host.onerror=function(){},i.GameStatusWS_Host.onclose=function(){i.connet_ws=!1,i.GameStatusWS_Host=new WebSocket("wss://"+i.local_ID+"/ws/v1/game/status/host?activity_id="+i.activity_id+"&game_id="+i.game_id+"&game="+i.GameName),i.WebSocket_GameStatus_Host(t,1e3)},setTimeout(function(){i.GameStatusWS_Host.readyState===WebSocket.OPEN?"gaming"==t&&1==i.XMLTimeLimit?i.GameStatusWS_Host.send(JSON.stringify({Game:{game_status:t,game_round:i.round,game_second:i.gametimeCountDown}})):i.GameStatusWS_Host.send(JSON.stringify({Game:{game_status:t}})):(i.connet_ws=!1,"start"==i.GameStatusMessage&&i.HostStart_js.WS_OnMessage())},n)},WebSocket_UpDateScore_Guest:function(){var t=new WebSocket("wss://"+i.local_ID+"/ws/v1/game/score?activity_id="+i.activity_id+"&game_id="+i.game_id+"&game="+i.GameName);t.onopen=function(){},t.onmessage=function(t){var n=e("Model"),i=JSON.parse(t.data);n.Rank=i.Game.game_rank},t.onerror=function(){},t.onclose=function(){"gaming"==i.GameStatusMessage||"question"==i.GameStatusMessage||"result"==i.GameStatusMessage?i.WebSocket_UpDateScore_Guest():clearInterval(n)};var n=setInterval(function(){console.log("\u50b3\u8a0a\u606f"),t.readyState===WebSocket.OPEN&&t.send(JSON.stringify({Game:{game_status:i.GameStatusMessage,game_round:i.round-1,game_score:i.Score,game_score_2:i.SecondScore/i.CorrectAnswerCount,game_correct:i.CorrectAnswerCount},User:{user_id:i.User_id}}))},500)},WebSocket_NumberOfLottery_Host:function(){i.NumberOfLotteryWS_Host.onopen=function(){},i.NumberOfLotteryWS_Host.onmessage=function(t){var n=e("Model"),i=JSON.parse(t.data);n.prize_total=i.Game.prize_amount;for(var o=0;o<i.PrizeStaffs.length;o++)0==n.winner_id.includes(i.PrizeStaffs[o].id)&&(n.winner_id[o]=i.PrizeStaffs[o].id,n.winner_name[o]=i.PrizeStaffs[o].name,n.winner_picture[o]=i.PrizeStaffs[o].avatar,n.prize_name_host[o]=i.PrizeStaffs[o].prize_name,n.WinnerData.SpawnNewWinner());"end"!=n.GameStatusMessage&&n.winner_name.length>0&&1==n.SpawnNewestWinner?n.WinnerData.NewestWinner():"end"==n.GameStatusMessage&&n.NumberOfLotteryWS_Host.close()},i.NumberOfLotteryWS_Host.onerror=function(){},i.NumberOfLotteryWS_Host.onclose=function(){"start"==i.GameStatusMessage&&(i.NumberOfLotteryWS_Host=new WebSocket("wss://"+i.local_ID+"/ws/v1/game/winning/staff?activity_id="+i.activity_id+"&game_id="+i.game_id+"&game="+i.GameName),i.WebSocket_NumberOfLottery_Host())}},WebSocket_NumberOfLottery_Score_Host:function(){i.NumberOfLotteryWS_Host.onopen=function(){},i.NumberOfLotteryWS_Host.onmessage=function(t){var n=e("Model"),i=JSON.parse(t.data);n.prize_total=i.Game.prize_amount,n.winner_id=[],n.winner_score=[];for(var o=0;o<i.PrizeStaffs.length;o++)n.winner_id[o]=i.PrizeStaffs[o].user_id,n.winner_name[o]=i.PrizeStaffs[o].name,n.winner_picture[o]=i.PrizeStaffs[o].avatar,n.prize_name_host[o]=i.PrizeStaffs[o].prize_name,n.winner_score[o]=i.PrizeStaffs[o].score;n.PrizeStaffs=i.PrizeStaffs,"gaming"==n.GameStatusMessage&&"QA"!=n.GameName&&n.WinnerData.SpawnNewWinner(),n.LastMessage=i.message,"calculate"==n.GameStatusMessage&&1==n.LastMessage&&(n.WinnerData.NextSence(),n.NumberOfLotteryWS_Host.close())},i.NumberOfLotteryWS_Host.onerror=function(){},i.NumberOfLotteryWS_Host.onclose=function(){"gaming"!=i.GameStatusMessage&&"question"!=i.GameStatusMessage&&"result"!=i.GameStatusMessage||(i.NumberOfLotteryWS_Host=new WebSocket("wss://"+i.local_ID+"/ws/v1/game/winning/staff?activity_id="+i.activity_id+"&game_id="+i.game_id+"&game="+i.GameName),i.WebSocket_NumberOfLottery_Score_Host())}},AlreadyPlayed:0,people:0,activity_id:null,game_id:null,liffstate:null,login:null,User_id:null,User_Name:null,User_Picture:null,prize_ID:[],Win_Time:[],prize_name_guest:[],prize_name_host:[],prize_method:[],prize_picture:[],getprize_round:[],exchangePrize:[],GameStatusWS_Host:null,NumberOfLotteryWS_Host:null,NumberOfPeople_Guest:null,Session:null,CannotJoinGame:"",AllowRePrize:"",CheckRole:!1,connet_ws:!1,Guest1_Join_JS:"",GameName:"",SpawnNewestWinner:!1,session_id:"",CurrentRound:0,HostWindow:"open",Score:0,SecondScore:0,Skin:"",Local_ID:"",BackGround_Theme:"",LastMessage:!1,customize_pictures:[],AnswerResult:[],Question:[],QuestionCount:0,QuestionScore:[],Options:[],QuestionPicture:[],Answer:[],QA_Host:null,Rank:0,Choose:null,QA_Guest:null,QuestionSecond:0,CorrectAnswerCount:0,AnswerPeople:0,WebSocket_QA_Guest:function(e,t){i.QA_Guest.onopen=function(){},i.QA_Guest.onmessage=function(){},i.QA_Guest.onerror=function(){},i.QA_Guest.onclose=function(){"gaming"!=i.GameStatusMessage&&"question"!=i.GameStatusMessage&&"result"!=i.GameStatusMessage||(i.QA_Guest=new WebSocket("wss://"+i.local_ID+"/ws/v1/game/guest/QA?activity_id="+i.activity_id+"&game_id="+i.game_id+"&game="+i.GameName),i.WebSocket_QA_Guest(e,1e3))},setTimeout(function(){i.QA_Guest.readyState===WebSocket.OPEN&&1==e&&i.QA_Guest.send(JSON.stringify({answer:i.Choose}))},t)},WebSocket_QA_Host:function(){i.QA_Host.onopen=function(){},i.QA_Host.onmessage=function(t){var n=e("Model"),i=JSON.parse(t.data);n.AnswerResult[0]=i.A,n.AnswerResult[1]=i.B,n.AnswerResult[2]=i.C,n.AnswerResult[3]=i.D,n.AnswerPeople=i.Total,"calculate"==n.GameStatusMessage?n.QA_Host.close():"result"==n.GameStatusMessage&&n.WinnerData.PrintResultBar()},i.QA_Host.onerror=function(){},i.QA_Host.onclose=function(){"gaming"!=i.GameStatusMessage&&"result"!=i.GameStatusMessage&&"question"!=i.GameStatusMessage||(i.QA_Host=new WebSocket("wss://"+i.local_ID+"/ws/v1/game/host/QA?activity_id="+i.activity_id+"&game_id="+i.game_id+"&game="+i.GameName),i.WebSocket_QA_Host())}},mode:"",chance:0,Prize_Infromation:function(){var e="https://"+i.local_ID+"/v1/interact/game/"+i.GameName+"/prize?game_id="+i.game_id,t=new XMLHttpRequest;t.open("GET",e,!0),t.onreadystatechange=function(){if(4==t.readyState&&t.status>=200&&t.status<=207){for(var e=JSON.parse(t.responseText),n=0;n<e.data.length;n++)i.Prizestack_id[n]=e.data[n].prize_id,i.Prizestack_name[n]=e.data[n].prize_name,i.Prizestack_picture[n]=e.data[n].prize_picture;i.Game_js.SpawnPrize()}else 4==t.readyState&&t.status>=400&&(e=JSON.parse(t.responseText),i.CannotJoinGame=e.message)},t.send()},prize_type:"",Prizestack_id:[],Prizestack_name:[],Prizestack_picture:[],Game_js:"",game_type:"",PrizeStaffs:"",JudgeArea:"\u7121",TouchMoney:!1};var i=e("Model");i.activity_id=n("activity_id"),i.game_id=n("game_id"),i.login=n("login"),i.liffstate=n("liff.state"),i.session_id=function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var n=e[t];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf("chatroom_session="))return n.substring("chatroom_session=".length,n.length)}return null}(),function(){if(""!=i.activity_id&&""!=i.game_id||i.liffstate.length>13&&(i.liffstate=i.liffstate.substr(17,i.liffstate.length)),i.liffstate.includes("%26game_id%3D")){var e=i.liffstate.split("%26game_id%3D");i.activity_id=e[0],2==e.length&&(e=e[1].split("#mst_challenge"),i.game_id=e[0])}}(),cc._RF.pop()},{Model:"Model"}],Money:[function(e,t){"use strict";cc._RF.push(t,"7a396gHpIlDf7bKuYEn+4Nz","Money");var n=e("Model");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.count=0,this.node.on("touchstart",this.touchmoney,this),this.node.on("touchend",this.endtouchmoney,this)},onCollisionEnter:function(e){this.count++,"\u4e0a\u6ed1\u5340\u57df"==e.node.group&&1==this.count?n.JudgeArea="\u4e0a\u6ed1\u5340\u57df":"\u4e0b\u6ed1\u5340\u57df"==e.node.group&&1==this.count&&(n.JudgeArea="\u4e0b\u6ed1\u5340\u57df")},onCollisionExit:function(){this.count--,n.JudgeArea="\u7121"},touchmoney:function(){n.TouchMoney=!0},endtouchmoney:function(){n.TouchMoney=!1}}),cc._RF.pop()},{Model:"Model"}],NewScript:[function(e,t){"use strict";cc._RF.push(t,"6d0efRnsChM6Jd1eAmnyvDU","NewScript");var n=e("Model");e("Host3_WinRecordItem_Score"),cc.Class({extends:cc.Component,properties:{items_parent:{default:null,type:cc.Node},Winners:{default:[],type:cc.Node},items:{default:null,type:cc.Prefab},pp:{default:null,type:cc.SpriteFrame},ll:{default:null,type:cc.Label}},onLoad:function(){this.pos=this.items_parent.position,n.TopTitle="\u7121",cc.director.getCollisionManager().enabled=!0,this.randomNodeIndex=1,n.score=0,this.ani=0,this.WinnerArrey=[],this.distroyob=[],this.objectpos=[],this.object=[],n.winner_name=["tony","moly","hank","belly","fool","jeff","lazy","kelly","danny"]},start:function(){this.pos=this.items_parent.position,this.base=this.items_parent.children[8]},move:function(){this.nullcount=1,this.count=8;for(var e=0;e<n.winner_name.length;e++){e<8&&(this.objectpos[e]=this.items_parent.children[e].position);var t=!1;if(null==this.WinnerArrey[e]&&null!=n.winner_name[e]&&0==this.WinnerArrey.includes(n.winner_name[e])&&0==t&&e<8)t=!0,this.Winners[e].getChildByName("\u73a9\u5bb6\u540d\u7a31").getComponent(cc.Label).string=n.winner_name[e],this.WinnerArrey.push(n.winner_name[e]),cc.tween(this.Winners[e]).to(.5,{opacity:255}).start();else if(this.WinnerArrey[e]!=n.winner_name[e]&&1==this.WinnerArrey.includes(n.winner_name[e])&&0==t){t=!0;var i=n.winner_name.indexOf(n.winner_name[e]),o=this.WinnerArrey.indexOf(n.winner_name[e]);if(console.log(n.winner_name[e]+i),i>=8){var r=this.items_parent.children[o],s=this.items_parent.children[8].position;this.WinnerArrey.splice(o,1),cc.tween(this.items_parent.children[o]).to(.5,{position:s}).call(function(){r.destroy()}).start()}else r=this.items_parent.children[o],s=this.items_parent.children[i].position,cc.tween(this.items_parent.children[o]).to(.5,{position:s}).start()}else null!=this.WinnerArrey[e]&&null!=n.winner_name[e]&&0==this.WinnerArrey.includes(n.winner_name[e])&&0==t&&e<8&&(t=!0,this.WinnerArrey.length<8?(this.items_parent.children[this.WinnerArrey.length].getChildByName("\u73a9\u5bb6\u540d\u7a31").getComponent(cc.Label).string=n.winner_name[e],r=this.items_parent.children[this.WinnerArrey.length],this.WinnerArrey.push(n.winner_name[e]),this.index=e,cc.tween(r).to(.5,{position:this.objectpos[e],opacity:255}).start(),this.nullcount++):((r=cc.instantiate(this.items)).parent=this.items_parent,r.getChildByName("\u73a9\u5bb6\u540d\u7a31").getComponent(cc.Label).string=n.winner_name[e],this.WinnerArrey.push(n.winner_name[e]),r.setPosition(this.base.position),r.setScale(.8),this.base.setSiblingIndex(this.items_parent.children.length-1),cc.tween(r).to(.5,{position:this.objectpos[e],opacity:255}).start()))}this.scheduleOnce(function(){if(this.WinnerArrey!=n.winner_name){for(var e=0;e<8;e++)this.object[e]=this.items_parent.children[e];for(e=0;e<this.WinnerArrey.length;e++){var t=n.winner_name.indexOf(this.WinnerArrey[e]);this.object[e].setSiblingIndex(t),console.log(this.object[e])}console.log(this.WinnerArrey.length),this.WinnerArrey=n.winner_name,this.ani++}},.5)},dis:function(){this.ww(0)},ww:function(e){this.scheduleOnce(function(){this.ll.string=e+1},.8)}}),cc._RF.pop()},{Host3_WinRecordItem_Score:"Host3_WinRecordItem_Score",Model:"Model"}],RoleConfirm:[function(e,t){"use strict";cc._RF.push(t,"4b008WMP59FvIX0HbAAwdXl","RoleConfirm");var n=e("Model");cc.Class({extends:cc.Component,properties:{WrongAlert:{default:null,type:cc.Node},AlertText:{default:null,type:cc.Label}},onLoad:function(){n.GameName=cc.director.getScene()._name.substr(12,cc.director.getScene()._name.length),n.local_ID="hilives.net"==window.location.host||"www.hilives.net"==window.location.host?"api.hilives.net":"apidev.hilives.net",n.Domain="https://"+window.location.host,this.CheckRole=!1,n.GameStatusMessage="open",n.Game_Information()},start:function(){n.RoleComfirm()},JudgeError:function(){1==n.CheckRole&&""==n.CannotJoinGame?this.JudgeRole():1==n.CheckRole&&""!=n.CannotJoinGame&&(this.AlertText.string=n.CannotJoinGame,this.WrongAlert.active=!0,n.CheckRole=!1)},JudgeRole:function(){n.CheckRole=!1,"guest"==n.role&&0==this.CheckRole?(this.CheckRole=!0,n.WebSocket_NumberOfPeople_Guest(1e3,!1),n.WebSocket_GameStatus_Guest(),"turntable"==n.game_type?cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Guest1_Weel",function(e,t){cc.director.runScene(t)}):"jiugongge"==n.game_type?cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Guest1_Jiugongge",function(e,t){cc.director.runScene(t)}):cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Guest1_JoinGame",function(e,t){cc.director.runScene(t)})):"host"==n.role&&0==this.CheckRole&&(this.CheckRole=!0,n.GameStatusWS_Host=new WebSocket("wss://"+n.local_ID+"/ws/v1/game/status/host?activity_id="+n.activity_id+"&game_id="+n.game_id+"&game="+n.GameName),this.scheduleOnce(function(){n.WebSocket_NumberOfPeople_Host(),"turntable"==n.game_type?(n.WebSocket_GameStatus_Host("close",.1),n.NumberOfLotteryWS_Host=new WebSocket("wss://"+n.local_ID+"/ws/v1/game/winning/staff?activity_id="+n.activity_id+"&game_id="+n.game_id+"&game="+n.GameName),cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Host1_Weel",function(e,t){cc.director.runScene(t)})):"jiugongge"==n.game_type?(n.WebSocket_GameStatus_Host("close",.1),n.NumberOfLotteryWS_Host=new WebSocket("wss://"+n.local_ID+"/ws/v1/game/winning/staff?activity_id="+n.activity_id+"&game_id="+n.game_id+"&game="+n.GameName),cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Host1_Jiugongge",function(e,t){cc.director.runScene(t)})):"QA"==n.GameName?(n.WebSocket_GameStatus_Host("open",.1),n.QA_Host=new WebSocket("wss://"+n.local_ID+"/ws/v1/game/host/QA?activity_id="+n.activity_id+"&game_id="+n.game_id+"&game="+n.GameName),cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Host1_Start",function(e,t){cc.director.runScene(t)})):(n.WebSocket_GameStatus_Host("open",.1),cc.resources.loadScene(n.GameName+"/"+n.BackGround_Theme+"/Host1_Start",function(e,t){cc.director.runScene(t)}))},1))},update:function(){this.JudgeError()}}),cc._RF.pop()},{Model:"Model"}],SaveMoney:[function(e,t){"use strict";cc._RF.push(t,"4b842H/NzhDZIuF4cTyqKrv","SaveMoney");var n=e("Model");cc.Class({extends:cc.Component,properties:{Money:{default:null,type:cc.Node},MoneyArea:{default:null,type:cc.Node},MoneyStack:{default:null,type:cc.Node},MoneyAni:{default:null,type:cc.Node},RedpackTop:{default:null,type:cc.Node},Recycle:{default:[],type:cc.Node},Fake:{default:null,type:cc.SpriteFrame},Real:{default:null,type:cc.SpriteFrame},Score:{default:null,type:cc.Label},items:{default:null,type:cc.Prefab},note:{default:null,type:cc.Node},point:{default:null,type:cc.Node}},onLoad:function(){n.TouchMoney=!1,this.pos=this.Money.position,cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!0,cc.director.getCollisionManager().enabledDrawBoundingBox=!0,this.randomNodeIndex=1,this.rateTotal=0,this.ratePass=0,this.items_parent=cc.find("\u756b\u5e03/\u5834\u666f/\u9214\u7968\u7522\u751f\u5340"),this.Score.string=n.Score,n.WebSocket_UpDateScore_Guest()},start:function(){cc.director.getCollisionManager().enabledDebugDraw=!0,this.Money.getComponent(cc.BlockInputEvents).onEnable(),this.node.on("touchmove",this.move,this),this.node.on("touchend",this.end,this),this.node.on("touchcancel",this.end,this),this.scheduleOnce(function(){this.RedpackTop.active=!0,this.MoneyAni.active=!1,this.BeginAni()},.65),this.pos=this.Money.position},move:function(e){if(0!=n.TouchMoney){var t=new cc.Vec2(e.getLocationX(),e.getLocationY());(t=this.node.convertToNodeSpaceAR(t)).x=this.pos.x,this.Money.position=t}},end:function(){n.TouchMoney=!1,this.rateTotal++,"\u4e0a\u6ed1\u5340\u57df"==n.JudgeArea?(this.Money.getComponent(cc.BlockInputEvents).onEnable(),n.Score=this.randomNodeIndex>0?n.Score+100:n.Score-500,this.randomNodeIndex>0?(cc.tween(this.point).to(.2,{scale:3}).to(.2,{scale:2}).start(),this.ratePass++):cc.tween(this.point).to(.2,{scale:1}).to(.2,{scale:2}).start(),this.Score.string=n.Score,this.UPani(this.Money),this.reset()):"\u4e0b\u6ed1\u5340\u57df"==n.JudgeArea?(this.Money.getComponent(cc.BlockInputEvents).onEnable(),this.RecycleAni(),n.Score=0==this.randomNodeIndex?n.Score+100:n.Score-500,0==this.randomNodeIndex?(cc.tween(this.point).to(.2,{scale:3}).to(.2,{scale:2}).start(),this.ratePass++):cc.tween(this.point).to(.2,{scale:1}).to(.2,{scale:2}).start(),this.Downani(this.Money),this.reset()):"\u7121"==n.JudgeArea&&(this.Money.position=this.pos),n.Score<0&&(n.Score=0),this.Score.string=n.Score,n.SecondScore=this.ratePass/this.rateTotal},reset:function(){n.JudgeArea="\u7121",this.randomNodeIndex=Math.floor(3*Math.random());var e=cc.instantiate(this.items);e.getComponent(cc.Sprite).spriteFrame=0==this.randomNodeIndex?this.Fake:this.Real,this.note.rotation=0==this.randomNodeIndex?180:0,e.parent=this.items_parent,e.setSiblingIndex(0),this.Money=e,this.Money.position=this.pos},UPani:function(e){cc.tween(e).to(.3,{position:cc.v2(this.Money.x,4556)}).call(function(){e.destroy()}).start()},Downani:function(e){cc.tween(e).to(.5,{position:cc.v2(this.Money.x,-2040)}).call(function(){e.destroy()}).start()},RecycleAni:function(){null!=this.ani_Recycle1&&(this.ani_Recycle1.stop(),this.ani_Recycle2.stop()),this.ani_Recycle1=cc.tween(this.Recycle[0]).to(.1,{position:cc.v2(0,-905)}).delay(.3).to(.2,{position:cc.v2(0,-1405)}).start(),this.ani_Recycle2=cc.tween(this.Recycle[1]).to(.1,{position:cc.v2(0,-1074)}).delay(.3).to(.2,{position:cc.v2(0,-1620)}).start()},BeginAni:function(){var e=this;cc.tween(this.MoneyArea).by(.2,{position:cc.v2(0,955)}).call(function(){e.pos=e.Money.position}).start(),n.JudgeArea="\u7121",cc.tween(this.MoneyStack).by(.2,{position:cc.v2(0,800)}).call(function(){e.Money.getComponent(cc.BlockInputEvents).onDisable(),e.note.active=!0}).start()}}),cc._RF.pop()},{Model:"Model"}],Skin:[function(e,t){"use strict";cc._RF.push(t,"cd804C+XgNEHYsQUS337SkZ","Skin"),e("Model"),cc.Class({extends:cc.Component,properties:{SkinType:{default:null,type:cc.Sprite}},onLoad:function(){},start:function(){}}),cc._RF.pop()},{Model:"Model"}],ani:[function(e,t){"use strict";cc._RF.push(t,"58d98+WtihHuKwhuv8/GTaa","ani");var n=e("Model");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.count=0},onCollisionEnter:function(e){this.count++,"\u52a0\u5206"==e.node.group&&1==this.count?n.TopTitle="\u52a0\u5206":"\u6263\u5206"==e.node.group&&1==this.count&&(n.TopTitle="\u6263\u5206")},onCollisionExit:function(){this.count--,n.TopTitle="\u7121"}}),cc._RF.pop()},{Model:"Model"}],"goeasy-2.0.12.min":[function(e,t,n){(function(e){"use strict";var i,o;cc._RF.push(t,"73b74QnRwRA4phQ5aA3bI9k","goeasy-2.0.12.min"),i="undefined"!=typeof self?self:void 0,o=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=120)}([function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){t.__esModule=!0;var i,o=(i=n(128))&&i.__esModule?i:{default:i};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o.default)(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=t.GoEasyDomainNumber=t.env=t.goEasyArray=t.UUID=t.calibrator=void 0;var i=n(83),o=n(150),r=n(154),s=n(92),a=n(93);t.calibrator=i.calibrator,t.UUID=o.UUID,t.goEasyArray=r.goEasyArray,t.env=s.env,t.GoEasyDomainNumber=a.GoEasyDomainNumber,t.noop=function(){}},function(e,t,n){e.exports={default:n(155),__esModule:!0}},function(e,t,n){t.__esModule=!0;var i,o=(i=n(20))&&i.__esModule?i:{default:i};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){t.__esModule=!0;var i=s(n(157)),o=s(n(21)),r=s(n(20));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,r.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(175),__esModule:!0}},function(e){var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={WRITE:"WRITE",READ:"READ",NONE:"NONE"}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={default:"default",text:"text",image:"image",video:"video",audio:"audio",emoji:"emoji",file:"file"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),o=a(n(1)),r=n(2),s=a(n(8));function a(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){var n=this;(0,i.default)(this,e),this.uuid=null,this.name="",this.params=null,this.success=null,this.fail=null,this.permission=s.default.NONE,this.singleTimeout=0,this.totalTimeout=0,this.startTime=0,this.complete=!1,this.retried=0,this.uuid=r.UUID.get(),this.name=t.name,this.params=t.params,this.permission=t.permission,this.totalTimeout=t.totalTimeout,this.singleTimeout=t.singleTimeout,this.success=function(e){n.complete||(n.complete=!0,t.success(e))},this.fail=function(e){n.complete||(n.complete=!0,t.fail(e))}}return(0,o.default)(e,[{key:"start",value:function(){this.startTime=Date.now()}},{key:"isTimeout",value:function(){return this.startTime+this.totalTimeout<Date.now()}}]),e}();t.default=c},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EmitType={authorize:"authorize",manualDisconnect:"manualDisconnect",subscribe:"subscribe",unsubscribe:"unsubscribe",publish:"publish",ack:"ack",historyMessages:"historyMessages",hereNow:"hereNow",hereNowByUserIds:"hereNowByUserIds",imLastConversations:"imLastConversations",markPrivateMessageAsRead:"markPrivateMessageAsRead",markGroupMessageAsRead:"markGroupMessageAsRead",imGroupOnlineCount:"imGroupOnlineCount",imHereNow:"imHereNow",imGroupHereNow:"imGroupHereNow",publishIM:"publishIM",imHistory:"imHistory",subscribeUserPresence:"subscribeUserPresence",unsubscribeUserPresence:"unsubscribeUserPresence",subscribeGroupPresence:"subscribeGroupPresence",unsubscribeGroupPresence:"unsubscribeGroupPresence",removeConversation:"removeConversation",topConversation:"topConversation",imData:"imData",subscribeGroups:"subscribeGroups",unsubscribeGroup:"unsubscribeGroup"}},function(e,t,n){t.__esModule=!0;var i=r(n(3)),o=r(n(193));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t,n,r){null===t&&(t=Function.prototype);var s=(0,o.default)(t,n);if(void 0===s){var a=(0,i.default)(t);return null===a?void 0:e(a,n,r)}if("value"in s)return s.value;var c=s.get;return void 0===c?void 0:c.call(r)}},function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("","return this")();"number"==typeof __g&&(__g=t)},function(e,t,n){var i=n(59)("wks"),o=n(46),r=n(13).Symbol,s="function"==typeof r;(e.exports=function(e){return i[e]||(i[e]=s&&r[e]||(s?r:o)("Symbol."+e))}).store=i},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SocketTimeout={connect:1500,reconnectionDelayMax:3e3,commonQuerySingle:2500,commonQueryTotal:12e3,commonRequestSingle:1700,commonRequestTotal:12e3,commonInfiniteSingle:1700,commonInfiniteTotal:864e5}},function(e,t,n){var i=n(13),o=n(7),r=n(35),s=n(26),a=n(27),c=function e(t,n,c){var u,l,d,f=t&e.F,h=t&e.G,p=t&e.S,m=t&e.P,g=t&e.B,y=t&e.W,v=h?o:o[n]||(o[n]={}),_=v.prototype,b=h?i:p?i[n]:(i[n]||{}).prototype;for(u in h&&(c=n),c)(l=!f&&b&&void 0!==b[u])&&a(v,u)||(d=l?b[u]:c[u],v[u]=h&&"function"!=typeof b[u]?c[u]:g&&l?r(d,i):y&&b[u]==d?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):m&&"function"==typeof d?r(Function.call,d):d,m&&((v.virtual||(v.virtual={}))[u]=d,t&e.R&&_&&!_[u]&&s(_,u,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.str=t.noop=t.GoEasyDomainNumber=t.env=t.goEasyArray=t.UUID=t.calibrator=void 0;var i=n(196),o=n(2);t.calibrator=o.calibrator,t.UUID=o.UUID,t.goEasyArray=o.goEasyArray,t.env=o.env,t.GoEasyDomainNumber=o.GoEasyDomainNumber,t.noop=o.noop,t.str=i.str},function(e,t,n){e.exports=!n(30)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(23);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){t.__esModule=!0;var i=s(n(133)),o=s(n(141)),r="function"==typeof o.default&&"symbol"==typeof i.default?function(e){return typeof e}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};function s(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof o.default&&"symbol"===r(i.default)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":void 0===e?"undefined":r(e)}},function(e,t,n){e.exports={default:n(161),__esModule:!0}},function(e,t,n){var i=n(19),o=n(79),r=n(55),s=Object.defineProperty;t.f=n(18)?Object.defineProperty:function(e,t,n){if(i(e),t=r(t,!0),i(n),o)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var i=n(81),o=n(56);e.exports=function(e){return i(o(e))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Conversion=t.ConversationType=t.Conversations=void 0;var i=n(101),o=n(69),r=n(191);t.Conversations=r.Conversations,t.ConversationType=o.ConversationType,t.Conversion=i.Conversion},function(e,t,n){var i=n(22),o=n(45);e.exports=n(18)?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={DISCONNECTED:"disconnected",DISCONNECTING:"disconnecting",CONNECTING:"connecting",CONNECTED:"connected",RECONNECTING:"reconnecting",RECONNECTED:"reconnected",EXPIRED_RECONNECTED:"reconnected",CONNECT_FAILED:"connect_failed"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImEventType=t.eventCenter=void 0;var i=n(190),o=n(100);t.eventCenter=i.eventCenter,t.ImEventType=o.ImEventType},function(e){e.exports=function(e){try{return!!e()}catch(o){return!0}}},function(e,t,n){var i=n(80),o=n(60);e.exports=Object.keys||function(e){return i(e,o)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SocketTimeout=t.IMTimeout=void 0;var i=n(15);t.IMTimeout={},t.SocketTimeout=i.SocketTimeout},function(e,t,n){e.exports={default:n(208),__esModule:!0}},function(e,t,n){var i=n(253),o=n(254),r=n(256),s=n(257);"undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),"undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),t.protocol=3;var a=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},c=i(a),u={type:"error",data:"parser error"},l=n(258);t.encodePacket=function(e,t,n,i){"function"==typeof t&&(i=t,t=!1),"function"==typeof n&&(i=n,n=null),void 0===e.data||e.data.buffer||e.data;var o=a[e.type];return void 0!==e.data&&(o+=n?s.encode(String(e.data),{strict:!1}):String(e.data)),i(""+o)},t.decodePacket=function(e,t,n){if(void 0===e)return u;if("string"==typeof e){if(n&&!1===(e=function(e){try{e=s.decode(e,{strict:!1})}catch(t){return!1}return e}(e)))return u;var i=e.charAt(0);return Number(i)==i&&c[i]?e.length>1?{type:c[i],data:e.substring(1)}:{type:c[i]}:u}i=new Uint8Array(e)[0];var o=sliceBuffer(e,1);return l&&"blob"===t&&(o=new l([o])),{type:c[i],data:o}},t.encodePayload=function(e,n,i){"function"==typeof n&&(i=n,n=null);var s=o(e);if(!e.length)return i("0:");!function(e,t,n){for(var i=new Array(e.length),o=r(e.length,n),s=function(e,n,o){t(n,function(t,n){i[e]=n,o(t,i)})},a=0;a<e.length;a++)s(a,e[a],o)}(e,function(e,i){t.encodePacket(e,!!s&&n,!0,function(e){i(null,function(e){return e.length+":"+e}(e))})},function(e,t){return i(t.join(""))})},t.decodePayload=function(e,n,i){var o;if("function"==typeof n&&(i=n,n=null),""===e)return i(u,0,1);for(var r,s,a="",c=0,l=e.length;c<l;c++){var d=e.charAt(c);if(":"===d){if(""===a||a!=(r=Number(a)))return i(u,0,1);if(a!=(s=e.substr(c+1,r)).length)return i(u,0,1);if(s.length){if(o=t.decodePacket(s,n,!0),u.type===o.type&&u.data===o.data)return i(u,0,1);if(!1===i(o,c+r,l))return}c+=r,a=""}else a+=d}return""!==a?i(u,0,1):void 0}},function(e,t,n){var i=n(44);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)}}return function(){return e.apply(t,arguments)}}},function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},function(e){e.exports=!0},function(e,t){t.f={}.propertyIsEnumerable},function(e){e.exports={}},function(e,t,n){var i=n(56);e.exports=function(e){return Object(i(e))}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={message:"message",imMessage:"imMessage",userPresence:"userPresence",groupPresence:"groupPresence"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=S(n(6)),o=S(n(0)),r=S(n(1)),s=n(29),a=n(25),c=n(192),u=S(n(9)),l=S(n(207)),d=S(n(224)),f=S(n(107)),h=S(n(225)),p=S(n(226)),m=S(n(227)),g=S(n(228)),y=S(n(229)),v=S(n(230)),_=S(n(231)),b=S(n(232)),C=S(n(233));function S(e){return e&&e.__esModule?e:{default:e}}var w=function(){function e(){(0,o.default)(this,e),this._event=s.eventCenter,this._goEasyUploader=null,this._goEasySocket=null,this._dataCache=null,this._messageSender=null,this._history=null,this._conversations=null,this._iMReceiver=null,this._groupMessageReceive=null,this._groupPresenceSubscriber=null,this._groupOnlineCount=null,this._groupHereNow=null,this._privateMessageReceive=null,this._userPresenceSubscriber=null,this._userHereNow=null}return(0,r.default)(e,[{key:"on",value:function(e,t){this._event.on(e,t)}},{key:"initialBeforeConnect",value:function(t){e.userId=t.id,e.userData=t.data,this._dataCache=new C.default(this,t),this._messageSender=new l.default(this),this._history=new d.default(this),this._goEasyUploader=new f.default(this),this._userHereNow=new v.default(this),this._groupHereNow=new _.default(this),this._groupOnlineCount=new m.default(this)}},{key:"initialAfterConnect",value:function(){this._iMReceiver=new b.default(this),this._conversations=new a.Conversations(this),this._groupPresenceSubscriber=new g.default(this),this._groupMessageReceive=new h.default(this),this._userPresenceSubscriber=new y.default(this),this._privateMessageReceive=new p.default(this)}},{key:"initialGoEasySocket",value:function(e){this._goEasySocket=e}},{key:"createTextMessage",value:function(e){return c.messageCreator.create(u.default.text,e)}},{key:"createImageMessage",value:function(e){return c.messageCreator.create(u.default.image,e)}},{key:"createFileMessage",value:function(e){return c.messageCreator.create(u.default.file,e)}},{key:"createAudioMessage",value:function(e){return c.messageCreator.create(u.default.audio,e)}},{key:"createVideoMessage",value:function(e){return c.messageCreator.create(u.default.video,e)}},{key:"createCustomMessage",value:function(e){return c.messageCreator.create(e.type,e)}},{key:"latestConversations",value:function(){return this._conversations?this._conversations.latestConversations():i.default.reject({code:500,content:"Please connect GoEasyIM first."})}},{key:"groupMarkAsRead",value:function(e,t){return this._conversations.groupMarkAsRead(e,t)}},{key:"privateMarkAsRead",value:function(e,t){return this._conversations.privateMarkAsRead(e,t)}},{key:"removePrivateConversation",value:function(e){return this._conversations.removeConversation(e,a.ConversationType.PRIVATE)}},{key:"removeGroupConversation",value:function(e){return this._conversations.removeConversation(e,a.ConversationType.GROUP)}},{key:"topPrivateConversation",value:function(e,t){return this._conversations.topConversation(e,t,a.ConversationType.PRIVATE)}},{key:"topGroupConversation",value:function(e,t){return this._conversations.topConversation(e,t,a.ConversationType.GROUP)}},{key:"history",value:function(e){return this._history.history(e)}},{key:"upload",value:function(e,t,n){return this._goEasyUploader.upload(e,t,n)}},{key:"sendSystemMessage",value:function(e,t){return this._messageSender.send(e,t,a.ConversationType.SYSTEM)}},{key:"sendMessage",value:function(e){return this._messageSender.sendMessage(e)}},{key:"sendPrivateMessage",value:function(e,t){return this._messageSender.send(e,t,a.ConversationType.PRIVATE)}},{key:"subscribeUserPresence",value:function(e){return this._userPresenceSubscriber.presence(e)}},{key:"unsubscribeUserPresence",value:function(e){return this._userPresenceSubscriber.unPresence(e)}},{key:"hereNow",value:function(e){return this._userHereNow.hereNow(e,a.ConversationType.PRIVATE)}},{key:"sendGroupMessage",value:function(e,t){return this._messageSender.send(e,t,a.ConversationType.GROUP)}},{key:"subscribeGroup",value:function(e){return this._groupMessageReceive.subscribe(e)}},{key:"unsubscribeGroup",value:function(e){return this._groupMessageReceive.unsubscribe(e)}},{key:"subscribeGroupPresence",value:function(e){return this._groupPresenceSubscriber.presence(e)}},{key:"unsubscribeGroupPresence",value:function(e){return this._groupPresenceSubscriber.unPresence(e)}},{key:"groupHereNow",value:function(e){return this._groupHereNow.hereNow(e)}},{key:"groupOnlineCount",value:function(e){return this._groupOnlineCount.get(e)}}]),e}();w.version=null,w.userId=void 0,w.userData=null,t.default=w},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(21)),o=l(n(0)),r=l(n(1)),s=l(n(42)),a=n(2),c=(l(n(9)),l(n(49))),u=n(25);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){(0,o.default)(this,e),this.type="",this.to={type:null,id:null,data:null},this.timestamp=Date.now(),this.senderId=null,this.payload=null,this.messageId=a.UUID.get(),this.status=c.default.new,this.validate(t),this.setSenderId(),this.setType(t),this.setNotification(t),this.setPayload(t),this.setTo(t),this.setData()}return(0,r.default)(e,[{key:"validate",value:function(e){if(!a.calibrator.isObject(e))throw Error("it is an empty message.")}},{key:"setType",value:function(){throw Error("Abstract method")}},{key:"setNotification",value:function(e){if(e.notification){if(!a.calibrator.isObject(e.notification))throw Error("notification require an object.");if(a.calibrator.isEmpty(e.notification.title))throw Error("notification's title is empty.");if(a.calibrator.isEmpty(e.notification.body))throw Error("notification's body is empty.");if(e.notification.title.length>32)throw Error("notification's title over max length 32");if(e.notification.body.length>50)throw Error("notification's body over max length 50");this.notification=e.notification}}},{key:"setPayload",value:function(){this.payload=(0,i.default)(null)}},{key:"setSenderId",value:function(){if(!s.default.userId)throw Error("please call connect() first.");this.senderId=s.default.userId}},{key:"setTo",value:function(e){this.to=e.to}},{key:"setData",value:function(){this.to&&this.to.type==u.ConversationType.GROUP&&(this.senderData=s.default.userData)}}]),e}();t.default=d},function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},function(e,t,n){var i=n(22).f,o=n(27),r=n(14)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,r)&&i(e,r,{configurable:!0,value:t})}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(21)),o=u(n(0)),r=u(n(1)),s=n(2),a=n(25),c=u(n(49));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){(0,o.default)(this,e)}return(0,r.default)(e,null,[{key:"assemble",value:function(e){if(!s.calibrator.isDef(e))return null;try{var t=(0,i.default)(null);return t.type=e.mt,t.timestamp=e.ts,t.senderId=e.s,t.payload=JSON.parse(e.p),t.messageId=e.i,t.status=c.default.success,e.t==a.ConversationType.GROUP?(t.groupId=e.r,t.senderData=e.d?JSON.parse(e.d):{}):t.receiverId=e.r,t}catch(n){throw Error(n)}}}]),e}();t.default=l},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={new:"new",sending:"sending",success:"success",fail:"fail"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(3)),o=d(n(0)),r=d(n(1)),s=d(n(4)),a=d(n(12)),c=d(n(5)),u=d(n(70)),l=n(17);function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,c.default)(t,e),(0,r.default)(t,[{key:"validate",value:function(e){if((0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"validate",this).call(this,e),!l.calibrator.isDef(e.file))throw Error("file is empty.")}},{key:"setPayload",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"setPayload",this).call(this,e)}}]),t}(u.default);t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(3)),o=l(n(0)),r=l(n(1)),s=l(n(4)),a=l(n(12)),c=l(n(5)),u=n(17);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,c.default)(t,e),(0,r.default)(t,[{key:"validate",value:function(e){if((0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"validate",this).call(this,e),!u.calibrator.isDef(e.file))throw Error("file is empty.")}},{key:"setPayload",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"setPayload",this).call(this,e)}}]),t}(l(n(70)).default);t.default=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(3)),o=u(n(0)),r=u(n(1)),s=u(n(4)),a=u(n(12)),c=u(n(5));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,c.default)(t,e),(0,r.default)(t,[{key:"validate",value:function(e){if((0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"validate",this).call(this,e),!(e.file instanceof File))throw Error("wrong file type.");if(0==e.file.size)throw Error("File size is 0.");if(e.file.size>31457280)throw Error("message-length limit 30mib")}},{key:"setPayload",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"setPayload",this).call(this,e),this.payload.contentType=e.file.type,this.payload.name=e.file.name,this.payload.size=e.file.size;var n=(window.URL||window.webkitURL).createObjectURL(e.file);this.payload.url=n}}]),t}(u(n(70)).default);t.default=l},function(e,t,n){(function(i){function o(){var e;try{e=t.storage.debug}catch(n){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e}(t=e.exports=n(241)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var o=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(r=++o)}),e.splice(r,0,i)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=o,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(o())}).call(t,n(73))},function(e,t,n){var i=n(23),o=n(13).document,r=i(o)&&i(o.createElement);e.exports=function(e){return r?o.createElement(e):{}}},function(e,t,n){var i=n(23);e.exports=function(e,t){if(!i(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!i(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!i(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},function(e,t,n){var i=n(59)("keys"),o=n(46);e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t,n){var i=n(7),o=n(13),r=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n(37)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},function(e){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(19),o=n(137),r=n(60),s=n(58)("IE_PROTO"),a=function(){},c=function(){var e,t=n(54)("iframe"),i=r.length;for(t.style.display="none",n(87).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;i--;)delete c.prototype[r[i]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(a.prototype=i(e),n=new a,a.prototype=null,n[s]=e):n=c(),void 0===t?n:o(n,t)}},function(e,t,n){t.f=n(14)},function(e,t,n){var i=n(13),o=n(7),r=n(37),s=n(62),a=n(22).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=r?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(38),o=n(45),r=n(24),s=n(55),a=n(27),c=n(79),u=Object.getOwnPropertyDescriptor;t.f=n(18)?u:function(e,t){if(e=r(e),t=s(t,!0),c)try{return u(e,t)}catch(n){}if(a(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,n){var i=n(16),o=n(7),r=n(30);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],s={};s[e]=t(n),i(i.S+i.F*r(function(){n(1)}),"Object",s)}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleType={IM:"IM",PUBSUB:"PUBSUB"}},function(e,t,n){var i=n(44);e.exports.f=function(e){return new function(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=i(t),this.reject=i(n)}(e)}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationType={GROUP:"group",PRIVATE:"private"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(3)),o=d(n(0)),r=d(n(1)),s=d(n(4)),a=d(n(12)),c=d(n(5)),u=d(n(43)),l=d(n(9));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,o.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.file=null,n.onProgress=null,n.setFile(e.file),n.setOnProgress(e.onProgress),n}return(0,c.default)(t,e),(0,r.default)(t,[{key:"validate",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"validate",this).call(this,e)}},{key:"setPayload",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"setPayload",this).call(this,e),this.payload.size="",this.payload.contentType="",this.payload.name="",this.payload.url=""}},{key:"setType",value:function(){this.type=l.default.file}},{key:"setFile",value:function(e){this.file=e}},{key:"setOnProgress",value:function(e){this.onProgress=e}}]),t}(u.default);t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0)),o=r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"upload",value:function(){throw Error("Not implementation yet.")}}]),e}();t.default=s},function(e,t,n){e.exports={default:n(234),__esModule:!0}},function(e){var t,n,i=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(o){try{return t.call(null,e,0)}catch(o){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&h())}function h(){if(!l){var e=a(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(){return[]},i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var i,o=(i=n(33))&&i.__esModule?i:{default:i};n(243)("socket.io-parser");var r=n(246),s=n(247);function a(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=a,t.Decoder=u;var c=t.ERROR+'"encode error"';function u(){this.reconstructor=null}function l(e){this.reconPack=e,this.buffers=[]}function d(e){return{type:t.ERROR,data:"parser error: "+e}}a.prototype.encode=function(e,n){n([function(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var i=function(e){try{return(0,o.default)(e)}catch(t){return!1}}(e.data);if(!1===i)return c;n+=i}return n}(e)])},r(u.prototype),u.prototype.add=function(e){var n;if("string"!=typeof e)throw new Error("Unknown type: "+e);n=function(e){var n=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return d("unknown packet type "+i.type);if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var o="";"-"!==e.charAt(++n)&&(o+=e.charAt(n),n!=e.length););if(o!=Number(o)||"-"!==e.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(o)}if("/"===e.charAt(n+1))for(i.nsp="";++n&&","!==(a=e.charAt(n))&&(i.nsp+=a,n!==e.length););else i.nsp="/";var r=e.charAt(n+1);if(""!==r&&Number(r)==r){for(i.id="";++n;){var a;if(null==(a=e.charAt(n))||Number(a)!=a){--n;break}if(i.id+=e.charAt(n),n===e.length)break}i.id=Number(i.id)}if(e.charAt(++n)){var c=function(e){try{return JSON.parse(e)}catch(t){return!1}}(e.substr(n));if(!1===c||i.type!==t.ERROR&&!s(c))return d("invalid payload");i.data=c}return i}(e),this.emit("decoded",n)},u.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},l.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=binary.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},l.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){var i=n(34),o=n(113);function r(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=r,o(r.prototype),r.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},r.prototype.onPacket=function(e){this.emit("packet",e)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,o=n.length;i<o;i++){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}},function(e){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(i){function o(){var e;try{e=t.storage.debug}catch(n){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e}(t=e.exports=n(259)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var o=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(r=++o)}),e.splice(r,0,i)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=o,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(o())}).call(t,n(73))},function(e,t,n){e.exports=!n(18)&&!n(30)(function(){return 7!=Object.defineProperty(n(54)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(27),o=n(24),r=n(126)(!1),s=n(58)("IE_PROTO");e.exports=function(e,t){var n,a=o(e),c=0,u=[];for(n in a)n!=s&&i(a,n)&&u.push(n);for(;t.length>c;)i(a,n=t[c++])&&(~r(u,n)||u.push(n));return u}},function(e,t,n){var i=n(36);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t,n){var i=n(57),o=Math.min;e.exports=function(e){return e>0?o(i(e),9007199254740991):0}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.calibrator=void 0;var i=s(n(20)),o=s(n(0)),r=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var a=new(function(){function e(){(0,o.default)(this,e)}return(0,r.default)(e,[{key:"isUndef",value:function(e){return null==e}},{key:"isTrue",value:function(e){return!0===e}},{key:"isFalse",value:function(e){return!1===e}},{key:"isPrimitive",value:function(e){return"string"==typeof e||"number"==typeof e||"symbol"===(void 0===e?"undefined":(0,i.default)(e))||"boolean"==typeof e}},{key:"isDef",value:function(e){return null!=e}},{key:"isObject",value:function(e){return null!==e&&"object"===(void 0===e?"undefined":(0,i.default)(e))}},{key:"isPlainObject",value:function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{key:"isRegExp",value:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}},{key:"isValidArrayIndex",value:function(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}},{key:"isStringOrNumber",value:function(e){return"string"==typeof e||"number"==typeof e}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"isNumber",value:function(e){return"number"==typeof e}},{key:"isArray",value:function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{key:"isEmpty",value:function(e){return this.isArray(e)?0==e.length:this.isObject(e)?!this.isDef(e):!this.isNumber(e)&&(this.isString(e)?""==e.trim():!this.isDef(e))}},{key:"isNative",value:function(e){return"function"==typeof e&&/native code/.test(e.toString())}},{key:"isFunction",value:function(e){return"function"==typeof e}}]),e}());t.calibrator=a},function(e,t,n){var i=n(135)(!0);n(85)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var i=n(37),o=n(16),r=n(86),s=n(26),a=n(39),c=n(136),u=n(47),l=n(88),d=n(14)("iterator"),f=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,p,m,g,y){c(n,t,p);var v,_,b,C=function(e){if(!f&&e in T)return T[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",w="values"==m,k=!1,T=e.prototype,M=T[d]||T["@@iterator"]||m&&T[m],A=M||C(m),P=m?w?C("entries"):A:void 0,E="Array"==t&&T.entries||M;if(E&&(b=l(E.call(new e)))!==Object.prototype&&b.next&&(u(b,S,!0),i||"function"==typeof b[d]||s(b,d,h)),w&&M&&"values"!==M.name&&(k=!0,A=function(){return M.call(this)}),i&&!y||!f&&!k&&T[d]||s(T,d,A),a[t]=A,a[S]=h,m)if(v={values:w?A:C("values"),keys:g?A:C("keys"),entries:P},y)for(_ in v)_ in T||r(T,_,v[_]);else o(o.P+o.F*(f||k),t,v);return v}},function(e,t,n){e.exports=n(26)},function(e,t,n){var i=n(13).document;e.exports=i&&i.documentElement},function(e,t,n){var i=n(27),o=n(40),r=n(58)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),i(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,n){n(138);for(var i=n(13),o=n(26),r=n(39),s=n(14)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var u=a[c],l=i[u],d=l&&l.prototype;d&&!d[s]&&o(d,s,u),r[u]=r.Array}},function(e,t,n){var i=n(80),o=n(60).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},function(){},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.env=void 0;var i=s(n(20)),o=s(n(0)),r=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var a=new(function(){function e(){(0,o.default)(this,e)}return(0,r.default)(e,[{key:"isWx",value:function(){return!("undefined"==typeof wx||!wx.getLocation||"undefined"==typeof GameGlobal&&"function"==typeof WebSocket&&"function"==typeof XMLHttpRequest)}},{key:"isUni",value:function(){return!("object"!==("undefined"==typeof uni?"undefined":(0,i.default)(uni))||!uni.getSystemInfo)}},{key:"isSupportHtmlPlus",value:function(){return!!("object"===("undefined"==typeof plus?"undefined":(0,i.default)(plus))&&plus.navigator&&plus.navigator.getUserAgent()&&plus.navigator.getUserAgent().indexOf("Html5Plus")>-1)}},{key:"isTT",value:function(){return!("object"!==("undefined"==typeof tt?"undefined":(0,i.default)(tt))||!tt.getSystemInfo)}},{key:"isBrowserClient",value:function(){return this.isUni()?"function"==typeof WebSocket&&"function"==typeof XMLHttpRequest&&"object"==("undefined"==typeof localStorage?"undefined":(0,i.default)(localStorage)):!(this.isReactNative()||this.isWx()||this.isTT())}},{key:"isReactNative",value:function(){return"undefined"!=typeof navigator&&"ReactNative"==navigator.product}}]),e}());t.env=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GoEasyDomainNumber=void 0;var i=c(n(0)),o=c(n(1)),r=n(92),s=n(163),a=c(n(164));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,null,[{key:"refreshNumber",value:function(){var e=Math.floor(Math.random()*(a.default.maxNumber-1)+1);return r.env.isBrowserClient()&&(e=parseInt(s.storage.getData("goEasyNode"))||e),e>0&&e<a.default.maxNumber?e+=1:e==a.default.maxNumber&&(e=1),r.env.isBrowserClient()&&s.storage.setData("goEasyNode",e),e}}]),e}();t.GoEasyDomainNumber=u},function(e,t,n){e.exports={default:n(172),__esModule:!0}},function(e,t,n){var i=n(36),o=n(14)("toStringTag"),r="Arguments"==i(function(){return arguments}());e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),o))?n:r?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var i=n(19),o=n(44),r=n(14)("species");e.exports=function(e,t){var n,s=i(e).constructor;return void 0===s||null==(n=i(s)[r])?t:o(n)}},function(e,t,n){var i,o,r,s=n(35),a=n(182),c=n(87),u=n(54),l=n(13),d=l.process,f=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,m=l.Dispatch,g=0,y={},v=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},_=function(e){v.call(e.data)};f&&h||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++g]=function(){a("function"==typeof e?e:Function(e),t)},i(g),g},h=function(e){delete y[e]},"process"==n(36)(d)?i=function(e){d.nextTick(s(v,e,1))}:m&&m.now?i=function(e){m.now(s(v,e,1))}:p?(r=(o=new p).port2,o.port1.onmessage=_,i=s(r.postMessage,r,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(i=function(e){l.postMessage(e+"","*")},l.addEventListener("message",_,!1)):i="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),v.call(e)}}:function(e){setTimeout(s(v,e,1),0)}),e.exports={set:f,clear:h}},function(e){e.exports=function(e){try{return{e:!1,v:e()}}catch(o){return{e:!0,v:o}}}},function(e,t,n){var i=n(19),o=n(23),r=n(68);e.exports=function(e,t){if(i(e),o(t)&&t.constructor===e)return t;var n=r.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ImEventType=void 0;var i,o=(0,((i=n(21))&&i.__esModule?i:{default:i}).default)(null);o.PRIVATE_MESSAGE_RECEIVED="PRIVATE_MESSAGE_RECEIVED",o.GROUP_MESSAGE_RECEIVED="GROUP_MESSAGE_RECEIVED",o.SYSTEM_MESSAGE_RECEIVED="SYSTEM_MESSAGE_RECEIVED",o.CONVERSATIONS_UPDATED="CONVERSATIONS_UPDATED",o.CONNECTED="CONNECTED",o.CONNECTING="CONNECTING",o.DISCONNECTED="DISCONNECTED",o.USER_PRESENCE="USER_PRESENCE",o.GROUP_PRESENCE="GROUP_PRESENCE",t.ImEventType=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Conversion=void 0;var i=c(n(0)),o=c(n(1)),r=n(69),s=c(n(42)),a=c(n(48));function c(e){return e&&e.__esModule?e:{default:e}}t.Conversion=function(){function e(){(0,i.default)(this,e),this.type="",this.lastMessage=null,this.unread=0,this.top=!1,this.data=null,this.lc=0,this.lm=0}return(0,o.default)(e,null,[{key:"buildByInMessage",value:function(t){var n=new e;return n.data={},n.type=t.t,n.lastMessage=a.default.assemble(t),n.lc=n.lastMessage.timestamp-1,n.lm=n.lastMessage.timestamp,n.unread=0,t.t==r.ConversationType.GROUP?n.groupId=t.r:s.default.userId==t.r?n.userId=t.s:n.userId=t.r,n}},{key:"buildByOutMessage",value:function(t,n,i){var o=new e;return o.type=n,o.lastMessage=t,o.lm=o.lastMessage.timestamp,o.lc=o.lm,o.unread=0,n==r.ConversationType.GROUP?(o.groupId=i,o.lastMessage.groupId=i):(o.userId=i,o.lastMessage.receiverId=i),o}},{key:"buildByConversation",value:function(t,n){var i=new e;i.type=n.t,n.lmsg.t=n.t,i.lastMessage=a.default.assemble(n.lmsg),i.unread=0,i.lc=n.lcts,i.lm=i.lastMessage.timestamp,i.top=n.top||!1;var o=n.d?JSON.parse(n.d):{};return i.data=o,n.t==r.ConversationType.GROUP?(i.groupId=n.g,t.putGroupData(i.groupId,o)):(i.userId=n.uid,t.putUserData(i.userId,o),s.default.userId==n.lmsg.s?i.lastMessage.senderData=s.default.userData:i.lastMessage.senderData=o),i}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(0)),o=s(n(1)),r=n(2);function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,null,[{key:"resolve",value:function(){return r.env.isUni()?"uniApp":r.env.isWx()?"wx":"html"}}]),e}();t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(3)),o=f(n(0)),r=f(n(1)),s=f(n(4)),a=f(n(12)),c=f(n(5)),u=f(n(43)),l=f(n(9)),d=n(2);function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,c.default)(t,e),(0,r.default)(t,[{key:"validate",value:function(e){if(d.calibrator.isEmpty(e.text)||""==e.text.trim())throw Error("text is empty")}},{key:"setType",value:function(){this.type=l.default.text}},{key:"setPayload",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"setPayload",this).call(this,e),this.payload.text=e.text}}]),t}(u.default);t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0)),o=r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"build",value:function(){throw Error("Not implementation yet.")}}]),e}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(6)),o=f(n(3)),r=f(n(0)),s=f(n(1)),a=f(n(4)),c=f(n(5)),u=f(n(106)),l=f(n(9)),d=f(n(107));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){(0,r.default)(this,t);var n=(0,a.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return n.im=null,n.goEasyUploader=new d.default(e),n}return(0,c.default)(t,e),(0,s.default)(t,[{key:"build",value:function(e){var t=this;return new i.default(function(n,i){var o=new u.default;t.upload(e).then(function(t){var i=t.content,r=void 0===i?{}:i;(o=e.payload).url=r.url,o.name=r.newFileName,n(o)}).catch(function(e){i(e)})})}},{key:"upload",value:function(e){var t=e.type==l.default.video?e.payload.video.name:e.payload.name;return this.goEasyUploader.upload(e.file,t,e.onProgress,e.type)}}]),t}(f(n(104)).default);t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=n(0))&&i.__esModule?i:{default:i};t.default=function e(){(0,o.default)(this,e)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=c(n(6)),o=c(n(0)),r=c(n(1)),s=n(214),a=c(n(218));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){(0,o.default)(this,e),this.requestBuilder=null,this.fileUploader=s.fileUploader,this.requestBuilder=new a.default(t)}return(0,r.default)(e,[{key:"upload",value:function(e,t,n,o){var r=this;return new i.default(function(i,s){r.requestBuilder.build(e,t,o).then(function(e){i(r.doUpload(e,n))}).catch(function(e){s(e)})})}},{key:"customizeUpload",value:function(e,t){this.doUpload(e,t)}},{key:"doUpload",value:function(e,t){return this.fileUploader.upload(e,t)}}]),e}();t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=n(0))&&i.__esModule?i:{default:i};t.default=function e(t,n,i,r,s){(0,o.default)(this,e),this.host="",this.headers={},this.parameters={},this.file={},this.payload={},this.host=t,this.headers=n,this.parameters=i,this.file=r,this.payload=s}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0)),o=r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"build",value:function(){}},{key:"newFileName",value:function(e){return e&&e.newFilename||""}}]),e}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(0)),o=l(n(1)),r=l(n(28)),s=l(n(8)),a=l(n(237)),c=l(n(238)),u=n(2);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(){(0,i.default)(this,e),this.io=c.default,this.status=r.default.DISCONNECTED,this.permissions=[s.default.NONE],this.emitter=null,this.connectedObservers=[],this.disconnectedObservers=[],this.emitter=new a.default(this)}return(0,o.default)(e,[{key:"connect",value:function(){this.status=r.default.CONNECTING}},{key:"emit",value:function(e){this.emitter.emit(e)}},{key:"doEmit",value:function(){}},{key:"on",value:function(e,t){this.io.on(e,t)}},{key:"disconnect",value:function(){this.io.disconnect()}},{key:"getStatus",value:function(){return this.status}},{key:"addConnectedObserver",value:function(e){u.calibrator.isFunction(e)&&this.connectedObservers.push(e)}},{key:"addDisconnectedObserver",value:function(e){u.calibrator.isFunction(e)&&this.disconnectedObservers.push(e)}},{key:"notify",value:function(e,t){for(var n=0;n<e.length;n++)e[n](t)}}]),e}();t.default=d},function(e,t,n){var i,o=(i=n(20))&&i.__esModule?i:{default:i},r=n(248),s=n(115),a=n(116),c=n(74),u=n(117),l=n(118),d=(n(53)("socket.io-client:manager"),n(271)),f=n(272),h=n(93).GoEasyDomainNumber,p=Object.prototype.hasOwnProperty;function m(e,t){if(!(this instanceof m))return new m(e,t);e&&"object"===(void 0===e?"undefined":(0,o.default)(e))&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||c;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}function g(){var e=!1;return"object"===("undefined"==typeof uni?"undefined":(0,o.default)(uni))&&uni.getSystemInfo&&(e=!0),e&&!0===getApp().uniAppRunningBackend}e.exports=m,m.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},m.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},m.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},a(m.prototype),m.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},m.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},m.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},m.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},m.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},m.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},m.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},m.prototype.open=m.prototype.connect=function(e){if(this.readyState,~this.readyState.indexOf("open"))return this;this.uri,this.engine=r(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=u(t,"open",function(){n.onopen(),e&&e()}),o=u(t,"error",function(t){if("undefined"!=typeof window){var i=parseInt(n.uri.match(/[1-9][0-9]*/g)[0]),o=h.refreshNumber();n.uri=n.uri.replace(i,o)}if(n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout,a=setTimeout(function(){i.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(i),this.subs.push(o),this},m.prototype.onopen=function(){this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(u(e,"data",l(this,"ondata"))),this.subs.push(u(e,"ping",l(this,"onping"))),this.subs.push(u(e,"pong",l(this,"onpong"))),this.subs.push(u(e,"error",l(this,"onerror"))),this.subs.push(u(e,"close",l(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",l(this,"ondecoded")))},m.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},m.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},m.prototype.ondata=function(e){this.decoder.add(e)},m.prototype.ondecoded=function(e){this.emit("packet",e)},m.prototype.onerror=function(e){this.emitAll("error",e)},m.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new s(this,e,t),this.nsps[e]=n;var i=this;n.on("connecting",o),n.on("connect",function(){n.id=i.generateId(e)}),this.autoConnect&&o()}function o(){~d(i.connecting,n)||i.connecting.push(n)}return n},m.prototype.destroy=function(e){var t=d(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},m.prototype.packet=function(e){var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var i=0;i<n.length;i++)t.engine.write(n[i],e.options);t.encoding=!1,t.processPacketQueue()}))},m.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},m.prototype.cleanup=function(){for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},m.prototype.close=m.prototype.disconnect=function(){this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},m.prototype.onclose=function(e){this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},m.prototype.reconnect=function(){if(g(),this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||(g()?(e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error","Uniapp running backend, skipped reconnect...")):e.open(function(t){t?(e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):e.onreconnect()})))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},m.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){var i=n(250),o=n(263);t.polling=function(e){var t=!1,n=!1;if(e.jsonp,"undefined"!=typeof location){var o="https:"===location.protocol,r=location.port;r||(r=o?443:80),t=e.hostname!==location.hostname||r!==e.port,n=e.secure!==o}return e.xdomain=t,e.xscheme=n,new i(e)},t.websocket=o},function(e){function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<i.length;o++)if((n=i[o])===t||n.fn===t){i.splice(o,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var i=0,o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e){var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,o={},r=0,s=0;function a(e){var t="";do{t=n[e%i]+t,e=Math.floor(e/i)}while(e>0);return t}function c(){var e=a(+new Date);return e!==t?(r=0,t=e):e+"."+a(r++)}for(;s<i;s++)o[n[s]]=s;c.encode=a,c.decode=function(e){var t=0;for(s=0;s<e.length;s++)t=t*i+o[e.charAt(s)];return t},e.exports=c},function(e,t,n){var i,o=(i=n(20))&&i.__esModule?i:{default:i},r=n(74),s=n(116),a=n(267),c=n(117),u=n(118),l=(n(53)("socket.io-client:socket"),n(268)),d=n(269);e.exports=p;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=s.prototype.emit;function p(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}s(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[c(e,"open",u(this,"onopen")),c(e,"packet",u(this,"onpacket")),c(e,"close",u(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},p.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},p.prototype.emit=function(e){if(f.hasOwnProperty(e))return h.apply(this,arguments),this;var t=a(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:d(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(this.ids,this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},p.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},p.prototype.onopen=function(){if("/"!==this.nsp)if(this.query){var e="object"===(0,o.default)(this.query)?l.encode(this.query):this.query;this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},p.prototype.onclose=function(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},p.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===r.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},p.prototype.onevent=function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},p.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=a(arguments);t.packet({type:d(i)?r.BINARY_ACK:r.ACK,id:e,data:i})}}},p.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(e.id,e.data,t.apply(this,e.data),delete this.acks[e.id]):e.id},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},p.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){this.nsp,this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(this.nsp,this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(e){return this.flags.compress=e,this},p.prototype.binary=function(e){return this.flags.binary=e,this}},function(e){function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<i.length;o++)if((n=i[o])===t||n.fn===t){i.splice(o,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var i=0,o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e){var t=[].slice;e.exports=function(e,n){if("string"==typeof n&&(n=e[n]),"function"!=typeof n)throw new Error("bind() requires a function");var i=t.call(arguments,2);return function(){return n.apply(e,i.concat(t.call(arguments)))}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.uniApp=void 0;var i=s(n(0)),o=s(n(1)),r=n(2);function s(e){return e&&e.__esModule?e:{default:e}}var a=new(function(){function e(){(0,i.default)(this,e),this.overrided=!1}return(0,o.default)(e,[{key:"overrideUniShowHideMethods",value:function(){if(r.env.isUni()&&!this.overrided&&getApp()&&void 0!==getApp().$options){this.overrided=!0;var e=getApp().$options;if(void 0!==e.onShow){var t=e.onShow[0];e.onShow[0]=function(){getApp().uniAppRunningBackend=!1,t&&t.call(e)}}if(void 0!==e.onHide){var n=e.onHide[0];e.onHide[0]=function(){getApp().uniAppRunningBackend=!0,n&&n.call(e)}}}}},{key:"runningBackend",value:function(){return getApp().uniAppRunningBackend}}]),e}());t.uniApp=a},function(e,t,n){var i=r(n(121)),o=r(n(276));function r(e){return e&&e.__esModule?e:{default:e}}i.default.version=o.default.version,e.exports=i.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=m(n(122)),o=m(n(0)),r=m(n(1)),s=m(n(131)),a=m(n(171)),c=n(29),u=n(15),l=n(25),d=m(n(28)),f=m(n(236)),h=n(2),p=n(67);function m(e){return e&&e.__esModule?e:{default:e}}var g=function(){function e(t){if((0,o.default)(this,e),this.goEasySocket=null,this.pubsub=null,this.im=null,null!==e.instance&&e.instance.getConnectionStatus()!==d.default.DISCONNECTED)return e.instance;this.validateOptions(t),this.setUriAndOpts(t),this.options=t,this.options.artifactVersion=e.version,this.pubsub=new s.default(t),this.im=new a.default(t)}return(0,r.default)(e,[{key:"connect",value:function(e){this.getConnectionStatus()!==d.default.DISCONNECTED&&h.calibrator.isObject(e)&&h.calibrator.isFunction(e.onFailed)?e.onFailed({code:408,content:"It is already connected, don't try again until disconnect() is called. "}):(this.extendOptions(e),this.pubsub.initialBeforeConnect(),this.im.initialBeforeConnect({id:e.id,data:e.data}),this.goEasySocket=new f.default(this.options),this.im.initialGoEasySocket(this.goEasySocket),this.goEasySocket.connect(),this.pubsub.initialGoEasySocket(this.goEasySocket),this.im.initialAfterConnect())}},{key:"disconnect",value:function(e){this.goEasySocket.disconnect(e).then(function(){h.calibrator.isObject(e)&&h.calibrator.isFunction(e.onSuccess)&&e.onSuccess()}).catch(function(t){h.calibrator.isObject(e)&&h.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"getConnectionStatus",value:function(){return this.goEasySocket?this.goEasySocket.getStatus():d.default.DISCONNECTED}},{key:"validateOptions",value:function(e){var t="";if(!h.calibrator.isObject(e))throw t="options is require an object.",Error(t);if(!h.calibrator.isPrimitive(e.appkey)||0==e.appkey.length)throw t="Invalid options:'host' is empty.",Error(t);if(!h.calibrator.isPrimitive(e.host)||0==e.host.length)throw t="Invalid options:'host' is empty.",Error(t);if(!h.calibrator.isArray(e.modules))throw t="Invalid options: 'modules' must be nonempty array",Error(t);var n=(0,i.default)(p.ModuleType),o=e.modules.map(function(e){var i=e.toUpperCase();if(!n.includes(i))throw t="Invalid options: module '"+e+"' is not support",Error(t);return i});e.modules=o}},{key:"extendOptions",value:function(e){if(h.calibrator.isFunction(e.onSuccess)?this.options.onSuccess=e.onSuccess:this.options.onSuccess=h.noop,h.calibrator.isFunction(e.onFailed)?this.options.onFailed=e.onFailed:this.options.onFailed=h.noop,h.calibrator.isFunction(e.onProgress)?this.options.onProgress=e.onProgress:this.options.onProgress=h.noop,!this.options.modules.includes(p.ModuleType.IM)||!h.calibrator.isEmpty(e.id)&&h.calibrator.isStringOrNumber(e.id)){var t="anonymous-"+Math.floor(1e5*Math.random()+1);this.options.id=e.id||t}else if(h.calibrator.isObject(e)&&h.calibrator.isFunction(e.onFailed))throw{code:400,content:"TypeError: id requires number or string."};if(h.calibrator.isDef(e.data)&&!h.calibrator.isObject(e.data))throw{code:400,content:"TypeError: data requires an object."};if((h.calibrator.isDef(e.data)?String(e.data).length:0)>300){if(h.calibrator.isObject(e)&&h.calibrator.isFunction(e.onFailed))throw{code:400,content:"user.data-length limit 300 byte."}}else this.options.data=e.data;h.calibrator.isDef(e.otp)&&(this.options.otp=e.otp)}},{key:"setUriAndOpts",value:function(e){var t="://"+h.GoEasyDomainNumber.refreshNumber()+e.host;if(h.env.isBrowserClient()){var n=void 0;!0===e.supportOldBrowser?(n=["polling","websocket"],e.forceTLS=!1):n=["websocket"],!1===e.forceTLS?e.uri="http"+t+":80":e.uri="https"+t+":443",e.opts={transports:n,timeout:u.SocketTimeout.connect}}else e.uri="https://wx-"+e.host+":443",e.opts={transports:["websocket"],reconnectionDelayMax:u.SocketTimeout.reconnectionDelayMax}}}],[{key:"getInstance",value:function(t){return null===e.instance&&(e.instance=new e(t)),e.instance}}]),e}();g.IM_EVENT=c.ImEventType,g.IM_SCENE=l.ConversationType,g.version="2.0.0",g.instance=null,t.default=g},function(e,t,n){e.exports={default:n(123),__esModule:!0}},function(e,t,n){n(124),e.exports=n(7).Object.values},function(e,t,n){var i=n(16),o=n(125)(!1);i(i.S,"Object",{values:function(e){return o(e)}})},function(e,t,n){var i=n(18),o=n(31),r=n(24),s=n(38).f;e.exports=function(e){return function(t){for(var n,a=r(t),c=o(a),u=c.length,l=0,d=[];u>l;)n=c[l++],i&&!s.call(a,n)||d.push(e?[n,a[n]]:a[n]);return d}}},function(e,t,n){var i=n(24),o=n(82),r=n(127);e.exports=function(e){return function(t,n,s){var a,c=i(t),u=o(c.length),l=r(s,u);if(e&&n!=n){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var i=n(57),o=Math.max,r=Math.min;e.exports=function(e,t){return(e=i(e))<0?o(e+t,0):r(e,t)}},function(e,t,n){e.exports={default:n(129),__esModule:!0}},function(e,t,n){n(130);var i=n(7).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(16);i(i.S+i.F*!n(18),"Object",{defineProperty:n(22).f})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(0)),o=d(n(1)),r=d(n(132)),s=d(n(165)),a=d(n(166)),c=d(n(167)),u=d(n(169)),l=n(67);function d(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){(0,i.default)(this,e),this.goEasySocket=null,this.publisher=null,this.subscriber=null,this.presence=null,this.histories=null,this.options=null,this.hereNows=null,this.neverConnect=!0,this.options=t}return(0,o.default)(e,[{key:"initialGoEasySocket",value:function(e){this.goEasySocket=e,this.subscriber.initialGoEasySocket(),this.presence.initialGoEasySocket()}},{key:"initialBeforeConnect",value:function(){this.neverConnect=!1,this.publisher=new a.default(this),this.subscriber=new c.default(this),this.histories=new r.default(this),this.presence=new u.default(this),this.hereNows=new s.default(this)}},{key:"validateOptions",value:function(){var e=this.options;if(!e.modules||!e.modules.includes(l.ModuleType.PUBSUB))throw Error("Invalid options: module '"+l.ModuleType.PUBSUB+"' is not enabled")}},{key:"publish",value:function(e){this.validateOptions(),this.publisher.publish(e)}},{key:"subscribe",value:function(e){this.validateOptions(),this.subscriber.subscribe(e)}},{key:"unsubscribe",value:function(e){this.validateOptions(),this.subscriber.unsubscribe(e)}},{key:"subscribePresence",value:function(e){this.validateOptions(),this.presence.subscribePresence(e)}},{key:"unsubscribePresence",value:function(e){this.validateOptions(),this.presence.unsubscribePresence(e)}},{key:"history",value:function(e){this.validateOptions(),this.histories.get(e)}},{key:"hereNow",value:function(e){this.validateOptions(),this.hereNows.byChannel(e)}},{key:"hereNowByUserIds",value:function(e){this.validateOptions(),this.hereNows.byUserId(e)}}]),e}();f.instance=null,t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(0)),o=l(n(1)),r=n(2),s=n(11),a=l(n(10)),c=l(n(8)),u=n(15);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){(0,i.default)(this,e),this.pubSub=null,this.pubSub=t}return(0,o.default)(e,[{key:"get",value:function(e){if(r.calibrator.isFunction(e.onSuccess)||(e.onSuccess=r.noop),r.calibrator.isFunction(e.onFailed)||(e.onFailed=r.noop),r.calibrator.isDef(e.channel)){r.calibrator.isNumber(e.channel)&&(e.channel=e.channel.toString());var t=new a.default({name:s.EmitType.historyMessages,permission:c.default.READ,params:e,singleTimeout:u.SocketTimeout.commonQuerySingle,totalTimeout:u.SocketTimeout.commonQueryTotal,success:function(t){e.onSuccess({code:t.resultCode||t.code||200,content:t.content})},fail:function(t){e.onFailed({code:t.resultCode||t.code,content:t.content})}});this.pubSub.goEasySocket.emit(t)}else e.onFailed(res)}}]),e}();t.default=d},function(e,t,n){e.exports={default:n(134),__esModule:!0}},function(e,t,n){n(84),n(89),e.exports=n(62).f("iterator")},function(e,t,n){var i=n(57),o=n(56);e.exports=function(e){return function(t,n){var r,s,a=String(o(t)),c=i(n),u=a.length;return c<0||c>=u?e?"":void 0:(r=a.charCodeAt(c))<55296||r>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):r:e?a.slice(c,c+2):s-56320+(r-55296<<10)+65536}}},function(e,t,n){var i=n(61),o=n(45),r=n(47),s={};n(26)(s,n(14)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(s,{next:o(1,n)}),r(e,t+" Iterator")}},function(e,t,n){var i=n(22),o=n(19),r=n(31);e.exports=n(18)?Object.defineProperties:function(e,t){o(e);for(var n,s=r(t),a=s.length,c=0;a>c;)i.f(e,n=s[c++],t[n]);return e}},function(e,t,n){var i=n(139),o=n(140),r=n(39),s=n(24);e.exports=n(85)(Array,"Array",function(e,t){this._t=s(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),r.Arguments=r.Array,i("keys"),i("values"),i("entries")},function(e){e.exports=function(){}},function(e){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(142),__esModule:!0}},function(e,t,n){n(143),n(91),n(148),n(149),e.exports=n(7).Symbol},function(e,t,n){var i=n(13),o=n(27),r=n(18),s=n(16),a=n(86),c=n(144).KEY,u=n(30),l=n(59),d=n(47),f=n(46),h=n(14),p=n(62),m=n(63),g=n(145),y=n(146),v=n(19),_=n(23),b=n(40),C=n(24),S=n(55),w=n(45),k=n(61),T=n(147),M=n(65),A=n(64),P=n(22),E=n(31),O=M.f,N=P.f,R=T.f,F=i.Symbol,I=i.JSON,x=I&&I.stringify,G=h("_hidden"),B=h("toPrimitive"),D={}.propertyIsEnumerable,L=l("symbol-registry"),z=l("symbols"),W=l("op-symbols"),j=Object.prototype,H="function"==typeof F&&!!A.f,U=i.QObject,J=!U||!U.prototype||!U.prototype.findChild,q=r&&u(function(){return 7!=k(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=O(j,t);i&&delete j[t],N(e,t,n),i&&e!==j&&N(j,t,i)}:N,Q=function(e){var t=z[e]=k(F.prototype);return t._k=e,t},Y=H&&"symbol"==typeof F.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof F},V=function e(t,n,i){return t===j&&e(W,n,i),v(t),n=S(n,!0),v(i),o(z,n)?(i.enumerable?(o(t,G)&&t[G][n]&&(t[G][n]=!1),i=k(i,{enumerable:w(0,!1)})):(o(t,G)||N(t,G,w(1,{})),t[G][n]=!0),q(t,n,i)):N(t,n,i)},X=function(e,t){v(e);for(var n,i=g(t=C(t)),o=0,r=i.length;r>o;)V(e,n=i[o++],t[n]);return e},K=function(e){var t=D.call(this,e=S(e,!0));return!(this===j&&o(z,e)&&!o(W,e))&&(!(t||!o(this,e)||!o(z,e)||o(this,G)&&this[G][e])||t)},$=function(e,t){if(e=C(e),t=S(t,!0),e!==j||!o(z,t)||o(W,t)){var n=O(e,t);return!n||!o(z,t)||o(e,G)&&e[G][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=R(C(e)),i=[],r=0;n.length>r;)o(z,t=n[r++])||t==G||t==c||i.push(t);return i},ee=function(e){for(var t,n=e===j,i=R(n?W:C(e)),r=[],s=0;i.length>s;)!o(z,t=i[s++])||n&&!o(j,t)||r.push(z[t]);return r};H||(a((F=function(){if(this instanceof F)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function t(n){this===j&&t.call(W,n),o(this,G)&&o(this[G],e)&&(this[G][e]=!1),q(this,e,w(1,n))};return r&&J&&q(j,e,{configurable:!0,set:t}),Q(e)}).prototype,"toString",function(){return this._k}),M.f=$,P.f=V,n(90).f=T.f=Z,n(38).f=K,A.f=ee,r&&!n(37)&&a(j,"propertyIsEnumerable",K,!0),p.f=function(e){return Q(h(e))}),s(s.G+s.W+s.F*!H,{Symbol:F});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)h(te[ne++]);for(var ie=E(h.store),oe=0;ie.length>oe;)m(ie[oe++]);s(s.S+s.F*!H,"Symbol",{for:function(e){return o(L,e+="")?L[e]:L[e]=F(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in L)if(L[t]===e)return t},useSetter:function(){J=!0},useSimple:function(){J=!1}}),s(s.S+s.F*!H,"Object",{create:function(e,t){return void 0===t?k(e):X(k(e),t)},defineProperty:V,defineProperties:X,getOwnPropertyDescriptor:$,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var re=u(function(){A.f(1)});s(s.S+s.F*re,"Object",{getOwnPropertySymbols:function(e){return A.f(b(e))}}),I&&s(s.S+s.F*(!H||u(function(){var e=F();return"[null]"!=x([e])||"{}"!=x({a:e})||"{}"!=x(Object(e))})),"JSON",{stringify:function(e){for(var t,n,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=t=i[1],(_(t)||void 0!==e)&&!Y(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),i[1]=t,x.apply(I,i)}}),F.prototype[B]||n(26)(F.prototype,B,F.prototype.valueOf),d(F,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(e,t,n){var i=n(46)("meta"),o=n(23),r=n(27),s=n(22).f,a=0,c=Object.isExtensible||function(){return!0},u=!n(30)(function(){return c(Object.preventExtensions({}))}),l=function(e){s(e,i,{value:{i:"O"+ ++a,w:{}}})},d=e.exports={KEY:i,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,i)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[i].i},getWeak:function(e,t){if(!r(e,i)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[i].w},onFreeze:function(e){return u&&d.NEED&&c(e)&&!r(e,i)&&l(e),e}}},function(e,t,n){var i=n(31),o=n(64),r=n(38);e.exports=function(e){var t=i(e),n=o.f;if(n)for(var s,a=n(e),c=r.f,u=0;a.length>u;)c.call(e,s=a[u++])&&t.push(s);return t}},function(e,t,n){var i=n(36);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(24),o=n(90).f,r={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==r.call(e)?function(e){try{return o(e)}catch(t){return s.slice()}}(e):o(i(e))}},function(e,t,n){n(63)("asyncIterator")},function(e,t,n){n(63)("observable")},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.UUID=void 0;var i=s(n(0)),o=s(n(1)),r=s(n(151));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,null,[{key:"get",value:function(){return(0,r.default)().replace(/-/g,"")}}]),e}();t.UUID=a},function(e,t,n){var i,o,r=n(152),s=n(153),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],d=(e=e||{}).node||i,f=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==f){var h=r();null==d&&(d=i=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==f&&(f=o=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=p-a+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||p>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=m,o=f;var y=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;l[u++]=y>>>24&255,l[u++]=y>>>16&255,l[u++]=y>>>8&255,l[u++]=255&y;var v=p/4294967296*1e4&268435455;l[u++]=v>>>8&255,l[u++]=255&v,l[u++]=v>>>24&15|16,l[u++]=v>>>16&255,l[u++]=f>>>8|128,l[u++]=255&f;for(var _=0;_<6;++_)l[u+_]=d[_];return t||s(l)}},function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e){for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var i=n||0,o=t;return[o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],"-",o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]],o[e[i++]]].join("")}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.goEasyArray=void 0;var i=c(n(3)),o=c(n(0)),r=c(n(1)),s=c(n(4)),a=c(n(5));function c(e){return e&&e.__esModule?e:{default:e}}var u=new(function(e){function t(){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),(0,r.default)(t,[{key:"deleteByKey",value:function(e,t,n){var i=e.findIndex(function(e){return e[t]==n});i>-1&&e.splice(i,1)}},{key:"unshiftGuid",value:function(e){var t=!1,n=this.findIndex(function(t){return t==e});for(n>-1&&(t=!0,this.splice(n,1)),this.unshift(e);this.length>300;)this.pop();return t}}]),t}(Array));t.goEasyArray=u},function(e,t,n){n(156),e.exports=n(7).Object.getPrototypeOf},function(e,t,n){var i=n(40),o=n(88);n(66)("getPrototypeOf",function(){return function(e){return o(i(e))}})},function(e,t,n){e.exports={default:n(158),__esModule:!0}},function(e,t,n){n(159),e.exports=n(7).Object.setPrototypeOf},function(e,t,n){var i=n(16);i(i.S,"Object",{setPrototypeOf:n(160).set})},function(e,t,n){var i=n(23),o=n(19),r=function(e,t){if(o(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{(i=n(35)(Function.call,n(65).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,n){return r(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:r}},function(e,t,n){n(162);var i=n(7).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){var i=n(16);i(i.S,"Object",{create:n(61)})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.storage=void 0;var i=r(n(0)),o=r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}var s=new(function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"getCookie",value:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null}},{key:"getData",value:function(e){return window.localStorage?window.localStorage.getItem(e):this.getCookie(e)}},{key:"setCookie",value:function(e,t){var n=new Date;n.setTime(n.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()}},{key:"setData",value:function(e,t){window.localStorage?window.localStorage.setItem(e,t):this.setCookie(e,t)}}]),e}());t.storage=s},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={maxNumber:5}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(0)),o=l(n(1)),r=n(2),s=n(11),a=l(n(10)),c=l(n(8)),u=n(15);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){(0,i.default)(this,e),this.pubSub=null,this.pubSub=t}return(0,o.default)(e,[{key:"byChannel",value:function(e){var t={channels:[],includeUsers:!1,distinct:!1};if(r.calibrator.isFunction(e.onSuccess)||(e.onSuccess=r.noop),r.calibrator.isFunction(e.onFailed)||(e.onFailed=r.noop),Array.isArray(e.channels))for(var n=0;n<e.channels.length;n++){var i=e.channels[n];r.calibrator.isNumber(i)&&(i=i.toString()),t.channels.push(i)}if(0!=t.channels.length){1==e.includeUsers&&(t.includeUsers=!0),1==e.distinct&&(t.distinct=!0);var o=new a.default({name:s.EmitType.hereNow,permission:c.default.READ,params:t,singleTimeout:u.SocketTimeout.commonQuerySingle,totalTimeout:u.SocketTimeout.commonQueryTotal,success:function(t){var n=t.content,i=n.channels;for(var o in i)if(i.hasOwnProperty(o)){var r=i[o];r.users=r.users.map(function(e){return e.data=JSON.parse(e.data),e})}e.onSuccess({code:t.resultCode||t.code||200,content:n})},fail:function(t){e.onFailed({code:t.resultCode||t.code||200,content:t.content})}});this.pubSub.goEasySocket.emit(o)}else e.onFailed({code:408,content:"channels is required."})}},{key:"byUserId",value:function(e){var t={userIds:[],distinct:!0};if(r.calibrator.isFunction(e.onSuccess)||(e.onSuccess=r.noop),r.calibrator.isFunction(e.onFailed)||(e.onFailed=r.noop),r.calibrator.isDef(e.userIds)&&(t.userIds=e.userIds),0==e.distinct&&(t.distinct=!1),0===t.userIds.length)e.onFailed({code:400,content:"userIds is required"});else if(t.userIds.length>500)e.onFailed({code:400,content:"userIds is over max length 500"});else{var n=new a.default({name:s.EmitType.hereNowByUserIds,permission:c.default.READ,params:t,singleTimeout:u.SocketTimeout.commonQuerySingle,totalTimeout:u.SocketTimeout.commonQueryTotal,success:function(t){var n=t.content;n=n.map(function(e){var t={};return t.id=e.userId,t.data=e.userData?JSON.parse(e.userData):{},t}),e.onSuccess({code:t.resultCode||t.code||200,content:n})},fail:function(t){e.onFailed({code:t.resultCode||t.code||200,content:t.content})}});this.pubSub.goEasySocket.emit(n)}}}]),e}();t.default=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(0)),o=l(n(1)),r=n(2),s=l(n(10)),a=n(11),c=l(n(8)),u=n(15);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){(0,i.default)(this,e),this.pubSub=null,this.pubSub=t}return(0,o.default)(e,[{key:"publish",value:function(e){if(r.calibrator.isFunction(e.onFailed)||(e.onFailed=r.noop),r.calibrator.isFunction(e.onSuccess)||(e.onSuccess=r.noop),r.calibrator.isEmpty(e.channel))throw{code:400,content:"channel is required."};if(r.calibrator.isNumber(e.channel)&&(e.channel=e.channel.toString()),r.calibrator.isEmpty(e.message))throw{code:400,content:"message is required."};if(r.calibrator.isNumber(e.message)&&(e.message=e.message.toString()),!r.calibrator.isString(e.message))throw{code:400,content:"TypeError: message requires string."};if(r.calibrator.isObject(e.notification)){if(r.calibrator.isEmpty(e.notification.title))throw{code:400,content:"notification.title is required."};if(!r.calibrator.isString(e.notification.title))throw{code:400,content:"TypeError: notification.title requires string."};if(e.notification.title.length>32)throw{code:400,content:"TypeError: notification.title over max length 32."};if(r.calibrator.isEmpty(e.notification.body))throw{code:400,content:"notification.body is required."};if(!r.calibrator.isString(e.notification.body))throw{code:400,content:"TypeError: notification.body must be string."};if(e.notification.body.length>50)throw{code:400,content:"notification.body over max length 50."}}else if(r.calibrator.isPrimitive(e.notification))throw{code:400,content:"TypeError: notification requires an object."};var t={channel:e.channel,content:e.message,nt:e.notification,guid:r.UUID.get()},n=new s.default({name:a.EmitType.publish,params:t,singleTimeout:u.SocketTimeout.commonRequestSingle,totalTimeout:u.SocketTimeout.commonRequestTotal,permission:c.default.WRITE,success:function(){e.onSuccess({code:200,content:"ok"})},fail:function(t){e.onFailed({code:t.resultCode,content:t.content})}});this.pubSub.goEasySocket.emit(n)}}]),e}();t.default=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=h(n(0)),o=h(n(1)),r=n(2),s=h(n(10)),a=n(11),c=h(n(8)),u=h(n(168)),l=h(n(41)),d=n(15),f=h(n(28));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(t){(0,i.default)(this,e),this.subscriptions=[],this.pubSub=null,this.pubSub=t}return(0,o.default)(e,[{key:"initialGoEasySocket",value:function(){var e=this.pubSub.goEasySocket;e.addMessageObserver(l.default.message,this.onNewMessage.bind(this)),e.addExpiredReconnectedObserver(this.onExpiredReconnected.bind(this)),e.addConnectedObserver(this.onReconnected.bind(this))}},{key:"resubscribe",value:function(){var e=this.subscriptions.slice(0);this.subscriptions=[];for(var t=0;t<e.length;t++)0!=e[t].channels.length&&this.subscribe(e[t])}},{key:"onExpiredReconnected",value:function(){this.resubscribe()}},{key:"onReconnected",value:function(){this.pubSub.neverConnect||this.pubSub.goEasySocket.status==f.default.RECONNECTED||this.resubscribe()}},{key:"onNewMessage",value:function(e){if(!(e.n.indexOf("_presence")>-1)){e.a&&this.pubSub.goEasySocket.sendAck("ack",{publishGuid:e.i});var t={time:e.t,channel:e.n,content:e.c};this.findSubscriptionByChannel(t.channel).onMessage(t)}}},{key:"formatOptions",value:function(e){var t=!r.calibrator.isEmpty(e.channel),n=!r.calibrator.isEmpty(e.channels);if(this.formatCallback(e),r.calibrator.isFunction(e.onMessage)||(e.onMessage=r.noop),!t&&!n)return e.onFailed({code:400,content:"channel is required"}),!1;if(!t||!n){if(t&&(r.calibrator.isNumber(e.channel)&&(e.channel=e.channel.toString()),e.channels=[e.channel]),n){if(!Array.isArray(e.channels)||0==e.channels.length)return void e.onFailed({code:400,content:"channels must be an array"});if(e.channels.length>500)return e.onFailed({code:400,content:"channels over max length:500"}),!1;for(var i=0,o=e.channels.length;i<o;i++)if(r.calibrator.isNumber(e.channels[i])&&(e.channels[i]=e.channels[i].toString()),r.calibrator.isEmpty(e.channels[i]))return e.onFailed({code:400,content:"Channels array contains empty channel"}),!1}return!0}e.onFailed({code:400,content:"subscribe to either channel or channels, not both"})}},{key:"formatCallback",value:function(e){r.calibrator.isFunction(e.onSuccess)||(e.onSuccess=r.noop),r.calibrator.isFunction(e.onFailed)||(e.onFailed=r.noop)}},{key:"subscribe",value:function(e){var t=this;if(this.formatOptions(e)){var n=new s.default({name:a.EmitType.subscribe,permission:c.default.READ,singleTimeout:d.SocketTimeout.commonInfiniteSingle,totalTimeout:d.SocketTimeout.commonInfiniteTotal,params:{channels:e.channels},success:function(){var n=new u.default({channels:e.channels,onSuccess:e.onSuccess,onFailed:e.onFailed,onMessage:e.onMessage});t.subscriptions.push(n),e.onSuccess({code:200,content:"ok"})},fail:function(t){e.onFailed({code:t.resultCode,content:t.content})}});this.pubSub.goEasySocket.emit(n)}}},{key:"unsubscribe",value:function(e){var t=this;if(this.formatCallback(e),r.calibrator.isDef(e.channel))if(r.calibrator.isNumber(e.channel)&&(e.channel=e.channel.toString()),this.findSubscriptionByChannel(e.channel)){var n=new s.default({name:a.EmitType.unsubscribe,params:{channel:e.channel},permission:c.default.READ,singleTimeout:d.SocketTimeout.commonRequestSingle,totalTimeout:d.SocketTimeout.commonRequestTotal,success:function(){e.onSuccess({code:200,content:"ok"}),t.removeChannel(e.channel)},fail:function(t){e.onFailed({code:t.resultCode,content:t.content})}});this.pubSub.goEasySocket.emit(n)}else e.onFailed({code:400,content:"channel["+e.channel+"] is not subscribed"});else e.onFailed({code:400,content:"channel is required"})}},{key:"removeChannel",value:function(e){for(var t=0;t<this.subscriptions.length;t++)for(var n=this.subscriptions[t].channels,i=0;i<n.length;i++)if(n[i]==e){this.subscriptions[t].channels.splice(i,1);break}}},{key:"findSubscriptionByChannel",value:function(e){for(var t=!1,n=null,i=this.subscriptions.length-1;i>=0;i--){for(var o=this.subscriptions[i].channels,r=0;r<o.length;r++)if(o[r]==e){t=!0,n=this.subscriptions[i];break}if(t)break}return n}}]),e}();t.default=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0)),o=r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){(0,i.default)(this,e),this.channels=[],this.onSuccess=null,this.onFailed=null,this.onMessage=null,this.channels=t.channels,this.onSuccess=t.onSuccess,this.onFailed=t.onFailed,this.onMessage=t.onMessage}return(0,o.default)(e,[{key:"empty",value:function(){}}]),e}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=h(n(0)),o=h(n(1)),r=n(2),s=h(n(10)),a=n(11),c=h(n(8)),u=n(15),l=h(n(41)),d=h(n(170)),f=h(n(28));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(t){(0,i.default)(this,e),this.presenters=[],this.pubSub=null,this.pubSub=t}return(0,o.default)(e,[{key:"initialGoEasySocket",value:function(){var e=this.pubSub.goEasySocket;e.addMessageObserver(l.default.message,this.onNewMessage.bind(this)),e.addExpiredReconnectedObserver(this.onExpiredReconnected.bind(this)),e.addConnectedObserver(this.onReconnected.bind(this))}},{key:"resubscribe",value:function(){var e=this.presenters.slice(0);this.presenters=[];for(var t=0;t<e.length;t++){for(var n=0;n<e[t].channels.length;n++){var i=e[t].channels[n].split("_presence");e[t].channels[n]=i[0]}0!=e[t].channels.length&&this.subscribePresence(e[t])}}},{key:"onExpiredReconnected",value:function(){this.resubscribe()}},{key:"onReconnected",value:function(){this.pubSub.neverConnect||this.pubSub.goEasySocket.status==f.default.RECONNECTED||this.resubscribe()}},{key:"onNewMessage",value:function(e){if(-1!=e.n.indexOf("_presence")){var t=this.findPresenceByChannel(e.n);if(t){var n=JSON.parse(e.c);n.events=n.events.map(function(e){var t=e.userData?JSON.parse(e.userData):{};return{time:e.time,action:e.action,id:e.userId,data:t}}),t.onPresence(n)}}}},{key:"formatOptions",value:function(e){var t=!r.calibrator.isEmpty(e.channel),n=!r.calibrator.isEmpty(e.channels);if(this.formatCallback(e),r.calibrator.isFunction(e.onPresence)||(e.onPresence=r.noop),!t&&!n)return e.onFailed({code:400,content:"channel is required"}),!1;if(!t||!n){if(t&&(r.calibrator.isNumber(e.channel)&&(e.channel=e.channel.toString()),e.channels=[e.channel]),n){if(!Array.isArray(e.channels)||0==e.channels.length)return void e.onFailed({code:400,content:"channels must be an array"});if(e.channels.length>500)return e.onFailed({code:400,content:"channels over max length:500"}),!1;for(var i=0,o=e.channels.length;i<o;i++)if(r.calibrator.isNumber(e.channels[i])&&(e.channels[i]=e.channels[i].toString()),r.calibrator.isEmpty(e.channels[i]))return e.onFailed({code:400,content:"Channels array contains empty channel"}),!1}return!0}e.onFailed({code:400,content:"subscribe to either channel or channels, not both"})}},{key:"formatCallback",value:function(e){r.calibrator.isFunction(e.onSuccess)||(e.onSuccess=r.noop),r.calibrator.isFunction(e.onFailed)||(e.onFailed=r.noop)}},{key:"subscribePresence",value:function(e){var t=this;if(this.formatOptions(e)){Array.isArray(e.channels)&&(e.channels=e.channels.map(function(e){return e+"_presence"}));var n=new s.default({name:a.EmitType.subscribe,permission:c.default.READ,singleTimeout:u.SocketTimeout.commonInfiniteSingle,totalTimeout:u.SocketTimeout.commonInfiniteTotal,params:{channels:e.channels},success:function(){var n=new d.default({channels:e.channels,onSuccess:e.onSuccess,onFailed:e.onFailed,onPresence:e.onPresence});t.presenters.push(n),e.onSuccess({code:200,content:"ok"})},fail:function(t){e.onFailed({code:t.resultCode,content:t.content})}});this.pubSub.goEasySocket.emit(n)}}},{key:"unsubscribePresence",value:function(e){var t=this;if(this.formatCallback(e),r.calibrator.isDef(e.channel))if(e.channel+="_presence",this.findPresenceByChannel(e.channel)){var n=new s.default({name:a.EmitType.unsubscribe,params:{channel:e.channel},permission:c.default.READ,singleTimeout:u.SocketTimeout.commonRequestSingle,totalTimeout:u.SocketTimeout.commonRequestTotal,success:function(){e.onSuccess({code:200,content:"ok"}),t.removeChannel(e.channel)},fail:function(t){e.onFailed({code:t.resultCode,content:t.content})}});this.pubSub.goEasySocket.emit(n)}else e.onFailed({code:400,content:"channel["+e.channel+"] is not subscribed"});else e.onFailed({code:400,content:"channel is required"})}},{key:"removeChannel",value:function(e){for(var t=0;t<this.presenters.length;t++)for(var n=this.presenters[t].channels,i=0;i<n.length;i++)if(n[i]==e){this.presenters[t].channels.splice(i,1);break}}},{key:"findPresenceByChannel",value:function(e){for(var t=!1,n=null,i=this.presenters.length-1;i>=0;i--){for(var o=this.presenters[i].channels,r=0;r<o.length;r++)if(o[r]==e){t=!0,n=this.presenters[i];break}if(t)break}return n}}]),e}();t.default=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0)),o=r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){(0,i.default)(this,e),this.channels=[],this.onSuccess=null,this.onFailed=null,this.onPresence=null,this.channels=t.channels,this.onSuccess=t.onSuccess,this.onFailed=t.onFailed,this.onPresence=t.onPresence}return(0,o.default)(e,[{key:"empty",value:function(){}}]),e}();t.default=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(94)),o=u(n(0)),r=u(n(1)),s=u(n(42)),a=n(2),c=n(67);function u(e){return e&&e.__esModule?e:{default:e}}var l=null,d=function(){function e(t){(0,o.default)(this,e),this.options=null,this.options=t,l=new s.default}return(0,r.default)(e,[{key:"initialBeforeConnect",value:function(e){l.initialBeforeConnect(e)}},{key:"initialAfterConnect",value:function(){l.initialAfterConnect()}},{key:"initialGoEasySocket",value:function(e){l.initialGoEasySocket(e)}},{key:"validateOptions",value:function(){var e=this.options;if(!e.modules||!e.modules.includes(c.ModuleType.IM))throw Error("Invalid options: module '"+c.ModuleType.IM+"' is not enabled")}},{key:"validateMessageToData",value:function(e){if(!a.calibrator.isObject(e.to))throw{code:400,content:"TypeError: to requires an object."};if(!a.calibrator.isObject(e.to.data))throw{code:400,content:"TypeError: to.data requires an object."}}},{key:"on",value:function(e,t){this.validateOptions(),l.on(e,t)}},{key:"createTextMessage",value:function(e){if(this.validateOptions(),this.validateMessageToData(e),!a.calibrator.isString(e.text))throw{code:400,content:"TypeError: text requires string."};return l.createTextMessage(e)}},{key:"createImageMessage",value:function(e){return this.validateOptions(),this.validateMessageToData(e),l.createImageMessage(e)}},{key:"createFileMessage",value:function(e){return this.validateOptions(),this.validateMessageToData(e),l.createFileMessage(e)}},{key:"createAudioMessage",value:function(e){return this.validateOptions(),this.validateMessageToData(e),l.createAudioMessage(e)}},{key:"createVideoMessage",value:function(e){return this.validateOptions(),this.validateMessageToData(e),l.createVideoMessage(e)}},{key:"createCustomMessage",value:function(e){if(this.validateOptions(),this.validateMessageToData(e),!a.calibrator.isObject(e.payload))throw{code:400,content:"TypeError: payload requires an object."};return l.createCustomMessage(e)}},{key:"latestConversations",value:function(e){this.validateOptions(),l.latestConversations().then(function(t){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess(t)}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"removePrivateConversation",value:function(e){this.validateOptions(),l.removePrivateConversation(e.userId).then(function(){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess()}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"removeGroupConversation",value:function(e){this.validateOptions(),l.removeGroupConversation(e.groupId).then(function(){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess()}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"history",value:function(e){this.validateOptions();var t=(0,i.default)(e,{friendId:e.userId});l.history(t).then(function(t){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess(t)}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"upload",value:function(e){this.validateOptions(),l.upload(e.file,e.name,e.onProgress).then(function(t){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess(t)}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"sendMessage",value:function(e){this.validateOptions(),l.sendMessage(e.message).then(function(t){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess(t)}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"markGroupMessageAsRead",value:function(e){this.validateOptions(),l.groupMarkAsRead(e.groupId,e.timestamp).then(function(t){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess(t)}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"markPrivateMessageAsRead",value:function(e){this.validateOptions(),l.privateMarkAsRead(e.userId,e.timestamp).then(function(){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess()}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"topPrivateConversation",value:function(e){this.validateOptions(),l.topPrivateConversation(e.userId,e.top).then(function(){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess()}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"topGroupConversation",value:function(e){this.validateOptions(),l.topGroupConversation(e.groupId,e.top).then(function(){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess()}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"subscribeUserPresence",value:function(e){this.validateOptions(),l.subscribeUserPresence(e.userIds).then(function(t){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess(t)}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"unsubscribeUserPresence",value:function(e){this.validateOptions(),l.unsubscribeUserPresence(e.userId).then(function(t){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess(t)}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"hereNow",value:function(e){this.validateOptions(),l.hereNow(e).then(function(t){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess(t)}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"subscribeGroup",value:function(e){this.validateOptions(),l.subscribeGroup(e.groupIds).then(function(t){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess(t)}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"unsubscribeGroup",value:function(e){this.validateOptions(),l.unsubscribeGroup(e.groupId).then(function(t){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess(t)}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"subscribeGroupPresence",value:function(e){this.validateOptions(),l.subscribeGroupPresence(e.groupIds).then(function(t){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess(t)}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"unsubscribeGroupPresence",value:function(e){this.validateOptions(),l.unsubscribeGroupPresence(e.groupId).then(function(t){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess(t)}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"groupHereNow",value:function(e){this.validateOptions(),l.groupHereNow(e.groupId).then(function(t){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess(t)}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}},{key:"groupOnlineCount",value:function(e){this.validateOptions(),l.groupOnlineCount(e.groupId).then(function(t){a.calibrator.isFunction(e.onSuccess)&&e.onSuccess(t)}).catch(function(t){a.calibrator.isFunction(e.onFailed)&&e.onFailed(t)})}}]),e}();t.default=d},function(e,t,n){n(173),e.exports=n(7).Object.assign},function(e,t,n){var i=n(16);i(i.S+i.F,"Object",{assign:n(174)})},function(e,t,n){var i=n(18),o=n(31),r=n(64),s=n(38),a=n(40),c=n(81),u=Object.assign;e.exports=!u||n(30)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=i})?function(e,t){for(var n=a(e),u=arguments.length,l=1,d=r.f,f=s.f;u>l;)for(var h,p=c(arguments[l++]),m=d?o(p).concat(d(p)):o(p),g=m.length,y=0;g>y;)h=m[y++],i&&!f.call(p,h)||(n[h]=p[h]);return n}:u},function(e,t,n){n(91),n(84),n(89),n(176),n(188),n(189),e.exports=n(7).Promise},function(e,t,n){var i,o,r,s,a=n(37),c=n(13),u=n(35),l=n(95),d=n(16),f=n(23),h=n(44),p=n(177),m=n(178),g=n(96),y=n(97).set,v=n(183)(),_=n(68),b=n(98),C=n(184),S=n(99),w=c.TypeError,k=c.process,T=k&&k.versions,M=T&&T.v8||"",A=c.Promise,P="process"==l(k),E=function(){},O=o=_.f,N=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[n(14)("species")]=function(e){e(E,E)};return(P||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t&&0!==M.indexOf("6.6")&&-1===C.indexOf("Chrome/66")}catch(i){}}(),R=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},F=function(e,t){if(!e._n){e._n=!0;var n=e._c;v(function(){for(var i=e._v,o=1==e._s,r=0,s=function(t){var n,r,s,a=o?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{a?(o||(2==e._h&&G(e),e._h=1),!0===a?n=i:(l&&l.enter(),n=a(i),l&&(l.exit(),s=!0)),n===t.promise?u(w("Promise-chain cycle")):(r=R(n))?r.call(n,c,u):c(n)):u(i)}catch(d){l&&!s&&l.exit(),u(d)}};n.length>r;)s(n[r++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){y.call(c,function(){var t,n,i,o=e._v,r=x(e);if(r&&(t=b(function(){P?k.emit("unhandledRejection",o,e):(n=c.onunhandledrejection)?n({promise:e,reason:o}):(i=c.console)&&i.error&&i.error("Unhandled promise rejection",o)}),e._h=P||x(e)?2:1),e._a=void 0,r&&t.e)throw t.v})},x=function(e){return 1!==e._h&&0===(e._a||e._c).length},G=function(e){y.call(c,function(){var t;P?k.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},B=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),F(t,!0))},D=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw w("Promise can't be resolved itself");(n=R(t))?v(function(){var i={_w:r,_d:!1};try{n.call(t,u(e,i,1),u(B,i,1))}catch(o){B.call(i,o)}}):(r._v=t,r._s=1,F(r,!1))}catch(i){B.call({_w:r,_d:!1},i)}}};N||(A=function(e){p(this,A,"Promise","_h"),h(e),i.call(this);try{e(u(D,this,1),u(B,this,1))}catch(t){B.call(this,t)}},(i=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(185)(A.prototype,{then:function(e,t){var n=O(g(this,A));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=P?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&F(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new i;this.promise=e,this.resolve=u(D,e,1),this.reject=u(B,e,1)},_.f=O=function(e){return e===A||e===s?new r(e):o(e)}),d(d.G+d.W+d.F*!N,{Promise:A}),n(47)(A,"Promise"),n(186)("Promise"),s=n(7).Promise,d(d.S+d.F*!N,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(a||!N),"Promise",{resolve:function(e){return S(a&&this===s?A:this,e)}}),d(d.S+d.F*!(N&&n(187)(function(e){A.all(e).catch(E)})),"Promise",{all:function(e){var t=this,n=O(t),i=n.resolve,o=n.reject,r=b(function(){var n=[],r=0,s=1;m(e,!1,function(e){var a=r++,c=!1;n.push(void 0),s++,t.resolve(e).then(function(e){c||(c=!0,n[a]=e,--s||i(n))},o)}),--s||i(n)});return r.e&&o(r.v),n.promise},race:function(e){var t=this,n=O(t),i=n.reject,o=b(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return o.e&&i(o.v),n.promise}})},function(e){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(35),o=n(179),r=n(180),s=n(19),a=n(82),c=n(181),u={},l={};(t=e.exports=function(e,t,n,d,f){var h,p,m,g,y=f?function(){return e}:c(e),v=i(n,d,t?2:1),_=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(r(y)){for(h=a(e.length);h>_;_++)if((g=t?v(s(p=e[_])[0],p[1]):v(e[_]))===u||g===l)return g}else for(m=y.call(e);!(p=m.next()).done;)if((g=o(m,v,p.value,t))===u||g===l)return g}).BREAK=u,t.RETURN=l},function(e,t,n){var i=n(19);e.exports=function(e,t,n,o){try{return o?t(i(n)[0],n[1]):t(n)}catch(s){var r=e.return;throw void 0!==r&&i(r.call(e)),s}}},function(e,t,n){var i=n(39),o=n(14)("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||r[o]===e)}},function(e,t,n){var i=n(95),o=n(14)("iterator"),r=n(39);e.exports=n(7).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||r[i(e)]}},function(e){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(13),o=n(97).set,r=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,c="process"==n(36)(s);e.exports=function(){var e,t,n,u=function(){var i,o;for(c&&(i=s.domain)&&i.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,i&&i.enter()};if(c)n=function(){s.nextTick(u)};else if(!r||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var l=a.resolve(void 0);n=function(){l.then(u)}}else n=function(){o.call(i,u)};else{var d=!0,f=document.createTextNode("");new r(u).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(i){var o={fn:i,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){var i=n(13).navigator;e.exports=i&&i.userAgent||""},function(e,t,n){var i=n(26);e.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:i(e,o,t[o]);return e}},function(e,t,n){var i=n(13),o=n(7),r=n(22),s=n(18),a=n(14)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:i[e];s&&t&&!t[a]&&r.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var i=n(14)("iterator"),o=!1;try{var r=[7][i]();r.return=function(){o=!0},Array.from(r,function(){throw 2})}catch(s){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var r=[7],a=r[i]();a.next=function(){return{done:n=!0}},r[i]=function(){return a},e(r)}catch(s){}return n}},function(e,t,n){var i=n(16),o=n(7),r=n(13),s=n(96),a=n(99);i(i.P+i.R,"Promise",{finally:function(e){var t=s(this,o.Promise||r.Promise),n="function"==typeof e;return this.then(n?function(n){return a(t,e()).then(function(){return n})}:e,n?function(n){return a(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){var i=n(16),o=n(68),r=n(98);i(i.S,"Promise",{try:function(e){var t=o.f(this),n=r(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.eventCenter=void 0;var i=c(n(21)),o=c(n(0)),r=c(n(1)),s=n(100),a=n(2);function c(e){return e&&e.__esModule?e:{default:e}}var u=new(function(){function e(){(0,o.default)(this,e),this.subs=null,this.subs=(0,i.default)(null)}return(0,r.default)(e,[{key:"on",value:function(e,t){if(!a.calibrator.isString(e))throw Error("eventType require a string.");if(!a.calibrator.isDef(s.ImEventType[e]))throw Error("event not found.");if(!a.calibrator.isFunction(t))throw Error("event require a callback.");this.subs[e]=t}},{key:"notify",value:function(e,t){var n=this.subs[e];n&&n(t)}}]),e}());t.eventCenter=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Conversations=void 0;var i=v(n(6)),o=v(n(94)),r=v(n(0)),s=v(n(1)),a=n(101),c=v(n(42)),u=n(29),l=n(69),d=v(n(10)),f=v(n(8)),h=n(32),p=n(11),m=n(2),g=v(n(48)),y=v(n(49));function v(e){return e&&e.__esModule?e:{default:e}}t.Conversations=function(){function e(t){(0,r.default)(this,e),this.im=null,this.list=[],this.synchronized=!1,this.im=t,t._iMReceiver.addIMMessageObserver(this.updateByInMessage.bind(this))}return(0,s.default)(e,[{key:"onUpdated",value:function(){var e=this;this.latestConversations().then(function(){e.im._event.notify(u.ImEventType.CONVERSATIONS_UPDATED,{unreadTotal:e.getUnreadTotal(e.list),conversations:e.list.slice(0)})})}},{key:"latestConversations",value:function(){return this.synchronized?this.loadLocalConversations():this.loadServerConversations()}},{key:"updateByInMessage",value:function(e){var t,n=this;t=e.t==l.ConversationType.GROUP?e.r:c.default.userId==e.r?e.s:e.r;var i=this.list.findIndex(function(n){return e.t==l.ConversationType.GROUP&&t==n.groupId||e.t==l.ConversationType.PRIVATE&&t==n.userId}),o=void 0;function r(e){e.type===l.ConversationType.PRIVATE&&(c.default.userId===e.lastMessage.senderId?e.lastMessage.senderData=c.default.userData:e.lastMessage.senderData=e.data)}i>-1?(o=this.list[i],this.list.splice(i,1),o.lc<e.ts&&(o.lastMessage=g.default.assemble(e),o.lm=e.ts),c.default.userId!=e.senderId&&(o.unread+=1),r(o),this.insertOne(o),this.onUpdated()):(o=a.Conversion.buildByInMessage(e),c.default.userId!=e.senderId&&(o.unread+=1),this.insertOne(o),this.im._dataCache.loadData(t,e.t).then(function(e){o.data=e,r(o),n.onUpdated()}).catch(function(){e.t}))}},{key:"updateByOutMessage",value:function(e,t,n,i){var r={};(0,o.default)(r,e),delete r.file;var s=this.list.findIndex(function(e){return e.type==l.ConversationType.GROUP&&n==e.groupId||e.type==l.ConversationType.PRIVATE&&n==e.userId}),u=void 0;s>-1?(u=this.list[s],this.list.splice(s,1),u.unread=0,u.lc=u.lm,u.lastMessage=r,e.status===y.default.success&&(u.lc=e.timestamp,u.lm=e.timestamp)):u=a.Conversion.buildByOutMessage(r,t,n,i),u.data=i;var d=this.im._dataCache;t===l.ConversationType.GROUP?d.putGroupData(u.groupId,i):(d.putUserData(u.userId,i),u.lastMessage.senderData=c.default.userData),this.insertOne(u),this.onUpdated()}},{key:"imLastConversations",value:function(e,t){var n=new d.default({name:p.EmitType.imLastConversations,params:{},permission:f.default.READ,singleTimeout:h.SocketTimeout.commonQuerySingle,totalTimeout:h.SocketTimeout.commonQueryTotal,fail:t,success:e});this.im._goEasySocket.emit(n)}},{key:"loadServerConversations",value:function(){var e=this,t=this.im;return new i.default(function(n,i){e.imLastConversations(function(o){if(200==o.code){for(var r=o.content,s=function(n){var i=r[n],o=e.list.find(function(e){return i.t==l.ConversationType.GROUP&&i.g==e.groupId||i.t==l.ConversationType.PRIVATE&&i.uid==e.userId});m.calibrator.isDef(o)?o.top=i.top:(o=a.Conversion.buildByConversation(t._dataCache,i),e.insertOne(o))},c=0,u=r.length;c<u;c++)s(c);e.synchronized=!0,n({code:200,content:{unreadTotal:e.getUnreadTotal(e.list),conversations:e.list.slice(0)}})}else i(o)},function(e){i({code:e.resultCode,content:e.content})})})}},{key:"loadLocalConversations",value:function(){var e=this,t=[];return this.list.map(function(n){if(!n.data){var i="private"==n.t?n.userId:n.groupId,o=e.im._dataCache.loadData(i,n.t);o.then(function(e){n.data=e}).catch(function(){n.type}),t.push(o)}}),0!=t.length?new i.default(function(n,o){i.default.all(t).then(function(){n({code:200,content:{unreadTotal:e.getUnreadTotal(e.list),conversations:e.list.slice(0)}})}).catch(function(e){o({code:408,content:e.message})})}):i.default.resolve({code:200,content:{unreadTotal:this.getUnreadTotal(this.list),conversations:this.list}})}},{key:"privateMarkAsRead",value:function(e){var t=this.list.find(function(t){return t.userId==e}),n={friendId:e};return this.markAsRead(n,t)}},{key:"groupMarkAsRead",value:function(e){var t=this.list.find(function(t){return t.groupId===e}),n={groupId:e};return this.markAsRead(n,t)}},{key:"markAsRead",value:function(e,t){var n=this;return!t||t.unread<=0?i.default.resolve({code:200,content:"OK"}):(e.lastTimestamp=t.lm,e.lastConsumedTimestamp=t.lc,new i.default(function(i,o){var r=t.type==l.ConversationType.PRIVATE?p.EmitType.markPrivateMessageAsRead:p.EmitType.markGroupMessageAsRead;n.requestEmit(r,e,function(e){200==e.code?(n.resetConversation(t,t.lm,e.content.amount),i({code:200,content:"OK"})):o(e)},function(e){o(e||{code:e.code||408,content:e.content||"Failed to query message"})})}))}},{key:"resetConversation",value:function(e,t,n){t<=e.lc||(e.unread-=n,e.lc=t,this.onUpdated())}},{key:"getUnreadTotal",value:function(e){for(var t=0,n=0,i=e.length;n<i;n++)t+=e[n].unread;return t}},{key:"insertOne",value:function(e){var t=this.getPosIndex(e);this.list.splice(t+1,0,e)}},{key:"getPosIndex",value:function(e){if(0==this.list.length)return-1;for(var t,n,i=0,o=this.list.length;o-i>1;){t=Math.floor((i+o)/2),n=this.list[t];var r=this.compares(e,n);if(0==r)return t;r>0?i=t:o=t}return 0==i&&this.compares(this.list[0],e)>0?-1:i}},{key:"compares",value:function(e,t){var n;return(n=e.top==t.top?t.lastMessage.timestamp-e.lastMessage.timestamp:e.top?-1:1)>0?1:0===n?0:-1}},{key:"removeConversation",value:function(e,t){var n=this,o=t==l.ConversationType.PRIVATE?"userId":"groupId";return m.calibrator.isStringOrNumber(e)?(m.calibrator.isNumber(e)&&(e=e.toString()),-1==this.findConversationIndex(t,e)?i.default.reject({code:400,content:"Failed to remove conversation, "+o+" does not exists."}):new i.default(function(i,o){var r={targetId:e,type:t};n.requestEmit(p.EmitType.removeConversation,r,function(r){var s=n.findConversationIndex(t,e);s>-1&&n.list.splice(s,1),n.onUpdated(),200==r.code?i({}):o({code:r.code||408,content:r.content||"Failed to remove conversation"})},function(e){o({code:e.code||408,content:e.content||"Failed to remove conversation"})})})):i.default.reject({code:400,content:"Failed to remove conversation, "+o+" must be  a string or integer."})}},{key:"topConversation",value:function(e,t,n){var o=this,r=n==l.ConversationType.PRIVATE?"userId":"groupId";if(!m.calibrator.isStringOrNumber(e))return i.default.reject({code:400,content:"Failed to top conversation, "+r+" must be a string or integer."});m.calibrator.isNumber(e)&&(e=e.toString());var s=this.findConversationIndex(n,e);return-1==s||this.list[s].top==t?i.default.reject({code:400,content:"Failed to top conversation, "+r+" does not exists."}):new i.default(function(i,r){var s={targetId:e,top:t,type:n};o.requestEmit(p.EmitType.topConversation,s,function(){var r=o.findConversationIndex(n,e),s=o.list[r];s.top=t,o.list.splice(r,1),o.insertOne(s),o.onUpdated(),i({})},function(e){r({code:e.code||408,content:e.content||"Failed to top Conversation"})})})}},{key:"requestEmit",value:function(e,t,n,i){var o=new d.default({name:e,params:t,permission:f.default.WRITE,singleTimeout:h.SocketTimeout.commonRequestSingle,totalTimeout:h.SocketTimeout.commonRequestTotal,success:n,fail:i});this.im._goEasySocket.emit(o)}},{key:"findConversationIndex",value:function(e,t){return this.list.findIndex(function(n){return e==l.ConversationType.PRIVATE?n.type==e&&n.userId==t:n.type==e&&n.groupId==t})}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.messageCreator=void 0;var i=b(n(0)),o=b(n(1)),r=b(n(50)),s=b(n(197)),a=b(n(198)),c=b(n(199)),u=b(n(51)),l=b(n(200)),d=b(n(201)),f=b(n(202)),h=b(n(203)),p=b(n(204)),m=b(n(205)),g=b(n(102)),y=b(n(103)),v=b(n(52)),_=b(n(206));function b(e){return e&&e.__esModule?e:{default:e}}var C=new(function(){function e(){(0,i.default)(this,e),this.messageTypes={wx:{image:s.default,file:r.default,audio:a.default,video:c.default,text:y.default},uniApp:{image:f.default,file:u.default,audio:l.default,video:d.default,text:y.default},html:{image:h.default,file:v.default,audio:p.default,video:m.default,text:y.default}}}return(0,o.default)(e,[{key:"create",value:function(e,t){var n=g.default.resolve(),i=this.messageTypes[n][e];return i?new i(t):new _.default(t)}}]),e}());t.messageCreator=C},function(e,t,n){e.exports={default:n(194),__esModule:!0}},function(e,t,n){n(195);var i=n(7).Object;e.exports=function(e,t){return i.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var i=n(24),o=n(65).f;n(66)("getOwnPropertyDescriptor",function(){return function(e,t){return o(i(e),t)}})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.str=void 0;var i=s(n(0)),o=s(n(1)),r=n(83);function s(e){return e&&e.__esModule?e:{default:e}}var a=new(function(){function e(){(0,i.default)(this,e)}return(0,o.default)(e,[{key:"fileExtension",value:function(e,t){if(r.calibrator.isString(e))try{var n=e.split(t);return n[n.length-1]}catch(i){throw Error(i)}}}]),e}());t.str=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(3)),o=f(n(0)),r=f(n(1)),s=f(n(4)),a=f(n(12)),c=f(n(5)),u=f(n(50)),l=f(n(9)),d=n(17);function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,c.default)(t,e),(0,r.default)(t,[{key:"validate",value:function(e){if((0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"validate",this).call(this,e),!d.calibrator.isDef(e.file.tempFiles)||0==e.file.tempFiles[0].length)throw Error("tempFiles is empty.")}},{key:"setType",value:function(){this.type=l.default.image}},{key:"setFile",value:function(e){var t="chooseMedia:ok"==e.errMsg?e.tempFiles[0].tempFilePath:e.tempFiles[0].path;e.tempFiles[0].path=t,this.file=e}},{key:"setPayload",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"setPayload",this).call(this,e);var n=this,o=e.file.tempFiles[0],r="chooseMedia:ok"==e.file.errMsg?o.tempFilePath:o.path;this.payload.url=r,this.payload.size=o.size,this.payload.width="",this.payload.height="",this.payload.contentType="";var s=d.calibrator.isEmpty(o.name)||null==o.name?r:o.name;this.payload.name="wx-image."+d.str.fileExtension(s,"."),this.payload.contentType="image/"+d.str.fileExtension(s,"."),wx.getImageInfo({src:r,success:function(e){n.payload.width=e.width,n.payload.height=e.height}})}}]),t}(u.default);t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(3)),o=f(n(0)),r=f(n(1)),s=f(n(4)),a=f(n(12)),c=f(n(5)),u=f(n(50)),l=f(n(9)),d=n(17);function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,c.default)(t,e),(0,r.default)(t,[{key:"validate",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"validate",this).call(this,e)}},{key:"setType",value:function(){this.type=l.default.audio}},{key:"setPayload",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"setPayload",this).call(this,e);var n=e.file.tempFilePath;this.payload.url=n,this.payload.duration=e.file.duration/1e3,this.payload.size=e.file.fileSize;var o=d.calibrator.isEmpty(e.file.name)||null==e.file.name?n:e.file.name;this.payload.contentType="audio/"+d.str.fileExtension(o,"."),this.payload.name="wx-audio."+d.str.fileExtension(o,".")}}]),t}(u.default);t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=p(n(21)),o=p(n(3)),r=p(n(0)),s=p(n(1)),a=p(n(4)),c=p(n(12)),u=p(n(5)),l=p(n(50)),d=p(n(9)),f=n(2),h=n(17);function p(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(e){return(0,r.default)(this,t),(0,a.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"validate",value:function(e){(0,c.default)(t.prototype.__proto__||(0,o.default)(t.prototype),"validate",this).call(this,e)}},{key:"setType",value:function(){this.type=d.default.video}},{key:"setFile",value:function(e){this.file="chooseMedia:ok"==e.errMsg?e.tempFiles[0]:e}},{key:"setPayload",value:function(e){this.payload=(0,i.default)(null);var t=(0,i.default)(null),n=(0,i.default)(null),o="chooseMedia:ok"==e.file.errMsg?e.file.tempFiles[0]:e.file,r=o.duration,s=o.height,a=o.size,c=o.tempFilePath,u=o.thumbTempFilePath,l=o.width,d=o.name,p=void 0===d?"":d,m=f.calibrator.isEmpty(p)?c:p;t.contentType="video/"+h.str.fileExtension(m,"."),t.name="wx-video."+h.str.fileExtension(m,"."),t.url=c,t.width=n.width=l,t.height=n.height=s,t.size=a,t.duration=r,n.url=u,n.contentType="image/jpg",n.name="wx-thumbnail.jpg",this.payload.video=t,this.payload.thumbnail=n}}]),t}(l.default);t.default=m},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(3)),o=f(n(0)),r=f(n(1)),s=f(n(4)),a=f(n(12)),c=f(n(5)),u=f(n(51)),l=f(n(9)),d=n(17);function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,c.default)(t,e),(0,r.default)(t,[{key:"validate",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"validate",this).call(this,e)}},{key:"setType",value:function(){this.type=l.default.audio}},{key:"setPayload",value:function(e){var n=this;(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"setPayload",this).call(this,e);var o=this,r=e.file.tempFilePath;this.payload.url=r;var s=d.calibrator.isEmpty(e.file.name)||null==e.file.name?r:e.file.name;if(this.payload.contentType="audio/"+d.str.fileExtension(s,"."),this.payload.name="uni-audio."+d.str.fileExtension(s,"."),d.calibrator.isDef(e.file.duration))this.payload.duration=e.file.duration/1e3;else{this.payload.duration=0;var c=uni.createInnerAudioContext();c.src=r,c.onCanplay(function(){o.payload.duration=c.duration,c.destroy()})}uni.getFileInfo({filePath:r,success:function(e){n.payload.size=e.size}})}}]),t}(u.default);t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=h(n(21)),o=h(n(3)),r=h(n(0)),s=h(n(1)),a=h(n(4)),c=h(n(12)),u=h(n(5)),l=h(n(51)),d=h(n(9)),f=n(17);function h(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){return(0,r.default)(this,t),(0,a.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"validate",value:function(e){(0,c.default)(t.prototype.__proto__||(0,o.default)(t.prototype),"validate",this).call(this,e)}},{key:"setType",value:function(){this.type=d.default.video}},{key:"setPayload",value:function(e){var t=(0,i.default)(null),n=(0,i.default)(null);this.payload=(0,i.default)(null);var o=e.file,r=o.duration,s=o.height,a=o.size,c=o.tempFilePath,u=o.width,l=o.name,d=void 0===l?"":l,h=f.calibrator.isEmpty(d)?c:d;t.contentType="video/"+f.str.fileExtension(h,"."),t.name="uni-video."+f.str.fileExtension(h,"."),t.size=a,t.duration=r,t.url=n.url=c,t.width=n.width=u,t.height=n.height=s,n.contentType="image/jpg",n.name="wx-thumbnail.jpg",this.payload.video=t,this.payload.thumbnail=n}}]),t}(l.default);t.default=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(3)),o=f(n(0)),r=f(n(1)),s=f(n(4)),a=f(n(12)),c=f(n(5)),u=f(n(51)),l=n(17),d=f(n(9));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,c.default)(t,e),(0,r.default)(t,[{key:"validate",value:function(e){if((0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"validate",this).call(this,e),!l.calibrator.isDef(e.file.tempFiles)||0==e.file.tempFiles[0].length)throw Error("tempFiles is empty.")}},{key:"setType",value:function(){this.type=d.default.image}},{key:"setPayload",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"setPayload",this).call(this,e);var n=this,o=e.file.tempFiles[0];this.payload.url=o.path,this.payload.size=o.size,this.payload.width="",this.payload.height="";var r=l.calibrator.isEmpty(o.name)||null==o.name?o.path:o.name;this.payload.contentType="image/"+l.str.fileExtension(r,"."),this.payload.name="uni-image."+l.str.fileExtension(r,"."),uni.getImageInfo({src:o.path,success:function(e){n.payload.width=e.width,n.payload.height=e.height}})}}]),t}(u.default);t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(3)),o=d(n(0)),r=d(n(1)),s=d(n(4)),a=d(n(12)),c=d(n(5)),u=d(n(52)),l=d(n(9));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,c.default)(t,e),(0,r.default)(t,[{key:"validate",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"validate",this).call(this,e);var n=["gif","jpg","png","jpeg"];if(!n.find(function(t){return t==e.file.type.split("/")[1].toLowerCase()}))throw Error("Only "+n.join(",")+" is supported image.")}},{key:"setType",value:function(){this.type=l.default.image}},{key:"setPayload",value:function(e){var n=this;(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"setPayload",this).call(this,e);var o=window.URL||window.webkitURL,r=new Image;r.src=o.createObjectURL(e.file),r.onload=function(){n.payload.width=r.width,n.payload.height=r.height,o.revokeObjectURL(r.src)}}}]),t}(u.default);t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(3)),o=d(n(0)),r=d(n(1)),s=d(n(4)),a=d(n(12)),c=d(n(5)),u=d(n(52)),l=d(n(9));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,c.default)(t,e),(0,r.default)(t,[{key:"validate",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"validate",this).call(this,e);var n=["mp3","ogg","wav","wma","ape","acc","mpeg"];if(!n.find(function(t){return t==e.file.type.split("/")[1].toLowerCase()}))throw Error("Only "+n.join(",")+" is supported audio.")}},{key:"setType",value:function(){this.type=l.default.audio}},{key:"setPayload",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"setPayload",this).call(this,e);var n=this,o=window.URL||window.webkitURL,r=document.createElement("audio");r.src=o.createObjectURL(e.file),r.onloadedmetadata=function(){n.payload.duration=r.duration,o.revokeObjectURL(r.src)}}}]),t}(u.default);t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(21)),o=f(n(3)),r=f(n(0)),s=f(n(1)),a=f(n(4)),c=f(n(12)),u=f(n(5)),l=f(n(52)),d=f(n(9));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){return(0,r.default)(this,t),(0,a.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"validate",value:function(e){(0,c.default)(t.prototype.__proto__||(0,o.default)(t.prototype),"validate",this).call(this,e);var n=["avi","mov","rmvb","rm","flv","mp4","3gp","quicktime"];if(!n.find(function(t){return t==e.file.type.split("/")[1].toLowerCase()}))throw Error("Only "+n.join(",")+" is supported video.")}},{key:"setType",value:function(){this.type=d.default.video}},{key:"setPayload",value:function(e){this.payload=(0,i.default)(null);var t=(0,i.default)(null),n=(0,i.default)(null);t.contentType=e.file.type,t.size=e.file.size,t.duration=0,t.url=n.url="",t.name=e.file.name,t.width=n.width=0,t.height=n.height=0,n.contentType="image/jpg",this.payload.video=t,this.payload.thumbnail=n;var o=this,r=window.URL||window.webkitURL,s=document.createElement("video"),a=r.createObjectURL(e.file);s.src=a,s.onloadedmetadata=function(){o.payload.video.duration=s.duration,o.payload.video.width=o.payload.thumbnail.width=s.videoWidth,o.payload.video.height=o.payload.thumbnail.height=s.videoHeight,o.payload.video.url=a,o.payload.thumbnail.url=function(e){var t=document.createElement("canvas");return t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height),t.toDataURL("image/png")}(s),r.revokeObjectURL(s.src)}}}]),t}(l.default);t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(3)),o=l(n(0)),r=l(n(1)),s=l(n(4)),a=l(n(5)),c=l(n(43)),u=n(2);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e))}return(0,a.default)(t,e),(0,r.default)(t,[{key:"setType",value:function(e){if(!u.calibrator.isStringOrNumber(e.type))throw Error("type require a string or number.");if(u.calibrator.isEmpty(e.type))throw Error("type is empty.");this.type=e.type}},{key:"setPayload",value:function(e){if(u.calibrator.isEmpty(e.payload))throw Error("payload is empty.");if(!u.calibrator.isPlainObject(e.payload)&&!u.calibrator.isStringOrNumber(e.payload))throw Error("payload require object | string | number.");this.payload=e.payload}}]),t}(c.default);t.default=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=g(n(33)),o=g(n(6)),r=g(n(0)),s=g(n(1)),a=g(n(209)),c=g(n(10)),u=n(32),l=g(n(8)),d=n(11),f=g(n(49)),h=n(25),p=g(n(43)),m=n(2);function g(e){return e&&e.__esModule?e:{default:e}}var y=function(){function e(t){(0,r.default)(this,e),this.im=null,this.bulletMessageBuilder=null,this.im=t,this.bulletMessageBuilder=new a.default(t)}return(0,s.default)(e,[{key:"send",value:function(e,t,n){var i=this;return new o.default(function(o,r){t.status===f.default.new?(t.status=f.default.sending,i.bulletMessageBuilder.build(e,t,n).then(function(e){var n=new c.default({name:d.EmitType.publishIM,params:e,permission:l.default.WRITE,singleTimeout:u.SocketTimeout.commonRequestSingle,totalTimeout:u.SocketTimeout.commonRequestTotal,fail:function(e){t.status=f.default.fail,r({code:e.resultCode||408,content:e.content||"Failed to send private message."})},success:function(e){t.status=f.default.success,200==e.resultCode?o({code:200,content:e.content}):r(e)}});i.im._goEasySocket.emit(n)}).catch(function(e){r({code:e.code||400,content:e.content||e})})):r({code:400,content:"Please create a new message, a message can only be sent once"})})}},{key:"sendMessage",value:function(e){var t=this,n=this.im;return new o.default(function(o,r){if(e instanceof p.default)if(e.status===f.default.new){e.status=f.default.sending;var s=e.to;if(delete e.to,s)if(!s.type||s.type!=h.ConversationType.GROUP&&s.type!=h.ConversationType.PRIVATE)r({code:400,content:"message require property to.type"});else if(s.id)if(s.data&&m.calibrator.isFunction(s.data))r({code:400,content:"to.data can not be function"});else{var a=e.notification;if(a)if(m.calibrator.isObject(a)){if(m.calibrator.isEmpty(a.title))return void r({code:400,content:"notification title is required"});if(!m.calibrator.isString(a.title))return void r({code:400,content:"notification title must be string"});if(m.calibrator.isEmpty(e.notification.body))return void r({code:400,content:"notification body is required"});if(!m.calibrator.isString(e.notification.body))return void r({code:400,content:"notification body must be string"})}else if(m.calibrator.isPrimitive(e.notification))return void r({code:400,content:"notification must be an json object"});s.data||(s.data={}),n._conversations.updateByOutMessage(e,s.type,s.id,s.data),t.bulletMessageBuilder.build(s.id,e,s.type).then(function(t){t.d=(0,i.default)(s.data);var a=new c.default({name:d.EmitType.publishIM,params:t,permission:l.default.WRITE,singleTimeout:u.SocketTimeout.commonRequestSingle,totalTimeout:u.SocketTimeout.commonRequestTotal,fail:function(t){e.status=f.default.fail,r({code:t.resultCode||408,content:t.content||"Failed to send private message."})},success:function(t){e.status=f.default.success,e.timestamp=t.content.timestamp,o(e),n._conversations.updateByOutMessage(e,s.type,s.id,s.data)}});n._goEasySocket.emit(a)}).catch(function(e){r({code:e.code||400,content:e.content||e})})}else r({code:400,content:"message require property to.id"});else r({code:400,content:"message require property to."})}else r({code:400,content:"Please create a new message, a message can only be sent once"});else r({code:400,content:"it is invalid message"})})}}]),e}();t.default=y},function(e,t,n){var i=n(7),o=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(33)),o=u(n(6)),r=u(n(0)),s=u(n(1)),a=u(n(210)),c=u(n(211));function u(e){return e&&e.__esModule?e:{default:e}}u(n(9));var l=function(){function e(t){(0,r.default)(this,e),this.im=null,this.im=t}return(0,s.default)(e,[{key:"build",value:function(e,t,n){var r=this;return new o.default(function(o,s){var u=new a.default({to:e,message:t,conversationType:n}),l=t.type;new c.default(l,r.im).build(t).then(function(e){u.p=(0,i.default)(e),o(u)}).catch(function(e){s(e)})})}}]),e}();t.default=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(33)),o=d(n(0)),r=d(n(1)),s=n(17),a=d(n(43)),c=d(n(103)),u=d(n(9)),l=d(n(42));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){(0,o.default)(this,e),this.mt=null,this.to=null,this.p=null,this.t=null,this.guid=null,this.nt=null,this.validate(t.to,t.message),this.mt=t.message.type,this.to=t.to,this.t=t.conversationType,this.guid=t.message.messageId,this.p=t.message.payload,this.nt=t.message.notification}return(0,r.default)(e,[{key:"validate",value:function(e,t){if(!(t instanceof a.default))throw Error("createMessage first.");if(s.calibrator.isEmpty(e))throw Error("userId is empty.");if(!s.calibrator.isStringOrNumber(e))throw Error("userId should be a string or number.");if(l.default.userId==e)throw Error("userId can not be the same as your id.");if(t.type==u.default.text){if(!(t instanceof c.default))throw Error("it is not textMessage");if((0,i.default)(t.payload).length>3072)throw Error("message-length limit 3kb")}}}]),e}();t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=c(n(0)),o=n(212),r=c(n(213)),s=c(n(105)),a=c(n(9));function c(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t,n){return(0,i.default)(this,e),t==a.default.video?new r.default(n):t==a.default.audio||t==a.default.image||t==a.default.file?new s.default(n):o.simplePayloadBuilder}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.simplePayloadBuilder=void 0;var i=u(n(6)),o=u(n(3)),r=u(n(0)),s=u(n(1)),a=u(n(4)),c=u(n(5));function u(e){return e&&e.__esModule?e:{default:e}}var l=new(function(e){function t(){return(0,r.default)(this,t),(0,a.default)(this,(t.__proto__||(0,o.default)(t)).call(this))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"build",value:function(e){return new i.default(function(t,n){try{t(e.payload)}catch(i){n(i)}})}}]),t}(u(n(104)).default));t.simplePayloadBuilder=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(6)),o=d(n(3)),r=d(n(0)),s=d(n(1)),a=d(n(4)),c=d(n(5)),u=d(n(105)),l=d(n(106));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){return(0,r.default)(this,t),(0,a.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"build",value:function(e){var t=this;return new i.default(function(n,i){var o=new l.default;t.upload(e).then(function(t){t.content,o=e.payload;var i="?x-oss-process=video/snapshot,t_0000,f_jpg,w_"+e.payload.video.width+",m_fast,ar_auto";o.video.url=t.content.url,o.thumbnail.url=t.content.url+i,o.video.name=t.content.newFileName,n(o)}).catch(function(e){i(e)})})}}]),t}(u.default);t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.fileUploader=void 0;var i=u(n(0)),o=u(n(1)),r=u(n(102)),s=n(215),a=n(216),c=n(217);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){(0,i.default)(this,e),this.uploader={uniApp:s.uniAppFileUploader,wx:a.wxFileUploader,html:c.htmlFileUploader}}return(0,o.default)(e,[{key:"upload",value:function(e,t){var n=r.default.resolve();return this.uploader[n].upload(e,t)}}]),e}();t.default=l;var d=new l;t.fileUploader=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.uniAppFileUploader=void 0;var i=u(n(6)),o=u(n(3)),r=u(n(0)),s=u(n(1)),a=u(n(4)),c=u(n(5));function u(e){return e&&e.__esModule?e:{default:e}}var l=new(function(e){function t(){return(0,r.default)(this,t),(0,a.default)(this,(t.__proto__||(0,o.default)(t)).call(this))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"upload",value:function(e,t){var n=this;try{return new i.default(function(i,o){uni.uploadFile({url:e.host,filePath:n.getTempFilePath(e),name:"file",formData:e.parameters,success:function(t){if(200===t.statusCode){var n=e.payload;n.message=t.errMsg,i({code:200,content:n})}else o({code:t.statusCode,content:t.errMsg})},fail:function(e){o({code:500,content:e.errMsg})}}).onProgressUpdate(function(e){t&&t(e)})})}catch(o){return new i.default(function(t,n){n({code:500,content:o})})}}},{key:"getTempFilePath",value:function(e){var t=e.file||e.fileRes;return Array.isArray(t.tempFiles)?t.tempFiles[0].path:t.tempFilePath}}]),t}(u(n(71)).default));t.uniAppFileUploader=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.wxFileUploader=void 0;var i=u(n(6)),o=u(n(3)),r=u(n(0)),s=u(n(1)),a=u(n(4)),c=u(n(5));function u(e){return e&&e.__esModule?e:{default:e}}var l=new(function(e){function t(){return(0,r.default)(this,t),(0,a.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"upload",value:function(e,t){var n=this;try{return new i.default(function(i,o){wx.uploadFile({url:e.host,filePath:n.getTempFilePath(e),name:"file",formData:e.parameters,success:function(t){if(200===t.statusCode){var n=e.payload;n.message=t.errMsg,i({code:200,content:n})}else o({code:t.statusCode,content:t.errMsg})},fail:function(e){o({code:500,content:e.errMsg})}}).onProgressUpdate(function(e){t&&t(e)})})}catch(o){return new i.default(function(t,n){n({code:500,content:o})})}}},{key:"getTempFilePath",value:function(e){var t=e.file||e.fileRes;return Array.isArray(t.tempFiles)?t.tempFiles[0].path:t.tempFilePath}}]),t}(u(n(71)).default));t.wxFileUploader=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.htmlFileUploader=void 0;var i=u(n(6)),o=u(n(3)),r=u(n(0)),s=u(n(1)),a=u(n(4)),c=u(n(5));function u(e){return e&&e.__esModule?e:{default:e}}var l=new(function(e){function t(){return(0,r.default)(this,t),(0,a.default)(this,(t.__proto__||(0,o.default)(t)).call(this))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"upload",value:function(e,t){try{return new i.default(function(n,i){var o=new XMLHttpRequest;for(var r in o.open("post",e.host,!0),e.headers)o.setRequestHeader(r,e.headers[r]);o.upload.onprogress=function(e){t&&t(e)},o.upload.onloadstart=function(e){t&&t(e)},o.upload.onloadend=function(e){t&&t(e)};var s=new FormData;for(var a in e.parameters)"fileRes"==a?s.append("file",e.parameters[a]):s.append(a,e.parameters[a]);o.send(s),o.onreadystatechange=function(){if(4==o.readyState)if(o.status>=200&&o.status<300||304==o.status){var t=e.payload;t.message=o.responseText,n({code:200,content:t})}else i({code:o.status,content:o.responseText})}})}catch(n){return new i.default(function(t,i){i({code:500,content:n})})}}}]),t}(u(n(71)).default));t.htmlFileUploader=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=c(n(6)),o=c(n(0)),r=c(n(1)),s=c(n(219)),a=c(n(223));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){(0,o.default)(this,e),this.uploadTokenResolver=null,this.uploadTokenResolver=new a.default(t)}return(0,r.default)(e,[{key:"build",value:function(e,t,n){var o=this;return new i.default(function(i,r){o.uploadTokenResolver.resolve(t).then(function(t){var o=t.content;i(new s.default(o.vendor).build(o,e,n))}).catch(function(e){r(e)})})}}]),e}();t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,o=(i=n(0))&&i.__esModule?i:{default:i},r=n(220),s=n(221),a=n(222);t.default=function e(t){return(0,o.default)(this,e),t==r.OssType.aliYun?s.aliYunOSSRequestBuilder:a.qiNiuYunOSSRequestBuilder}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.OssType={aliYun:"ALI",qiNiu:"QN"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.aliYunOSSRequestBuilder=void 0;var i=d(n(3)),o=d(n(0)),r=d(n(1)),s=d(n(4)),a=d(n(5)),c=d(n(108)),u=d(n(109)),l=d(n(9));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,a.default)(t,e),(0,r.default)(t,[{key:"url",value:function(e){return e.host+"/"+e.dir+"/"+this.newFileName(e)}},{key:"build",value:function(e,t,n){var i={key:e.dir+"/"+this.newFileName(e),OSSAccessKeyId:e.accessKeyId,policy:e.policy,signature:e.signature,success_action_status:"200",fileRes:t};l.default.file===n&&(i={key:e.dir+"/"+this.newFileName(e),OSSAccessKeyId:e.accessKeyId,policy:e.policy,signature:e.signature,success_action_status:"200","Content-Disposition":"attachment;filename="+t.name,fileRes:t});var o={newFileName:this.newFileName(e),url:this.url(e)};return new c.default(e.host,null,i,t,o)}}]),t}(u.default);t.default=f;var h=new f;t.aliYunOSSRequestBuilder=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.qiNiuYunOSSRequestBuilder=void 0;var i=l(n(3)),o=l(n(0)),r=l(n(1)),s=l(n(4)),a=l(n(5)),c=l(n(109)),u=l(n(108));function l(e){return e&&e.__esModule?e:{default:e}}var d=new(function(e){function t(){return(0,o.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this))}return(0,a.default)(t,e),(0,r.default)(t,[{key:"url",value:function(e){return e.downloadUrl}},{key:"build",value:function(e,t){var n={key:this.newFileName(e),token:e.token,file:t},i={newFileName:this.newFileName(e),url:this.url(e)};return new u.default(e.host,null,n,t,i)}}]),t}(c.default));t.qiNiuYunOSSRequestBuilder=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(6)),o=u(n(0)),r=u(n(1)),s=u(n(10)),a=u(n(8)),c=n(32);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){(0,o.default)(this,e),this.im=null,this.im=t}return(0,r.default)(e,[{key:"resolve",value:function(e){var t=this;return new i.default(function(n,i){var o=new s.default({name:"uploadToken",params:{filename:e},permission:a.default.WRITE,singleTimeout:c.SocketTimeout.commonRequestSingle,totalTimeout:c.SocketTimeout.commonRequestTotal,fail:function(e){i(e)},success:function(e){200==e.code?n(e):i(e)}});t.im._goEasySocket.emit(o)})}}]),e}();t.default=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(21)),o=f(n(6)),r=f(n(0)),s=f(n(1)),a=n(17),c=f(n(10)),u=f(n(8)),l=n(32),d=n(11);function f(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(t){(0,r.default)(this,e),this.im=null,this.im=t}return(0,s.default)(e,[{key:"history",value:function(e){var t=this;return new o.default(function(n,i){t.transformOptions(e);var o=new c.default({name:d.EmitType.imHistory,params:e,permission:u.default.READ,singleTimeout:l.SocketTimeout.commonQuerySingle,totalTimeout:l.SocketTimeout.commonQueryTotal,fail:function(e){i({code:e.code||408,content:e.content||"Failed to query message"})},success:function(o){if(200==o.code){var r=t.transformHistories(o,e);n({code:200,content:r})}else i(o)}});t.im._goEasySocket.emit(o)})}},{key:"transformOptions",value:function(e){if(!a.calibrator.isObject(e)||!a.calibrator.isDef(e.friendId)&&!a.calibrator.isDef(e.groupId))throw Error("friendId or groupId is not define.");if(a.calibrator.isDef(e.friendId)&&a.calibrator.isDef(e.groupId))throw Error("only contain friendId or groupId.");if(a.calibrator.isDef(e.limit)||(e.limit=10),e.limit>30&&(e.limit=30),a.calibrator.isDef(e.friendId)){if(!a.calibrator.isStringOrNumber(e.friendId))throw Error("TypeError: friendId require string or number.");a.calibrator.isNumber(e.friendId)&&(e.friendId=e.friendId.toString())}else{if(!a.calibrator.isStringOrNumber(e.groupId))throw Error("TypeError: groupId require string or number.");a.calibrator.isNumber(e.groupId)&&(e.groupId=e.groupId.toString())}return e}},{key:"transformHistories",value:function(e,t){var n=[];return e&&e.content&&e.content.map(function(e){var o=(0,i.default)(null);o.timestamp=e.ts,o.senderId=e.s,o.type=e.mt,o.payload=JSON.parse(e.p),t.groupId&&e.d&&(o.senderData=JSON.parse(e.d)),n.push(o)}),n}}]),e}();t.default=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=p(n(6)),o=p(n(0)),r=p(n(1)),s=p(n(10)),a=n(11),c=p(n(8)),u=n(15),l=n(25),d=p(n(48)),f=n(2),h=n(29);function p(e){return e&&e.__esModule?e:{default:e}}var m=function(){function e(t){(0,o.default)(this,e),this.im=null,this.im=t,t._iMReceiver.addIMMessageObserver(this.newNewMessageReceived.bind(this))}return(0,r.default)(e,[{key:"newNewMessageReceived",value:function(e){if(e.t===l.ConversationType.GROUP){var t=d.default.assemble(e);this.im._event.notify(h.ImEventType.GROUP_MESSAGE_RECEIVED,t)}}},{key:"subscribe",value:function(e){var t=this;return new i.default(function(n,i){if(Array.isArray(e)&&0!=e.length){for(var o=0;o<e.length;o++){if(!f.calibrator.isStringOrNumber(e[o]))return void i({code:400,content:"TypeError: groups item require string or number."});f.calibrator.isNumber(e[o])&&(e[o]=e[o].toString())}var r=new s.default({name:a.EmitType.subscribeGroups,params:{groupIds:e},permission:c.default.WRITE,singleTimeout:u.SocketTimeout.commonInfiniteSingle,totalTimeout:u.SocketTimeout.commonInfiniteTotal,success:function(){n({code:200,content:"ok"})},fail:function(e){i({code:e.resultCode||408,content:e.content||"Failed to subscribe group message"})}});t.im._goEasySocket.emit(r)}else i({code:400,content:"TypeError: groups require array."})})}},{key:"unsubscribe",value:function(e){var t=this;return new i.default(function(n,i){if(f.calibrator.isStringOrNumber(e)){e=e.toString();var o=new s.default({name:a.EmitType.unsubscribeGroup,params:{groupId:e},permission:c.default.READ,singleTimeout:u.SocketTimeout.commonRequestSingle,totalTimeout:u.SocketTimeout.commonRequestTotal,success:function(){n({code:200,content:"ok"})},fail:function(e){i({code:e.resultCode||408,content:e.content||"Failed to unsubscribe group message"})}});t.im._goEasySocket.emit(o)}else i({code:400,content:"TypeError: channel require string or number."})})}}]),e}();t.default=m},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=c(n(0)),o=c(n(1)),r=c(n(48)),s=n(25),a=n(29);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){(0,i.default)(this,e),this.im=null,this.im=t,t._iMReceiver.addIMMessageObserver(this.onNewMessageReceived.bind(this))}return(0,o.default)(e,[{key:"onNewMessageReceived",value:function(e){if(e.t===s.ConversationType.PRIVATE){var t=r.default.assemble(e);this.im._event.notify(a.ImEventType.PRIVATE_MESSAGE_RECEIVED,t)}}}]),e}();t.default=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(6)),o=d(n(0)),r=d(n(1)),s=d(n(10)),a=n(11),c=d(n(8)),u=n(15),l=n(2);function d(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){(0,o.default)(this,e),this.im=null,this.im=t}return(0,r.default)(e,[{key:"get",value:function(e){var t=this;return new i.default(function(n,i){if(l.calibrator.isStringOrNumber(e)){l.calibrator.isNumber(e)&&(e=e.toString());var o=new s.default({name:a.EmitType.imGroupOnlineCount,params:{groupId:e},permission:c.default.READ,singleTimeout:u.SocketTimeout.commonQuerySingle,totalTimeout:u.SocketTimeout.commonQueryTotal,fail:function(e){i(e||{code:408,content:"Failed to query online group users"})},success:function(e){200==e.code?n(e):i(e)}});t.im._goEasySocket.emit(o)}else i({code:400,content:"TypeError: groupId require string or number."})})}}]),e}();t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=h(n(6)),o=h(n(0)),r=h(n(1)),s=h(n(10)),a=h(n(8)),c=n(32),u=n(11),l=n(2),d=n(29),f=h(n(41));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(t){(0,o.default)(this,e),this.im=null,this.im=t,t._goEasySocket.addMessageObserver(f.default.groupPresence,this.newMessageReceived.bind(this))}return(0,r.default)(e,[{key:"presence",value:function(e){var t=this;return new i.default(function(n,i){if(Array.isArray(e)&&0!=e.length){for(var o=0;o<e.length;o++){if(!l.calibrator.isStringOrNumber(e[o]))return void i({code:400,content:"TypeError: groupIds item require string or number."});if(l.calibrator.isNumber(e[o])&&(e[o]=e[o].toString()),0==e[o].length)return void i({code:400,content:"TypeError: groupIds has empty item."})}var r={groupIds:e};t.emitRocket(u.EmitType.subscribeGroupPresence,r,function(){n({code:200,content:"ok"})},function(e){i({code:e.code||408,content:e.content||"Failed to subscribe group message"})},c.SocketTimeout.commonInfiniteSingle,c.SocketTimeout.commonInfiniteTotal)}else i({code:400,content:"TypeError: groupIds require array."})})}},{key:"unPresence",value:function(e){var t=this;return new i.default(function(n,i){if(l.calibrator.isStringOrNumber(e)){l.calibrator.isNumber(e)&&(e=e.toString());var o={groupId:e};t.emitRocket(u.EmitType.unsubscribeGroupPresence,o,function(){n({code:200,content:"ok"})},function(e){i({code:e.code||408,content:e.content||"Failed to unsubscribe presence"})},c.SocketTimeout.commonRequestSingle,c.SocketTimeout.commonRequestTotal)}else i({code:400,content:"TypeError: groupId require string or number."})})}},{key:"emitRocket",value:function(e,t,n,i,o,r){var c=new s.default({name:e,params:t,singleTimeout:o,totalTimeout:r,permission:a.default.WRITE,success:n,fail:i});this.im._goEasySocket.emit(c)}},{key:"newMessageReceived",value:function(e){var t=this,n=null;e.c&&(n=JSON.parse(e.c)),n&&n.events&&n.events.map(function(e){var i=e.userData?JSON.parse(e.userData):{},o={time:e.time,action:e.action,groupOnlineCount:n.userAmount,groupId:n.groupId,id:e.userId,data:i};t.im._event.notify(d.ImEventType.GROUP_PRESENCE,o)})}}]),e}();t.default=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=h(n(6)),o=h(n(0)),r=h(n(1)),s=h(n(10)),a=h(n(8)),c=n(32),u=n(11),l=n(2),d=n(29),f=h(n(41));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(t){(0,o.default)(this,e),this.im=null,this.im=t,this.im._goEasySocket.addMessageObserver(f.default.userPresence,this.newMessageReceived.bind(this))}return(0,r.default)(e,[{key:"presence",value:function(e){var t=this;return new i.default(function(n,i){if(Array.isArray(e)&&0!=e.length){for(var o=0;o<e.length;o++){if(!l.calibrator.isStringOrNumber(e[o]))return void i({code:400,content:"TypeError: userIds item require string or number."});if(l.calibrator.isNumber(e[o])&&(e[o]=e[o].toString()),0==e[o].length)return void i({code:400,content:"TypeError: userIds has empty item."})}var r={userIds:e};t.emitRocket(u.EmitType.subscribeUserPresence,r,function(){n({code:200,content:"ok"})},function(e){i({code:e.code||408,content:e.content||"Failed to subscribe group message"})},c.SocketTimeout.commonInfiniteSingle,c.SocketTimeout.commonInfiniteTotal)}else i({code:400,content:"TypeError: userIds require array."})})}},{key:"unPresence",value:function(e){var t=this;return new i.default(function(n,i){if(l.calibrator.isStringOrNumber(e)){l.calibrator.isNumber(e)&&(e=e.toString());var o={userId:e};t.emitRocket(u.EmitType.unsubscribeUserPresence,o,function(){n({code:200,content:"ok"})},function(e){i({code:e.code||408,content:e.content||"Failed to unsubscribe presence"})},c.SocketTimeout.commonRequestSingle,c.SocketTimeout.commonRequestTotal)}else i({code:400,content:"TypeError: id require string or number."})})}},{key:"emitRocket",value:function(e,t,n,i,o,r){var c=new s.default({name:e,params:t,singleTimeout:o,totalTimeout:r,permission:a.default.WRITE,success:n,fail:i});this.im._goEasySocket.emit(c)}},{key:"newMessageReceived",value:function(e){var t=this,n=[];e.c&&(n=JSON.parse(e.c).events||[]),n.map(function(e){var n=e.userData?JSON.parse(e.userData):{},i={time:e.time,action:e.action,id:e.userId,data:n};t.im._event.notify(d.ImEventType.USER_PRESENCE,i)})}}]),e}();t.default=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(6)),o=d(n(0)),r=d(n(1)),s=n(11),a=d(n(10)),c=d(n(8)),u=n(15),l=n(2);function d(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){(0,o.default)(this,e),this.im=null,this.im=t}return(0,r.default)(e,[{key:"hereNow",value:function(e){var t=this;return new i.default(function(n,i){if(e.userIds&&Array.isArray(e.userIds)&&0!=e.userIds.length){for(var o=0;o<e.userIds.length;o++){if(!l.calibrator.isStringOrNumber(e.userIds[o]))return void i({code:400,content:"TypeError: userIds item require string or number."});if(l.calibrator.isNumber(e.userIds[o])&&(e.userIds[o]=e.userIds[o].toString()),0==e.userIds[o].length)return void i({code:400,content:"TypeError: userIds has empty item."})}var r=new a.default({name:s.EmitType.imHereNow,params:e,permission:c.default.READ,singleTimeout:u.SocketTimeout.commonQuerySingle,totalTimeout:u.SocketTimeout.commonQueryTotal,fail:function(e){i({code:e.resultCode||408,content:e.content||"Failed to query online users"})},success:function(e){if(200==e.code){var t=e.content;e.content=t.map(function(e){var t=e.userData?JSON.parse(e.userData):{};return{id:e.userId,data:t}}),n(e)}else i(e)}});t.im._goEasySocket.emit(r)}else i({code:400,content:"TypeError: userIds require array."})})}}]),e}();t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(6)),o=d(n(0)),r=d(n(1)),s=n(11),a=d(n(10)),c=d(n(8)),u=n(15),l=n(17);function d(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){(0,o.default)(this,e),this.im=null,this.im=t}return(0,r.default)(e,[{key:"hereNow",value:function(e){var t=this;return new i.default(function(n,i){if(l.calibrator.isStringOrNumber(e)){l.calibrator.isNumber(e)&&(e=e.toString());var o=new a.default({name:s.EmitType.imGroupHereNow,params:{groupId:e},permission:c.default.READ,singleTimeout:u.SocketTimeout.commonQuerySingle,totalTimeout:u.SocketTimeout.commonQueryTotal,fail:function(e){i({code:e.resultCode||408,content:e.content||"Failed to query online group users"})},success:function(e){if(200==e.code){var t=e.content;e.content=t.map(function(e){var t=e.userData?JSON.parse(e.userData):{};return{id:e.userId,data:t}}),n(e)}else i(e)}});t.im._goEasySocket.emit(o)}else i({code:400,content:"TypeError: groupId require string or number."})})}}]),e}();t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(0)),o=s(n(1)),r=s(n(41));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){(0,i.default)(this,e),this.im=null,this.observers=[],this.im=t,t._goEasySocket.addMessageObserver(r.default.imMessage,this.newNewMessageReceived.bind(this))}return(0,o.default)(e,[{key:"newNewMessageReceived",value:function(e){this.sendAck(e),this.notify(e)}},{key:"addIMMessageObserver",value:function(e){this.observers.push(e)}},{key:"sendAck",value:function(e){this.im._goEasySocket.sendAck("imAck",{publishGuid:e.i})}},{key:"notify",value:function(e){for(var t=0;t<this.observers.length;t++)this.observers[t](e)}}]),e}();t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(72)),o=f(n(6)),r=f(n(0)),s=f(n(1)),a=f(n(10)),c=n(11),u=f(n(8)),l=n(15),d=n(25);function f(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(t,n){(0,r.default)(this,e),this.im=null,this.userData={},this.groupData={},this.im=t,this.putUserData(n.id,n.data)}return(0,s.default)(e,[{key:"putData",value:function(e,t,n){n||(n={}),e==d.ConversationType.PRIVATE?this.userData[t]=n:this.groupData[t]=n}},{key:"putUserData",value:function(e,t){this.userData[e]=t}},{key:"putGroupData",value:function(e,t){this.groupData[e]=t}},{key:"loadData",value:function(e,t){var n=this;return new o.default(function(o,r){var s=void 0;if((s=d.ConversationType.PRIVATE===t?n.userData:n.groupData)[e]&&0!=(0,i.default)(s[e]).length)o(s[e]);else{var f={targetId:e,type:t},h=new a.default({name:c.EmitType.imData,params:f,permission:u.default.READ,singleTimeout:l.SocketTimeout.commonQuerySingle,totalTimeout:l.SocketTimeout.commonQueryTotal,success:function(t){t.content?s[e]=JSON.parse(t.content):s[e]={},o(s[e])},fail:function(e){r(e)}});n.im._goEasySocket.emit(h)}})}}]),e}();t.default=h},function(e,t,n){n(235),e.exports=n(7).Object.keys},function(e,t,n){var i=n(40),o=n(31);n(66)("keys",function(){return function(e){return o(i(e))}})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=S(n(6)),o=S(n(33)),r=S(n(3)),s=S(n(0)),a=S(n(1)),c=S(n(4)),u=S(n(12)),l=S(n(5)),d=S(n(110)),f=n(11),h=S(n(273)),p=S(n(10)),m=S(n(8)),g=S(n(28)),y=S(n(274)),v=n(2),_=n(119),b=n(15),C=S(n(275));function S(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return n.ioSocket=null,n.sid=null,n.appKey=null,n.userId=null,n.userData=null,n.otp=null,n.artifactVersion="0.0.0",n.uri=null,n.ioOpts=null,n.allowNotification=!1,n.reconnectingTimes=0,n.messageObservers={},n.connectFailedObservers=[],n.connectingObservers=[],n.expiredReconnectedObservers=[],n.ioSocket=new h.default({onDisconnected:n.onIoDisconnected.bind(n),onReconnecting:n.onIoReconnecting.bind(n)}),n.ioSocket.addConnectedObserver(n.onIoReconnected.bind(n)),n.appKey=e.appkey,n.userId=e.id,n.userData=e.data,n.otp=e.otp||null,n.ioOpts=e.opts,n.uri=e.uri,n.allowNotification=e.allowNotification,n.artifactVersion=e.artifactVersion,n.modules=e.modules,n.addConnectedObserver(e.onSuccess),n.addConnectingObserver(e.onProgress),n.addConnectFailedObserver(e.onFailed),n}return(0,l.default)(t,e),(0,a.default)(t,[{key:"onIoReconnected",value:function(){this.status===g.default.RECONNECTING&&this.authorize()}},{key:"emit",value:function(e){(0,u.default)(t.prototype.__proto__||(0,r.default)(t.prototype),"emit",this).call(this,e)}},{key:"doEmit",value:function(e,t,n){_.uniApp.overrideUniShowHideMethods(),t.sid=this.sid,this.ioSocket.doEmit(e,t,n)}},{key:"sendAck",value:function(e,t){this.ioSocket.io.emit(e,t)}},{key:"connect",value:function(){var e=this;(0,u.default)(t.prototype.__proto__||(0,r.default)(t.prototype),"connect",this).call(this),this.onConnecting(this.reconnectingTimes),this.ioSocket.connect({uri:this.uri,opts:this.ioOpts}),this.notifier=new C.default(this),this.notifier.support()?this.notifier.getRegId().then(function(t){e.regId=t,e.authorize()}).catch(function(t){console.error("\u6ce8\u518c\u5382\u5546\u901a\u9053\u5931\u8d25\uff1a"+(0,o.default)(t)),e.authorize()}):this.authorize()}},{key:"disconnect",value:function(){var e=this;return new i.default(function(t,n){var i=function(){e.status=g.default.DISCONNECTED,e.ioSocket.disconnect(),t()};if(e.allowNotification){var o=new p.default({name:f.EmitType.manualDisconnect,params:{},permission:m.default.READ,singleTimeout:b.SocketTimeout.commonInfiniteSingle,totalTimeout:b.SocketTimeout.commonInfiniteTotal,fail:function(e){n(e)},success:i});e.emit(o)}else i()})}},{key:"authorize",value:function(){var e={appkey:this.appKey,userId:this.userId,userData:(0,o.default)(this.userData),otp:this.otp,artifactVersion:this.artifactVersion,sid:this.sid,allowNT:this.allowNotification,regId:this.regId,modules:this.modules};(0,o.default)(e);var t=new p.default({name:f.EmitType.authorize,params:e,permission:m.default.NONE,singleTimeout:b.SocketTimeout.commonInfiniteSingle,totalTimeout:b.SocketTimeout.commonInfiniteTotal,success:this.onAuthorizeSuccess.bind(this),fail:this.onAuthorizeFailed.bind(this)});this.ioSocket.emit(t)}},{key:"onConnecting",value:function(){this.notify(this.connectingObservers,this.reconnectingTimes)}},{key:"onIoReconnecting",value:function(){_.uniApp.overrideUniShowHideMethods(),this.reconnectingTimes++,this.status==g.default.CONNECTED||this.status==g.default.EXPIRED_RECONNECTED||this.status==g.default.RECONNECTING?this.status=g.default.RECONNECTING:this.status=g.default.CONNECTING,this.onConnecting()}},{key:"onIoDisconnected",value:function(){this.status==g.default.DISCONNECTING&&(this.status=g.default.DISCONNECTED,this.notify(this.disconnectedObservers))}},{key:"onAuthorizeSuccess",value:function(e){this.status===g.default.RECONNECTING?this.sid!==e.sid?(this.status=g.default.EXPIRED_RECONNECTED,this.notify(this.expiredReconnectedObservers)):this.status=g.default.RECONNECTED:(this.status=g.default.CONNECTED,this.sid=e.sid),e.enablePublish&&(this.permissions.find(function(e){return e==m.default.WRITE})||this.permissions.push(m.default.WRITE)),e.enableSubscribe&&(this.permissions.find(function(e){return e==m.default.READ})||this.permissions.push(m.default.READ)),this.reconnectingTimes=0,this.notify(this.connectedObservers)}},{key:"onAuthorizeFailed",value:function(e){this.ioSocket.disconnect(),this.status=g.default.CONNECT_FAILED;var t={code:e.resultCode||408,content:e.content||"Host unreachable or timeout"};this.notify(this.connectFailedObservers,t)}},{key:"addConnectingObserver",value:function(e){v.calibrator.isFunction(e)&&this.connectingObservers.push(e)}},{key:"addConnectFailedObserver",value:function(e){v.calibrator.isFunction(e)&&this.connectFailedObservers.push(e)}},{key:"addExpiredReconnectedObserver",value:function(e){v.calibrator.isFunction(e)&&this.expiredReconnectedObservers.push(e)}},{key:"addMessageObserver",value:function(e,t){var n=this;this.ioSocket.io.on(e,function(t){n.notifyMessageObservers(e,t)}),this.messageObservers[e]||(this.messageObservers[e]=[]),this.messageObservers[e].push(new y.default(t))}},{key:"notifyMessageObservers",value:function(e,t){for(var n=this.messageObservers[e],i=0;i<n.length;i++)n[i].onMessage(e,t)}}]),t}(d.default);t.default=w},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(0)),o=s(n(1)),r=s(n(28));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){(0,i.default)(this,e),this.socket=null,this.socket=t}return(0,o.default)(e,[{key:"emit",value:function(e){this.socket.status!==r.default.CONNECT_FAILED&&this.socket.status!==r.default.DISCONNECTED?(e.start(),this.doEmit(e)):e.fail({resultCode:"409",content:"Please connect first"})}},{key:"doEmit",value:function(e){var t=this;if(e.isTimeout())e.fail({resultCode:408,content:"Host unreachable or timeout"});else if(this.socket.status!==r.default.CONNECT_FAILED)if(this.authenticated())if(this.hasPermission(e))if(this.socket.status===r.default.CONNECTED||this.socket.status===r.default.RECONNECTED||this.socket.status===r.default.EXPIRED_RECONNECTED){if(!e.complete){var n=setTimeout(function(){t.doEmit(e)},e.singleTimeout);this.socket.doEmit(e.name,e.params,function(t){clearTimeout(n),200===t.resultCode||200==t.code?e.success(t):e.fail(t)}),e.retried++}}else setTimeout(function(){t.doEmit(e)},500);else e.fail({resultCode:401,content:"No permission"});else setTimeout(function(){t.doEmit(e)},500);else e.fail({resultCode:408,content:"Failed to connect GoEasy."})}},{key:"hasPermission",value:function(e){return!!this.socket.permissions.find(function(t){return t===e.permission})}},{key:"authenticated",value:function(){return this.socket.status===r.default.CONNECTED||this.socket.status===r.default.RECONNECTING||this.socket.status===r.default.RECONNECTED||this.socket.status===r.default.EXPIRED_RECONNECTED}}]),e}();t.default=a},function(e,t,n){var i,o=(i=n(20))&&i.__esModule?i:{default:i},r=n(239),s=n(74),a=n(111);n(53)("socket.io-client"),e.exports=t=u;var c=t.managers={};function u(e,t){"object"===(void 0===e?"undefined":(0,o.default)(e))&&(t=e,e=void 0),t=t||{};var n,i=r(e),s=i.source,u=i.id,l=i.path,d=c[u]&&l in c[u].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?n=a(s,t):(c[u]||(c[u]=a(s,t)),n=c[u]),i.query&&!t.query&&(t.query=i.query),n.socket(i.path,t)}t.protocol=s.protocol,t.connect=u,t.Manager=n(111),t.Socket=n(115)},function(e,t,n){var i=n(240);n(53)("socket.io-client:url"),e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==t?t.protocol+"//"+e:"https://"+e),n=i(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n}},function(e){var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var i=e,o=e.indexOf("["),r=e.indexOf("]");-1!=o&&-1!=r&&(e=e.substring(0,o)+e.substring(o,r).replace(/:/g,";")+e.substring(r,e.length));for(var s=t.exec(e||""),a={},c=14;c--;)a[n[c]]=s[c]||"";return-1!=o&&-1!=r&&(a.source=i,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(e,t,n){function i(e){var n;function i(){if(i.enabled){var e=i,o=+new Date,r=o-(n||o);e.diff=r,e.prev=n,e.curr=o,n=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,i){if("%%"===n)return n;c++;var o=t.formatters[i];if("function"==typeof o){var r=s[c];n=o.call(e,r),s.splice(c,1),c--}return n}),t.formatArgs.call(e,s),(i.log||t.log||console.log.bind(console)).apply(e,s)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),i.destroy=o,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var i=("string"==typeof e?e:"").split(/[\s,]+/),o=i.length;for(n=0;n<o;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var r=t.instances[n];r.enabled=t.enabled(r.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(242),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e){var t=1e3,n=6e4,i=36e5,o=24*i;function r(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,s){s=s||{};var a,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var s=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===c&&!1===isNaN(e))return s.long?r(a=e,o,"day")||r(a,i,"hour")||r(a,n,"minute")||r(a,t,"second")||a+" ms":function(e){return e>=o?Math.round(e/o)+"d":e>=i?Math.round(e/i)+"h":e>=n?Math.round(e/n)+"m":e>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(i){function o(){var e;try{e=t.storage.debug}catch(n){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e}(t=e.exports=n(244)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var o=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(r=++o)}),e.splice(r,0,i)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=o,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(o())}).call(t,n(73))},function(e,t,n){function i(e){var n;function i(){if(i.enabled){var e=i,o=+new Date,r=o-(n||o);e.diff=r,e.prev=n,e.curr=o,n=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,i){if("%%"===n)return n;c++;var o=t.formatters[i];if("function"==typeof o){var r=s[c];n=o.call(e,r),s.splice(c,1),c--}return n}),t.formatArgs.call(e,s),(i.log||t.log||console.log.bind(console)).apply(e,s)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),i.destroy=o,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var i=("string"==typeof e?e:"").split(/[\s,]+/),o=i.length;for(n=0;n<o;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var r=t.instances[n];r.enabled=t.enabled(r.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(245),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e){var t=1e3,n=6e4,i=36e5,o=24*i;function r(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,s){s=s||{};var a,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var s=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===c&&!1===isNaN(e))return s.long?r(a=e,o,"day")||r(a,i,"hour")||r(a,n,"minute")||r(a,t,"second")||a+" ms":function(e){return e>=o?Math.round(e/o)+"d":e>=i?Math.round(e/i)+"h":e>=n?Math.round(e/n)+"m":e>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e){function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<i.length;o++)if((n=i[o])===t||n.fn===t){i.splice(o,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var i=0,o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},function(e,t,n){e.exports=n(249),e.exports.parser=n(34)},function(e,t,n){var i=r(n(72)),o=r(n(20));function r(e){return e&&e.__esModule?e:{default:e}}var s=n(112),a=n(113),c=(n(78)("engine.io-client:socket"),n(265)),u=n(34),l=n(266),d=n(76);function f(e,t){if(!(this instanceof f))return new f(e,t);t=t||{},e&&"object"===(void 0===e?"undefined":(0,o.default)(e))&&(t=e,e=null),e?(e=l(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=l(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&(0,i.default)(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=f,f.priorWebsocketSuccess=!1,a(f.prototype),f.protocol=u.protocol,f.Socket=f,f.Transport=n(75),f.transports=n(112),f.parser=n(34),f.prototype.createTransport=function(e){var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=u.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new s[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},f.prototype.open=function(){var e;if(this.rememberUpgrade&&f.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(n){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},f.prototype.setTransport=function(e){e.name;var t=this;this.transport&&(this.transport.name,this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},f.prototype.probe=function(e){var t=this.createTransport(e,{probe:1}),n=!1,i=this;function o(){if(i.onlyBinaryUpgrades){var e=!this.supportsBinary&&i.transport.supportsBinary;n=n||e}n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",function(e){if(!n)if("pong"===e.type&&"probe"===e.data){if(i.upgrading=!0,i.emit("upgrading",t),!t)return;f.priorWebsocketSuccess="websocket"===t.name,i.transport.name,i.transport.pause(function(){n||"closed"!==i.readyState&&(l(),i.setTransport(t),t.send([{type:"upgrade"}]),i.emit("upgrade",t),t=null,i.upgrading=!1,i.flush())})}else{var o=new Error("probe error");o.transport=t.name,i.emit("upgradeError",o)}}))}function r(){n||(n=!0,l(),t.close(),t=null)}function s(e){var n=new Error("probe error: "+e);n.transport=t.name,r(),i.emit("upgradeError",n)}function a(){s("transport closed")}function c(){s("socket closed")}function u(e){t&&e.name!==t.name&&(e.name,t.name,r())}function l(){t.removeListener("open",o),t.removeListener("error",s),t.removeListener("close",a),i.removeListener("close",c),i.removeListener("upgrading",u)}f.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",s),t.once("close",a),this.once("close",c),this.once("upgrading",u),t.open()},f.prototype.onOpen=function(){if(this.readyState="open",f.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])},f.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(e.type,e.data,this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else this.readyState},f.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},f.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},f.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){e.pingTimeout,e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},f.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},f.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},f.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.writeBuffer.length,this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},f.prototype.write=f.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},f.prototype.sendPacket=function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}},f.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?i():t()}):this.upgrading?i():t()}function t(){e.onClose("forced close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function i(){e.once("upgrade",n),e.once("upgradeError",n)}return this},f.prototype.onError=function(e){f.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},f.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},f.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;n<i;n++)~c(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t,n){(function(t){var i=n(252),o=n(77);e.exports=l;var r,s=/\n/g,a=/\\n/g;function c(){}function u(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{}}function l(e){if(i.call(this,e),this.query=this.query||{},!r){var t=u();r=t.___eio=t.___eio||[]}this.index=r.length;var n=this;r.push(function(e){n.onData(e)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){n.script&&(n.script.onerror=c)},!1)}o(l,i),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},l.prototype.doWrite=function(e,t){var n=this;if(!this.form){var i,o=document.createElement("form"),r=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=c,o.method="POST",o.setAttribute("accept-charset","utf-8"),r.name="d",o.appendChild(r),document.body.appendChild(o),this.form=o,this.area=r}function u(){l(),t()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';i=document.createElement(e)}catch(t){(i=document.createElement("iframe")).name=n.iframeId,i.src="javascript:0"}i.id=n.iframeId,n.form.appendChild(i),n.iframe=i}this.form.action=this.uri(),l(),e=e.replace(a,"\\\n"),this.area.value=e.replace(s,"\\n");try{this.form.submit()}catch(d){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&u()}:this.iframe.onload=u}}).call(t,n(251))},function(e){var t;t=function(){return this}();try{t=t||Function("","return this")()||(0,eval)("this")}catch(n){"object"==typeof window&&(t=window)}e.exports=t},function(e,t,n){var i=n(75),o=n(76),r=n(34),s=n(77),a=n(114);n(78)("engine.io-client:polling"),e.exports=u;var c=null!=new(n(261))({xdomain:!1}).responseType;function u(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),i.call(this,e)}s(u,i),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(e){var t=this;function n(){t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||n()})),this.writable||(i++,this.once("drain",function(){--i||n()}))}else n()},u.prototype.poll=function(){this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(e){var t=this;r.decodePayload(e,this.socket.binaryType,function(e){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():this.readyState)},u.prototype.doClose=function(){var e=this;function t(){e.write([{type:"close"}])}"open"===this.readyState?t():this.once("open",t)},u.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};r.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){var i,o=(i=n(72))&&i.__esModule?i:{default:i};e.exports=o.default||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},function(t,n,i){var o=i(255),r=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);t.exports=function t(n){if(!n||"object"!=typeof n)return!1;if(o(n)){for(var i=0,r=n.length;i<r;i++)if(t(n[i]))return!0;return!1}if("function"==typeof e&&e.isBuffer&&e.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||s&&n instanceof Blob||a&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return t(n.toJSON(),!0);for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)&&t(n[c]))return!0;return!1}},function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},function(e){function t(){}e.exports=function(e,n,i){var o=!1;return i=i||t,r.count=e,0===e?n():r;function r(e,t){if(r.count<=0)throw new Error("after called too many times");--r.count,e?(o=!0,n(e),n=i):0!==r.count||o||n(null,t)}}},function(e){var t,n,i,o=String.fromCharCode;function r(e){for(var t,n,i=[],o=0,r=e.length;o<r;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<r?56320==(64512&(n=e.charCodeAt(o++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),o--):i.push(t);return i}function s(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function a(e,t){return o(e>>t&63|128)}function c(e,t){if(0==(4294967168&e))return o(e);var n="";return 0==(4294965248&e)?n=o(e>>6&31|192):0==(4294901760&e)?(s(e,t)||(e=65533),n=o(e>>12&15|224),n+=a(e,6)):0==(4292870144&e)&&(n=o(e>>18&7|240),n+=a(e,12),n+=a(e,6)),n+o(63&e|128)}function u(){if(i>=n)throw Error("Invalid byte index");var e=255&t[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function l(e){var o,r;if(i>n)throw Error("Invalid byte index");if(i==n)return!1;if(o=255&t[i],i++,0==(128&o))return o;if(192==(224&o)){if((r=(31&o)<<6|u())>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&o)){if((r=(15&o)<<12|u()<<6|u())>=2048)return s(r,e)?r:65533;throw Error("Invalid continuation byte")}if(240==(248&o)&&(r=(7&o)<<18|u()<<12|u()<<6|u())>=65536&&r<=1114111)return r;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,i=r(e),o=i.length,s=-1,a="";++s<o;)a+=c(i[s],n);return a},decode:function(e,s){var a=!1!==(s=s||{}).strict;t=r(e),n=t.length,i=0;for(var c,u=[];!1!==(c=l(a));)u.push(c);return function(e){for(var t,n=e.length,i=-1,r="";++i<n;)(t=e[i])>65535&&(r+=o((t-=65536)>>>10&1023|55296),t=56320|1023&t),r+=o(t);return r}(u)}}},function(e){var t=void 0!==t?t:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),o=t&&t.prototype.append&&t.prototype.getBlob;function r(e){return e.map(function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e})}function s(e,n){n=n||{};var i=new t;return r(e).forEach(function(e){i.append(e)}),n.type?i.getBlob(n.type):i.getBlob()}function a(e,t){return new Blob(r(e),t||{})}"undefined"!=typeof Blob&&(s.prototype=Blob.prototype,a.prototype=Blob.prototype),e.exports=n?i?Blob:a:o?s:void 0},function(e,t,n){function i(e){var n;function i(){if(i.enabled){var e=i,o=+new Date,r=o-(n||o);e.diff=r,e.prev=n,e.curr=o,n=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,i){if("%%"===n)return n;c++;var o=t.formatters[i];if("function"==typeof o){var r=s[c];n=o.call(e,r),s.splice(c,1),c--}return n}),t.formatArgs.call(e,s),(i.log||t.log||console.log.bind(console)).apply(e,s)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),i.destroy=o,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var i=("string"==typeof e?e:"").split(/[\s,]+/),o=i.length;for(n=0;n<o;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var r=t.instances[n];r.enabled=t.enabled(r.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(260),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e){var t=1e3,n=6e4,i=36e5,o=24*i;function r(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,s){s=s||{};var a,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(r){var s=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===c&&!1===isNaN(e))return s.long?r(a=e,o,"day")||r(a,i,"hour")||r(a,n,"minute")||r(a,t,"second")||a+" ms":function(e){return e>=o?Math.round(e/o)+"d":e>=i?Math.round(e/i)+"h":e>=n?Math.round(e/n)+"m":e>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){var i=n(262);e.exports=function(e){var t=e.xdomain,n=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(r){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(r){}if(!t)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(r){}}},function(e){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(t,n,i){var o,r,s,a=(o=i(20))&&o.__esModule?o:{default:o},c=i(75),u=i(34),l=i(76),d=i(77),f=i(114);if(i(78)("engine.io-client:websocket"),"undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket)if("undefined"!=typeof WebSocket)r=WebSocket;else if("undefined"!=typeof self)r=self.WebSocket||self.MozWebSocket;else try{s=i(264)}catch(y){}var h=r||s;function p(e){e&&e.forceBase64&&(this.supportsBinary=!1),("undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket)&&(this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(h=s)),c.call(this,e)}"undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket||(h=function(e){var t=this;if(t.onopen=function(){},t.onclose=function(){},t.onmessage=function(){},t.onerror=function(){},"object"===("undefined"==typeof tt?"undefined":(0,a.default)(tt))&&tt.getSystemInfo){var n=tt.connectSocket({url:e});t.send=function(e){n.send({data:e})},t.close=function(){n.close()},n.onOpen(function(){t.onopen()}),n.onError(function(e){t.onerror(e)}),n.onMessage(function(e){t.onmessage(e)}),n.onClose(function(){t.onclose()})}else"undefined"!=typeof uni?(t.send=function(e){uni.sendSocketMessage({data:e})},t.close=function(){uni.closeSocket()},uni.onSocketOpen(function(){t.onopen()}),uni.onSocketError(function(e){t.onerror(e)}),uni.onSocketMessage(function(e){t.onmessage(e)}),uni.onSocketClose(function(){t.onclose()}),uni.connectSocket({url:e})):(t.send=function(e){wx.sendSocketMessage({data:e})},t.close=function(){wx.closeSocket()},wx.onSocketOpen(function(){t.onopen()}),wx.onSocketError(function(e){t.onerror(e)}),wx.onSocketMessage(function(e){t.onmessage(e)}),wx.onSocketClose(function(){t.onclose()}),wx.connectSocket({url:e}))}),t.exports=p,d(p,c),p.prototype.name="websocket",p.prototype.supportsBinary=!1,p.prototype.doOpen=function(){if(this.check()){var e,t,n=this.uri();("undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket)&&(e=this.protocols),(t="undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket?{agent:this.agent,perMessageDeflate:this.perMessageDeflate}:{agent:this.agent}).pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(t.headers=this.extraHeaders),this.localAddress&&(t.localAddress=this.localAddress);try{"undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket?this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new h(n,e):new h(n):new h(n,e,t):this.ws=new h(n)}catch(o){return this.emit("error",o)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},p.prototype.write=function(t){var n=this;this.writable=!1;for(var i=t.length,o=0,r=i;o<r;o++)!function(t){u.encodePacket(t,n.supportsBinary,function(o){if("undefined"==typeof uni&&"undefined"==typeof wx||"undefined"!=typeof WebSocket){if(!n.usingBrowserWebSocket){var r={};t.options&&(r.compress=t.options.compress),n.perMessageDeflate&&("string"==typeof o?e.byteLength(o):o.length)<n.perMessageDeflate.threshold&&(r.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(o):n.ws.send(o,r)}catch(y){}}else try{n.ws.send(o)}catch(y){}--i||(n.emit("flush"),setTimeout(function(){n.writable=!0,n.emit("drain")},0))})}(t[o])},p.prototype.onClose=function(){c.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=f()),this.supportsBinary||(e.b64=1),(e=l.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},p.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===p.prototype.name)}},function(){},function(e){var t=[].indexOf;e.exports=function(e,n){if(t)return e.indexOf(n);for(var i=0;i<e.length;++i)if(e[i]===n)return i;return-1}},function(e){var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var i=e,o=e.indexOf("["),r=e.indexOf("]");-1!=o&&-1!=r&&(e=e.substring(0,o)+e.substring(o,r).replace(/:/g,";")+e.substring(r,e.length));for(var s=t.exec(e||""),a={},c=14;c--;)a[n[c]]=s[c]||"";return-1!=o&&-1!=r&&(a.source=i,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(e){e.exports=function(e,t){for(var n=[],i=(t=t||0)||0;i<e.length;i++)n[i-t]=e[i];return n}},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,o=n.length;i<o;i++){var r=n[i].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}},function(t,n,i){var o=i(270),r=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);t.exports=function t(n){if(!n||"object"!=typeof n)return!1;if(o(n)){for(var i=0,r=n.length;i<r;i++)if(t(n[i]))return!0;return!1}if("function"==typeof e&&e.isBuffer&&e.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||s&&n instanceof Blob||a&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return t(n.toJSON(),!0);for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)&&t(n[c]))return!0;return!1}},function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},function(e){var t=[].indexOf;e.exports=function(e,n){if(t)return e.indexOf(n);for(var i=0;i<e.length;++i)if(e[i]===n)return i;return-1}},function(e){function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=d(n(3)),o=d(n(0)),r=d(n(1)),s=d(n(4)),a=d(n(12)),c=d(n(5)),u=d(n(110)),l=d(n(28));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,o.default)(this,t);var n=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return n.reconnectingObservers=[],n.addReconnectingObserver(e.onReconnecting),n.addDisconnectedObserver(e.onDisconnected),n}return(0,c.default)(t,e),(0,r.default)(t,[{key:"connect",value:function(e){(0,a.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"connect",this).call(this),this.io=this.io.connect(e.uri,e.opts),this.initListener()}},{key:"doEmit",value:function(e,t,n){this.io.emit(e,t,n)}},{key:"initListener",value:function(){var e=this;this.io.on("reconnecting",function(t){e.status=l.default.CONNECTING,e.notify(e.reconnectingObservers,t)}),this.io.on("connect",function(){e.status=l.default.CONNECTED,e.notify(e.connectedObservers)}),this.io.on("disconnect",function(){e.status=l.default.DISCONNECTED,e.notify(e.disconnectedObservers)}),this.io.on("connect_error",function(){})}},{key:"addReconnectingObserver",value:function(e){this.reconnectingObservers.push(e)}}]),t}(u.default);t.default=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(0)),o=s(n(1)),r=n(2);function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){(0,i.default)(this,e),this.callback=r.noop,this.guidList=[],this.callback=t}return(0,o.default)(e,[{key:"onMessage",value:function(e,t){"string"==typeof t&&(t=JSON.parse(t)),this.guidList.findIndex(function(e){return e===t.i})>-1||(this.guidList.unshift(t.i),this.guidList.length>300&&this.guidList.pop(),this.callback(t))}}]),e}();t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(33)),o=u(n(6)),r=u(n(0)),s=u(n(1)),a=n(2),c=n(119);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){(0,r.default)(this,e),this.goEasySocket=null,this.goEasySocket=t,this.support()&&(this.GoEasyUniapp=uni.requireNativePlugin("GoEasy-Uniapp"),t.addMessageObserver("imMessage",this.onNewMessageReceived.bind(this)),t.addMessageObserver("message",this.onNewMessageReceived.bind(this)))}return(0,s.default)(e,[{key:"onNewMessageReceived",value:function(e){this.createLocalNotification(e)}},{key:"createLocalNotification",value:function(e){if(a.calibrator.isObject(e.nt)&&!0===c.uniApp.runningBackend()){var t=e.nt.t,n=e.nt.c;this.GoEasyUniapp?this.GoEasyUniapp.createLocalNotification(t,n):plus.push.createMessage(n,null,{title:t})}}},{key:"getRegId",value:function(){var e=this;return new o.default(function(t){try{e.GoEasyUniapp?e.GoEasyUniapp.regId(function(e){t(e)},function(n){if(1e6==n.data.code)var o=setInterval(function(){e.GoEasyUniapp.regId(function(e){clearInterval(o),t(e)},function(e){1e6!=e.data.code&&(clearInterval(o),console.error("\u6ce8\u518c\u5382\u5546\u901a\u9053\u5931\u8d25\uff1a"+(0,i.default)(e)),t())})},5e3);else console.error("\u6ce8\u518c\u5382\u5546\u901a\u9053\u5931\u8d25\uff1a"+(0,i.default)(n)),t()}):(console.error("\u6ce8\u518c\u5382\u5546\u901a\u9053\u5931\u8d25\uff1aGoEasy-Uniapp is not installed correctly"),t())}catch(o){console.error("\u6ce8\u518c\u5382\u5546\u901a\u9053\u5931\u8d25\uff1a"+(0,i.default)(o)),t()}})}},{key:"support",value:function(){return a.env.isUni()&&!0===this.goEasySocket.allowNotification&&a.env.isSupportHtmlPlus()&&!a.env.isBrowserClient()}}]),e}();t.default=l},function(e){e.exports={name:"goeasy",version:"2.0.12",description:"goeasy socket",keywords:["realtime","framework","websocket","tcp","events","client"],files:["dist/"],main:"dist/goeasy.min.js",scripts:{build:"npm run build-goeasy","build-snapshot":"npm run build-goeasy && npm run build-goeasy-dev","build-goeasy":"./node_modules/.bin/webpack --config build/webpack.goeasy.config.js","build-goeasy-dev":"./node_modules/.bin/webpack --config build/webpack.goeasy-dev.config.js","start:dev":"webpack-dev-server --open --progress --config build/webpack.serve.config.js"},license:"MIT",dependencies:{"socket.io-client-goeasy":"./dependencies/socket.io-client-goeasy"},devDependencies:{"babel-core":"^6.26.3","babel-loader":"^7.1.4","babel-plugin-add-module-exports":"^0.2.1","babel-plugin-transform-class-properties":"^6.24.1","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.7.0","babel-runtime":"^6.26.0","core-js":"^3.11.3","es3ify-loader":"^0.2.0","html-webpack-plugin":"^3.2.0","strip-loader":"^0.1.2","uglifyjs-webpack-plugin":"^1.3.0",uuid:"^3.3.2",webpack:"^3.12.0","webpack-dev-server":"^2.11.5"}}}])},"object"==typeof n&&"object"==typeof t?t.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof n?n.GoEasy=o():i.GoEasy=o(),cc._RF.pop()}).call(this,e("buffer").Buffer)},{buffer:2}],prizeInformation:[function(e,t){"use strict";cc._RF.push(t,"409dcppUFVAl6bepj90o461","prizeInformation");var n=e("Model");cc.Class({extends:cc.Component,properties:{},start:function(){},setinformation:function(e){var t=this;cc.assetManager.loadRemote(n.Prizestack_picture[e],{ext:".jpg"},function(e,n){if(e)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);t.node.getComponent(cc.Sprite).spriteFrame=i}})}}),cc._RF.pop()},{Model:"Model"}],qrcode:[function(e,t){"use strict";function n(e){this.mode=o.MODE_8BIT_BYTE,this.data=e}function i(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=new Array}cc._RF.push(t,"070a67bS7tJQIi6TBXapnIu","qrcode"),n.prototype={getLength:function(){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},i.prototype={addData:function(e){var t=new n(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=u.getRSBlocks(e,this.errorCorrectLevel),n=new l,i=0,o=0;o<t.length;o++)i+=t[o].dataCount;for(o=0;o<this.dataList.length;o++){var s=this.dataList[o];n.put(s.mode,4),n.put(s.getLength(),r.getLengthInBits(s.mode,e)),s.write(n)}if(n.getLengthInBits()<=8*i)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[n][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var i=-1;i<=7;i++)t+i<=-1||this.moduleCount<=t+i||(this.modules[e+n][t+i]=0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var i=r.getLostPoint(this);(0==n||e>i)&&(e=i,t=n)}return t},createMovieClip:function(e,t,n){var i=e.createEmptyMovieClip(t,n);this.make();for(var o=0;o<this.modules.length;o++)for(var r=1*o,s=0;s<this.modules[o].length;s++){var a=1*s;this.modules[o][s]&&(i.beginFill(0,100),i.moveTo(a,r),i.lineTo(a+1,r),i.lineTo(a+1,r+1),i.lineTo(a,r+1),i.endFill())}return i},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=r.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var i=e[t],o=e[n];if(null==this.modules[i][o])for(var s=-2;s<=2;s++)for(var a=-2;a<=2;a++)this.modules[i+s][o+a]=-2==s||2==s||-2==a||2==a||0==s&&0==a}},setupTypeNumber:function(e){for(var t=r.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var i=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(n=0;n<18;n++)i=!e&&1==(t>>n&1),this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,i=r.getBCHTypeInfo(n),o=0;o<15;o++){var s=!e&&1==(i>>o&1);o<6?this.modules[o][8]=s:o<8?this.modules[o+1][8]=s:this.modules[this.moduleCount-15+o][8]=s}for(o=0;o<15;o++)s=!e&&1==(i>>o&1),o<8?this.modules[8][this.moduleCount-o-1]=s:o<9?this.modules[8][15-o-1+1]=s:this.modules[8][15-o-1]=s;this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,i=this.moduleCount-1,o=7,s=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var c=0;c<2;c++)if(null==this.modules[i][a-c]){var u=!1;s<e.length&&(u=1==(e[s]>>>o&1)),r.getMask(t,i,a-c)&&(u=!u),this.modules[i][a-c]=u,-1==--o&&(s++,o=7)}if((i+=n)<0||this.moduleCount<=i){i-=n,n=-n;break}}}},i.PAD0=236,i.PAD1=17,i.createData=function(e,t,n){for(var o=u.getRSBlocks(e,t),s=new l,a=0;a<n.length;a++){var c=n[a];s.put(c.mode,4),s.put(c.getLength(),r.getLengthInBits(c.mode,e)),c.write(s)}var d=0;for(a=0;a<o.length;a++)d+=o[a].dataCount;if(s.getLengthInBits()>8*d)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*d+")");for(s.getLengthInBits()+4<=8*d&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*d||(s.put(i.PAD0,8),s.getLengthInBits()>=8*d));)s.put(i.PAD1,8);return i.createBytes(s,o)},i.createBytes=function(e,t){for(var n=0,i=0,o=0,s=new Array(t.length),a=new Array(t.length),u=0;u<t.length;u++){var l=t[u].dataCount,d=t[u].totalCount-l;i=Math.max(i,l),o=Math.max(o,d),s[u]=new Array(l);for(var f=0;f<s[u].length;f++)s[u][f]=255&e.buffer[f+n];n+=l;var h=r.getErrorCorrectPolynomial(d),p=new c(s[u],h.getLength()-1).mod(h);for(a[u]=new Array(h.getLength()-1),f=0;f<a[u].length;f++){var m=f+p.getLength()-a[u].length;a[u][f]=m>=0?p.get(m):0}}var g=0;for(f=0;f<t.length;f++)g+=t[f].totalCount;var y=new Array(g),v=0;for(f=0;f<i;f++)for(u=0;u<t.length;u++)f<s[u].length&&(y[v++]=s[u][f]);for(f=0;f<o;f++)for(u=0;u<t.length;u++)f<a[u].length&&(y[v++]=a[u][f]);return y};for(var o={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},r={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;r.getBCHDigit(t)-r.getBCHDigit(r.G15)>=0;)t^=r.G15<<r.getBCHDigit(t)-r.getBCHDigit(r.G15);return(e<<10|t)^r.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;r.getBCHDigit(t)-r.getBCHDigit(r.G18)>=0;)t^=r.G18<<r.getBCHDigit(t)-r.getBCHDigit(r.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return r.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case 0:return(t+n)%2==0;case 1:return t%2==0;case 2:return n%3==0;case 3:return(t+n)%3==0;case 4:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case 5:return t*n%2+t*n%3==0;case 6:return(t*n%2+t*n%3)%2==0;case 7:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new c([1],0),n=0;n<e;n++)t=t.multiply(new c([1,s.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case o.MODE_NUMBER:return 10;case o.MODE_ALPHA_NUM:return 9;case o.MODE_8BIT_BYTE:case o.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case o.MODE_NUMBER:return 12;case o.MODE_ALPHA_NUM:return 11;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case o.MODE_NUMBER:return 14;case o.MODE_ALPHA_NUM:return 13;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,i=0;i<t;i++)for(var o=0;o<t;o++){for(var r=0,s=e.isDark(i,o),a=-1;a<=1;a++)if(!(i+a<0||t<=i+a))for(var c=-1;c<=1;c++)o+c<0||t<=o+c||0==a&&0==c||s==e.isDark(i+a,o+c)&&r++;r>5&&(n+=3+r-5)}for(i=0;i<t-1;i++)for(o=0;o<t-1;o++){var u=0;e.isDark(i,o)&&u++,e.isDark(i+1,o)&&u++,e.isDark(i,o+1)&&u++,e.isDark(i+1,o+1)&&u++,0!=u&&4!=u||(n+=3)}for(i=0;i<t;i++)for(o=0;o<t-6;o++)e.isDark(i,o)&&!e.isDark(i,o+1)&&e.isDark(i,o+2)&&e.isDark(i,o+3)&&e.isDark(i,o+4)&&!e.isDark(i,o+5)&&e.isDark(i,o+6)&&(n+=40);for(o=0;o<t;o++)for(i=0;i<t-6;i++)e.isDark(i,o)&&!e.isDark(i+1,o)&&e.isDark(i+2,o)&&e.isDark(i+3,o)&&e.isDark(i+4,o)&&!e.isDark(i+5,o)&&e.isDark(i+6,o)&&(n+=40);var l=0;for(o=0;o<t;o++)for(i=0;i<t;i++)e.isDark(i,o)&&l++;return n+Math.abs(100*l/t/t-50)/5*10}},s={glog:function(e){if(e<1)throw new Error("glog("+e+")");return s.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return s.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},a=0;a<8;a++)s.EXP_TABLE[a]=1<<a;for(a=8;a<256;a++)s.EXP_TABLE[a]=s.EXP_TABLE[a-4]^s.EXP_TABLE[a-5]^s.EXP_TABLE[a-6]^s.EXP_TABLE[a-8];for(a=0;a<255;a++)s.LOG_TABLE[s.EXP_TABLE[a]]=a;function c(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var i=0;i<e.length-n;i++)this.num[i]=e[i+n]}function u(e,t){this.totalCount=e,this.dataCount=t}function l(){this.buffer=new Array,this.length=0}c.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<e.getLength();i++)t[n+i]^=s.gexp(s.glog(this.get(n))+s.glog(e.get(i)));return new c(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=s.glog(this.get(0))-s.glog(e.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(i=0;i<e.getLength();i++)n[i]^=s.gexp(s.glog(e.get(i))+t);return new c(n,0).mod(e)}},u.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],u.getRSBlocks=function(e,t){var n=u.getRsBlockTable(e,t);if(null==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var i=n.length/3,o=new Array,r=0;r<i;r++)for(var s=n[3*r+0],a=n[3*r+1],c=n[3*r+2],l=0;l<s;l++)o.push(new u(a,c));return o},u.getRsBlockTable=function(e,t){switch(t){case 1:return u.RS_BLOCK_TABLE[4*(e-1)+0];case 0:return u.RS_BLOCK_TABLE[4*(e-1)+1];case 3:return u.RS_BLOCK_TABLE[4*(e-1)+2];case 2:return u.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},l.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},cc._RF.pop()},{}],rwd:[function(e,t){"use strict";cc._RF.push(t,"70071zniddBV7x/wyEJaTsF","rwd");var n=e("Model");cc.Class({extends:cc.Component,properties:{},onLoad:function(){window.addEventListener("orientationchange",function(){cc.log("\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a\uff1a"+window.orientation);var e=cc.director.getScene().name.replace("V","");cc.sys.isMobile?(cc.view._orientation!=cc.macro.ORIENTATION_AUTO&&cc.view.setOrientation(cc.macro.ORIENTATION_AUTO),180!=window.orientation&&0!=window.orientation||(cc.log("\u7ad6\u5c4f, \u89d2\u5ea6:"+window.orientation),cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT),cc.log("changeScene: "+e+"V"),n.device=1),90!=window.orientation&&-90!=window.orientation||(cc.log("\u6a2a\u5c4f, \u89d2\u5ea6:"+window.orientation),cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE),cc.log("changeScene: "+e),n.device=2)):(cc.director.loadScene(e),n.device=2)})}}),cc._RF.pop()},{Model:"Model"}],weel:[function(e,t){"use strict";cc._RF.push(t,"231fb6ZVWNN944v7V0dlDwZ","weel");var n=e("Model"),i=e("prizeInformation"),o=e("Host1_Congratulations"),r=e("Guest1_PrizeInformation");cc.Class({extends:cc.Component,properties:{wheel:{default:null,type:cc.Node},wheel_out:{default:null,type:cc.Node},Title:{default:null,type:cc.Node},TopLight:{default:null,type:cc.Node},Nail:{default:null,type:cc.Node},wheel_out_Light:{default:null,type:cc.Node},Prize:{default:null,type:cc.Node},ChanceText:{default:null,type:cc.Label},AlretNode:{default:null,type:cc.Node},cannnottouch:{default:null,type:cc.Node},Prizes_Infor:{default:null,type:cc.Node},items:{default:null,type:cc.Prefab},items_parent:{default:null,type:cc.Node},Steam:{default:null,type:cc.Node},wheel_sound:{default:[],type:cc.AudioClip},prize_picture:{default:null,type:cc.Node}},onLoad:function(){n.Game_js=this,n.Prize_Infromation(),this.indexcount=0,this.index=[],this.itemlist=[],this.Prize_total=8,this.wheelState=0,this.Prize_ID=0,this.IDAngle=360/this.Prize_total,this.Prize_Angle=0,this.prizenode=this.Prize.getChildByName("\u5f97\u734e\u61f8\u6d6e\u7a97"),this.Wheel_Prize=cc.find("\u756b\u5e03/\u8f2a\u76e4/\u8f2a\u76e4_\u5167/\u734e\u9805"),this.GamePrizeInfor=cc.find("\u756b\u5e03").getComponent(r),this.ThanksJoin=[]},start:function(){"guest"==n.role?(this.ChanceText.string=n.chance,n.mode="simultaneous"):n.mode="order",this.AlertText=this.AlretNode.getChildByName("\u8b66\u544a\u6587\u5b57").getComponent(cc.Label)},SpawnPrize:function(){for(var e=0;e<n.Prizestack_id.length;e++)""==n.Prizestack_id[e]&&this.ThanksJoin.push(e),this.Prizes_Infor.children[e].getComponent(cc.Label).string=n.Prizestack_name[e],this.Prizes_Infor.children[e].getChildByName("\u734e\u54c1\u7167\u7247\u6846").getChildByName("\u906e\u7f69").getChildByName("\u734e\u54c1\u7167\u7247").getComponent(i).setinformation(e)},StartBtn:function(){if(""!=n.CannotJoinGame)return this.AlertText.string="\u6c92\u6709\u734e\u54c1\u4e86\uff0c\u7121\u6cd5\u62bd\u734e\uff0c\u8acb\u4e3b\u6301\u4eba\u65b0\u589e\u734e\u54c1\u5f8c\u91cd\u65b0\u5237\u65b0\u9801\u9762",void(this.AlretNode.active=!0);if(0===this.wheelState&&("order"==n.mode||"host"!=n.role)){if("guest"==n.role){if(0==n.chance)return this.AlertText.string="\u6c92\u6709\u62bd\u734e\u6a5f\u6703\u4e86\uff0c\u7121\u6cd5\u62bd\u734e",void(this.AlretNode.active=!0);if("close"==n.AllowRePrize&&n.PrizeStaffs.length>0)return this.AlertText.string="\u932f\u8aa4 :\u8a72\u5834\u6b21\u904a\u6232\u4e0d\u5141\u8a31\u91cd\u8907\u4e2d\u734e\uff0c\u60a8\u5df2\u4e2d\u734e\uff0c\u7121\u6cd5\u53c3\u52a0\u904a\u6232\u62bd\u734e",void(this.AlretNode.active=!0);n.chance--,this.ChanceText.string=n.chance}"host"==n.role&&(this.currentsound=cc.audioEngine.play(this.wheel_sound[0],!1,1)),this.cannnottouch.active=!0,this.wheelState=1,this.aniSlow_In()}},aniSlow_In:function(){var e=this;this.wheel_out_Light.getComponent(sp.Skeleton).setAnimation(0,"Rotate",!0),this.wheel_out_Light.getComponent(sp.Skeleton).timeScale=5;var t=cc.tween(this.wheel).by(2,{angle:360},{easing:"circIn"}).call(function(){e.wheel_out_Light.getComponent(sp.Skeleton).timeScale=10}),i=cc.tween(this.wheel).by(.35,{angle:360}).repeatForever();this.ani_wheelState1=cc.tween(this.wheel).then(t).then(i).start(),"host"==n.role&&this.scheduleOnce(function(){this.currentsound=cc.audioEngine.play(this.wheel_sound[1],!0,1)},2),this.scheduleOnce(function(){n.Lottery_Guest()},5)},lettorey:function(){if("host"==n.role&&cc.audioEngine.pauseAllEffects(),""!=n.CannotJoinGame)return this.wheel_out_Light.getComponent(sp.Skeleton).timeScale=1,this.wheel_out_Light.getComponent(sp.Skeleton).setAnimation(0,"5",!1),this.wheel_out.getComponent(sp.Skeleton).setAnimation(0,"Broken",!0),this.Title.getComponent(sp.Skeleton).setAnimation(0,"Broken",!1),this.Nail.getComponent(sp.Skeleton).setAnimation(0,"Broken",!1),cc.director.getScene()._name.includes("Host")?(this.Steam.getComponent(sp.Skeleton).setAnimation(0,"Broken_PC",!0),this.currentsound=cc.audioEngine.play(this.wheel_sound[9],!1,.7)):this.Steam.getComponent(sp.Skeleton).setAnimation(0,"Broken_M",!1),void this.scheduleOnce(function(){this.AlertText.string="\u6c92\u6709\u734e\u54c1\u4e86\uff0c\u7121\u6cd5\u62bd\u734e\uff0c\u8acb\u4e3b\u6301\u4eba\u65b0\u589e\u734e\u54c1\u5f8c\u91cd\u65b0\u5237\u65b0\u9801\u9762",this.AlretNode.active=!0,this.ani_wheelState1.stop(),this.wheel.rotation=0},1.2);for(var e=0;e<n.Prizestack_id.length;e++)if(""!=n.prize_ID&&n.Prizestack_id[e]==n.prize_ID)this.Prize_ID=e;else if(""==n.prize_ID){var t=Math.floor(Math.random()*this.ThanksJoin.length);this.Prize_ID=this.ThanksJoin[t]}"host"==n.role&&(this.currentsound=cc.audioEngine.play(this.wheel_sound[2],!1,1)),this.Prize_Angle=this.Prize_ID*this.IDAngle,this.FinalAngle=this.Prize_Angle+Math.floor(Math.random()*(this.IDAngle-4)+3),this.wheelState=2,this.aniSlow_Out()},aniSlow_Out:function(){var e=this;this.ani_wheelState1.stop();var t=1==Math.round(Math.random())?"circOut":"backOut",n=360*Math.ceil(this.wheel.angle/360)-this.wheel.angle;this.wheel_out_Light.getComponent(sp.Skeleton).timeScale=5,cc.tween(this.wheel).by(5,{angle:360+n+e.FinalAngle},{easing:t}).call(function(){e.StopWeel()}).start()},StopWeel:function(){this.wheel_out_Light.getComponent(sp.Skeleton).timeScale=1,"first"==n.prize_type?(this.wheel_out_Light.getComponent(sp.Skeleton).setAnimation(0,"1",!1),this.wheel_out.getComponent(sp.Skeleton).setAnimation(0,"Roll",!1),this.Title.getComponent(sp.Skeleton).setAnimation(0,"Roll",!1),this.Nail.getComponent(sp.Skeleton).setAnimation(0,"Roll",!1),cc.director.getScene()._name.includes("Host")?(this.TopLight.getComponent(sp.Skeleton).setAnimation(0,"Roll_PC",!1),this.currentsound=cc.audioEngine.play(this.wheel_sound[3],!1,.5)):this.TopLight.getComponent(sp.Skeleton).setAnimation(0,"Roll_M",!1)):"second"==n.prize_type?(this.wheel_out_Light.getComponent(sp.Skeleton).setAnimation(0,"2",!1),"host"==n.role&&(this.currentsound=cc.audioEngine.play(this.wheel_sound[4],!1,1))):"third"==n.prize_type?(this.wheel_out_Light.getComponent(sp.Skeleton).setAnimation(0,"3",!1),"host"==n.role&&(this.currentsound=cc.audioEngine.play(this.wheel_sound[5],!1,1))):"special"==n.prize_type?(this.wheel_out_Light.getComponent(sp.Skeleton).setAnimation(0,"4",!1),"host"==n.role&&(this.currentsound=cc.audioEngine.play(this.wheel_sound[6],!1,1))):"thanks"==n.prize_type&&(this.wheel_out_Light.getComponent(sp.Skeleton).setAnimation(0,"5",!1),"host"==n.role&&(this.currentsound=cc.audioEngine.play(this.wheel_sound[7],!1,1))),cc.tween(this.Wheel_Prize.children[this.Prize_ID].getChildByName("\u6247\u5f62")).to(.3,{opacity:255}).start(),"guest"==n.role&&"thanks"!=n.prize_type&&this.GamePrizeInfor.SpawnPrize(),this.scheduleOnce(function(){this.cannnottouch.active=!1,this.ShowPrize()},2.3)},ClearWheelEffect:function(){this.wheel_out_Light.getComponent(sp.Skeleton).setAnimation(0,"usual",!0),this.wheel_out.getComponent(sp.Skeleton).clearTracks(),this.Title.getComponent(sp.Skeleton).setAnimation(0,"Usuall",!0),this.Nail.getComponent(sp.Skeleton).clearTracks(),this.TopLight.getComponent(sp.Skeleton).setAnimation(0,"usual",!1),this.Steam.getComponent(sp.Skeleton).setAnimation(0,"Usuall",!1)},ShowPrize:function(){var e=this;cc.assetManager.loadRemote(n.prize_picture,{ext:".jpg"},function(t,n){if(t)console.log("\u932f\u8aa4");else{var i=new cc.SpriteFrame(n);e.prize_picture.getComponent(cc.Sprite).spriteFrame=i}}),this.Prize.getChildByName("\u5f97\u734e\u61f8\u6d6e\u7a97").getChildByName("\u734e\u9805").getComponent(cc.Label).string=n.prize_name_guest,this.Prize.getChildByName("\u5f97\u734e\u61f8\u6d6e\u7a97").getChildByName("\u54ed\u81c9").active="thanks"==n.prize_type,this.Prize.getChildByName("\u5f97\u734e\u61f8\u6d6e\u7a97").getChildByName("\u5f97\u734e_\u4e2d\u592e\u5716\u6a19").active="thanks"!=n.prize_type,this.Prize.active=!0,this.PrizeAni(),"host"==n.role&&"thanks"!=n.prize_type&&(this.currentsound=cc.audioEngine.play(this.wheel_sound[8],!1,1)),"order"==n.mode&&"guest"!=n.role&&"thanks"!=n.prize_type&&this.Congratulations()},PrizeAni:function(){this.wheelState=0,cc.tween(this.prizenode).to(1,{scale:1},{easing:"elasticOut"}).start()},Congratulations:function(){this.indexcount++,this.index.push(this.indexcount);var e=cc.instantiate(this.items);e.parent=this.items_parent,e.setSiblingIndex(0);var t=e.getComponent(o);this.itemlist.push(t),this.itemlist[this.indexcount-1].updateInfo(this.indexcount-1)},closeFuc:function(e,t){"prize"==t?(this.Prize.active=!1,this.ClearWheelEffect(),this.Wheel_Prize.children[this.Prize_ID].getChildByName("\u6247\u5f62").opacity=0):"alret"==t&&""==n.CannotJoinGame&&(this.AlretNode.active=!1),this.prizenode.scale=0},update:function(){"close"==n.GameStatusMessage&&"guest"==n.role&&(this.AlertText.string="\u8acb\u7b49\u5f85\u4e3b\u8fa6\u65b9\u958b\u555f\u540c\u6642\u53c3\u8207\u6a21\u5f0f\u624d\u80fd\u9032\u884c\u904a\u6232",this.AlretNode.active=!0)}}),cc._RF.pop()},{Guest1_PrizeInformation:"Guest1_PrizeInformation",Host1_Congratulations:"Host1_Congratulations",Model:"Model",prizeInformation:"prizeInformation"}]},{},["Guest4_ShakeRedpacket","Guest4_CatchRedpacket","Guest4_Whack_a_mole","Guest_MouseManager","Host_MouseManager","Host_RandomSpawn","Guest2_WaitingForQuestion","Guest3_Game","Host2_ShowQuestion","Host3_Game","LightControl","Host1_ComboBox","Host1_Congratulations","Host1_WeelShowWinner","Jiugongge","prizeInformation","weel","Host_Game","Money","SaveMoney","Guest4_TugOfWar","NewScript","ani","Ani_Color","Ani_Opacity","Ani_Opacity_Progressive","Ani_PositionIN","Ani_Scale","Ani_UPandDOWN","BackGround_Theme","BeforeGameCountDown","ColorString","Customize_Skin","Guest1_ConfirmDeviceMotionEvent","Guest1_JoinGame","Guest1_PrizeInformation","Guest2_WaitForStart","Guest4_GameCountDown","Guest4_GameCountDown_ShowTime","Guest5_Prize","Guest5_PrizeRecordItem","Guest_rwdPlayer","Host1_Begin","Host3_GameTimeCountDown","Host3_GameTimeCountDown_competition","Host3_ShowNewWinner","Host3_ShowNewWinner_NewestWinner","Host3_ShowNewWinner_Score","Host3_WinRecordItem","Host3_WinRecordItem_Score","Host4_ShowWinner","Host4_ShowWinner_Score","Host4_WinnerRedpaket","Host4_WinnerRedpaket_Score","Model","RoleConfirm","Skin","HelloWorld","Host1_QRC","goeasy-2.0.12.min","qrcode","rwd"]);