window.__require=function t(e,o,i){function n(s,a){if(!o[s]){if(!e[s]){var r=s.split("/");if(r=r[r.length-1],!e[r]){var l="function"==typeof __require&&__require;if(!a&&l)return l(r,!0);if(c)return c(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var h=o[s]={exports:{}};e[s][0].call(h.exports,function(t){return n(e[s][1][t]||t)},h,h.exports,t,e,o,i)}return o[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({"3D_sign":[function(t,e){"use strict";cc._RF.push(e,"1a378IelL9He5Qb3OusyX/t","3D_sign"),cc.Class({extends:cc.Component,properties:{items:{default:null,type:cc.Prefab},items2:{default:null,type:cc.Node}},onLoad:function(){this.itemlist=[],this.Arrey1=[],this.Arrey2=[],this.Arrey3=[],this.count=100,this.index=0,this.len=360/33;for(var t=0;t<99;t++){var e=cc.instantiate(this.items);e.parent=cc.find("\u756b\u5e03"),this.itemlist.push(e)}},start:function(){this.schedule(function(){this.PhotoAni()},.1,99)},PhotoAni:function(){var t=this.len*this.index+this.len;this.count<34?(cc.tween(this.itemlist[this.count]).by(.1,{eulerAngles:cc.v3(0,t,0)}).by(.5,{position:cc.v3(0,0,675.75)}).start(),33==this.count&&(this.index=0)):this.count>33&&this.count<67?(cc.tween(this.itemlist[this.count]).by(.1,{eulerAngles:cc.v3(0,t,0)}).by(.5,{position:cc.v3(0,240,675.75)}).start(),66==this.count&&(this.index=0)):this.count>66&&this.count<100&&(cc.tween(this.itemlist[this.count]).by(.1,{eulerAngles:cc.v3(0,t,0)}).by(.5,{position:cc.v3(0,480,675.75)}).start(),99==this.count&&(this.index=0)),this.count--,this.index++}}),cc._RF.pop()},{}],AddObject:[function(t,e){"use strict";cc._RF.push(e,"14e52UQlMtKEbupJRzew1ui","AddObject");var o=t("Model"),i=t("ItemsData"),n=t("MouseControl");cc.Class({extends:cc.Component,properties:{MouseObject:{default:null,type:cc.Node},ObjectItems:{default:[],type:cc.Node}},onLoad:function(){this.choose=!1,this.itemlist=[],this.node.on("mousemove",this.onTouchMove,this)},onTouchMove:function(t){0!=this.choose&&(this.MouseObject.x=t.getLocationX(),this.MouseObject.y=t.getLocationY())},start:function(){this.SpawnObject()},Click:function(t,e){o.MouseType=e,this.MouseObject.getComponent(cc.Sprite).spriteFrame==t.target.getComponent(cc.Sprite).spriteFrame?(this.choose=!1,this.MouseObject.getComponent(cc.Sprite).spriteFrame=null):(this.choose=!0,this.MouseObject.x=t.getLocationX(),this.MouseObject.y=t.getLocationY(),this.MouseObject.getComponent(cc.Sprite).spriteFrame=t.target.getComponent(cc.Sprite).spriteFrame,this.MouseObject.getComponent(cc.BoxCollider).size=this.MouseObject._contentSize,this.MouseObject.getComponent(n).NowData(t.target.getComponent(i).ObjectData),this.MouseObject.getComponent(n).status="\u53ef\u4ee5\u653e\u7f6e\u7269\u4ef6")},SpawnObject:function(){for(var t=0;t<o.ObjectData.length;t++){var e=this.ObjectItems[t].getComponent(i);this.itemlist.push(e),this.itemlist[t].inData(o.ObjectData[t])}},update:function(){}}),cc._RF.pop()},{ItemsData:"ItemsData",Model:"Model",MouseControl:"MouseControl"}],Ani_Color:[function(t,e){"use strict";cc._RF.push(e,"f1c99jfTJ9NaoWnMUnjWq/F","Ani_Color"),cc.Class({extends:cc.Component,properties:{Time:{default:.5,type:cc.Float},Color1:{default:[],type:cc.Float},Color2:{default:[],type:cc.Float},Delay:{default:0,type:cc.Float}},start:function(){this.Twinkling=null},OpenAni:function(){null==this.Twinkling&&this.TwinklingAni()},CloseAni:function(){null!=this.Twinkling&&(this.Twinkling.stop(),this.Twinkling=null)},TwinklingAni:function(){this.Twinkling=cc.tween(this.node).repeatForever(cc.tween().to(this.Time,{color:cc.color(this.Color1[0],this.Color1[1],this.Color1[2])}).to(this.Time,{color:cc.color(this.Color2[0],this.Color2[1],this.Color2[2])}).delay(this.Delay)).start()}}),cc._RF.pop()},{}],AttackRange:[function(t,e){"use strict";cc._RF.push(e,"b3b9c26V0xMFLN7pMONYrwU","AttackRange");var o=t("Role");cc.Class({extends:cc.Component,properties:{},start:function(){var t=cc.director.getCollisionManager();t.enabled=!0,t.enabledDebugDraw=!0},onCollisionEnter:function(t,e){if("\u6575\u4eba"==t.node.group){if(t.node.color=cc.Color.RED,"\u5927\u62db\u653b\u64ca\u7bc4\u570d"==e.node.name)return;e.node.parent.getComponent(o).Sp+=20,e.node.parent.getComponent(o).Sp>100&&(e.node.parent.getComponent(o).Sp=100),e.node.parent.getComponent(o).SpProgressBar()}},onCollisionExit:function(t){"\u6575\u4eba"==t.node.group&&(console.log("\u6253\u5230\u4e86"),t.node.color=cc.Color.WHITE)}}),cc._RF.pop()},{Role:"Role"}],CameraControl:[function(t,e){"use strict";cc._RF.push(e,"2cca9XiQJBD/IjEnvU6bJ5y","CameraControl"),cc.Class({extends:cc.Component,properties:{Player:{default:null,type:cc.Node}},start:function(){},update:function(){var t=this.Player.convertToWorldSpaceAR(cc.v2(0,0)),e=this.node.parent.convertToNodeSpaceAR(t);this.node.position=e}}),cc._RF.pop()},{}],ItemsData:[function(t,e){"use strict";cc._RF.push(e,"3c802QcjhdIgLjk+9KJqq8U","ItemsData"),cc.Class({extends:cc.Component,properties:{},start:function(){},inData:function(t){this.ObjectData=t,console.log(t)}}),cc._RF.pop()},{}],LobbyControl:[function(t,e){"use strict";cc._RF.push(e,"15f31elO0pH+qKx263M5FoI","LobbyControl"),cc.Class({extends:cc.Component,properties:{waitingServer:{default:null,type:cc.Node},waitingStart:{default:null,type:cc.Node}},onLoad:function(){},start:function(){var t=this;console.log("Photon: "+Photon),console.log("Photon.LoadBalancing: "+Photon.LoadBalancing);var e=this;this.client=new Photon.LoadBalancing.LoadBalancingClient(Photon.ConnectionProtocol.Wss,"9f41173a-4fe5-4ce7-b34f-df8362b6e6da",""),this.client.connectToRegionMaster("jp"),this.client.onActorJoin=function(){e.waitingStart.getChildByName("\u7b49\u5f85\u73a9\u5bb6\u52a0\u5165\u6587\u5b57").getComponent(cc.Label).string="\u7b49\u5f85\u73a9\u5bb6\u52a0\u5165"+t.client.myRoomActorCount()+" / 3",3==t.client.myRoomActorCount()&&cc.director.runScene("Room")},this.client.onStateChange=function(e){5==e?(console.log("%c\u5df2\u6210\u529f\u9023\u5230\u4f3a\u670d\u5668","color: #00FF38;"),t.waitingServer.active=!1):0==e&&console.log("%\u4f3a\u670d\u5668\u9023\u63a5\u932f\u8aa4","color: #FF0000;")}},StartMatch:function(){this.client.joinRandomOrCreateRoom(),this.waitingStart.active=!0}}),cc._RF.pop()},{}],MapControl:[function(t,e){"use strict";cc._RF.push(e,"ff014EyUCxPJ5A7ZTRkzH4Y","MapControl");var o=t("Model");cc.Class({extends:cc.Component,properties:{tiledMap:{default:null,type:cc.TiledMap}},onLoad:function(){cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().debugDrawFlags=!0},start:function(){this.GiveWallLayer(),this.SetRoadPos()},GiveWallLayer:function(){for(var t=this.tiledMap.getTileSize(),e=this.tiledMap.getLayer("\u7246\u58c1"),o=e.getLayerSize(),i=0;i<o.width;i++)for(var n=0;n<o.height;n++){var c=e.getTiledTileAt(i,n,!0);if(0!=c.gid){c.node.group="\u7246\u58c1",c.node.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var s=c.node.addComponent(cc.PhysicsBoxCollider);s.offset=cc.v2(t.width/2,t.height/2),s.size=t,s.apply()}}},SetRoadPos:function(){this.tiledMap.getTileSize();for(var t=this.tiledMap.getLayer("\u8d70\u9053"),e=t.getLayerSize(),i=0;i<e.width;i++)for(var n=0;n<e.height;n++){var c=t.getTiledTileAt(i,n,!0);0!=c.gid&&o.TpPosition.push(c.node.convertToWorldSpaceAR(cc.v2(0,0)))}console.log(o.TpPosition)}}),cc._RF.pop()},{Model:"Model"}],Model:[function(t,e){"use strict";cc._RF.push(e,"3433biOa+ZA1Zsj5wn4eUgE","Model"),e.exports={NowTarget:"",ObjectData:[{id:1,name:"\u5c0f\u5713\u684c",tag:"\u4e0d\u53ef\u7a7f\u904e\u7269\u4ef6"},{id:2,name:"\u5927\u5713\u684c",tag:"\u4e0d\u53ef\u7a7f\u904e\u7269\u4ef6"},{id:3,name:"\u8b1b\u684c",tag:"\u4e0d\u53ef\u7a7f\u904e\u7269\u4ef6"}],MouseType:null,TpPosition:[]},cc._RF.pop()},{}],MouseControl:[function(t,e){"use strict";cc._RF.push(e,"89ce9cU3S1AEJ11iB4YEcoV","MouseControl");var o=t("Model");cc.Class({extends:cc.Component,properties:{items:{default:null,type:cc.Prefab},items_parent:{default:null,type:cc.Node},endtext:{default:null,type:cc.Label}},onLoad:function(){var t=cc.director.getCollisionManager();t.enabled=!0,t.enabledDebugDraw=!0,this.status="\u4e0d\u80fd\u653e\u7f6e\u7269\u4ef6"},start:function(){this.CoverObjectCount=0},onCollisionEnter:function(t,e){if(this.CoverObjectCount++,e.Size=e.node.Size,"object"==o.MouseType)this.node.color=cc.Color.RED,this.status="\u4e0d\u80fd\u653e\u7f6e\u7269\u4ef6";else{if("\u73a9\u5bb6"==t.node.group||"\u7246\u58c1"==t.node.group)return;e.Size=e.node.Size,this.node.color=cc.Color.GREEN}},onCollisionExit:function(){this.CoverObjectCount--,this.CoverObjectCount<0&&(this.CoverObjectCount=0),0==this.CoverObjectCount&&(this.node.color=cc.Color.WHITE,"object"==o.MouseType&&(this.status="\u53ef\u4ee5\u653e\u7f6e\u7269\u4ef6"))},NowData:function(t){this.ObjectData=t,console.log(this.node.group)},SpawnObject:function(){if("\u4e0d\u80fd\u653e\u7f6e\u7269\u4ef6"!=this.status&&"eraser"!=o.MouseType){var t=cc.director.getScene(),e=cc.instantiate(this.items);e.parent=t,e.getComponent(cc.Sprite).spriteFrame=this.node.getComponent(cc.Sprite).spriteFrame,e.getComponent(cc.BoxCollider).size=this.node.getComponent(cc.BoxCollider).size,e.getComponent(cc.PhysicsBoxCollider).size=e.getComponent(cc.BoxCollider).size,e.group=this.ObjectData.tag,e.setPosition(this.node.x,this.node.y),e.active=!1,e.active=!0,console.log(e.getComponent(cc.PhysicsBoxCollider).size,this.node.getComponent(cc.BoxCollider).size),e.parent=this.items_parent}},ChangeText:function(){this.endtext.string="\u7d50\u675f\u904a\u6232"}}),cc._RF.pop()},{Model:"Model"}],Role:[function(t,e){"use strict";cc._RF.push(e,"5ac92c6JuBFCI07EUFgboIV","Role");var o={},i=t("Ani_Color"),n=t("Model");cc.Class({extends:cc.Component,properties:{AttackRange:{default:[],type:cc.Node},MpBar:{default:null,type:cc.Sprite},SpBar:{default:null,type:cc.Sprite},SkillBtn:{default:[],type:cc.Button}},onLoad:function(){cc.systemEvent.on("keydown",this.OnKeyDown,this),cc.systemEvent.on("keyup",this.OnKeyUP,this),this.RoleAni=this.node.getComponent(cc.Animation),cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().deBugDrawFlags=!0,this.otherKeyDown=[],this.NowDirection="\u4e0b",this.Attacking=!1,this.Charging=!1,this.currentAni="\u5f80\u4e0b\u5f85\u6a5f",this.Teleporting=!1,this.Shift=!1,this.RoleAni.on("finished",this.onFinished,this),this.Mp=100,this.Sp=0},start:function(){},OnKeyDown:function(t){if(1==o[cc.macro.KEY.space])return 0==this.Charging&&this.RoleAni.play("\u5145\u80fd"),this.Charging=!0,this.Mp=this.Mp<100?this.Mp+1:this.Mp,void this.MpProgressBar();16==t.keyCode&&(o[t.keyCode]=1,this.Shift=!0),console.log(t.keyCode),1!=this.Attacking&&1!=this.Charging&&1!=this.Teleporting&&1!=o[t.keyCode]&&(o[t.keyCode]=1,1!=o[cc.macro.KEY.a]&&1!=o[cc.macro.KEY.d]&&1!=o[cc.macro.KEY.w]&&1!=o[cc.macro.KEY.s]||(65==t.keyCode?this.NowDirection="\u5de6":68==t.keyCode?this.NowDirection="\u53f3":87==t.keyCode?this.NowDirection="\u4e0a":83==t.keyCode&&(this.NowDirection="\u4e0b"),this.otherKeyDown.push(t.keyCode),this.judgeMotion("\u79fb\u52d5")))},OnKeyUP:function(t){if(o[t.keyCode]=0,0==o[cc.macro.KEY.space]&&(this.Charging=!1),0==o[cc.macro.KEY.shift]&&(this.Shift=!1),1!=this.Attacking&&1!=this.Charging&&1!=this.Teleporting){if(this.otherKeyDown.splice(this.otherKeyDown.indexOf(t.keyCode),1),0!=this.otherKeyDown.length)return o[cc.macro.KEY.a]?this.NowDirection="\u5de6":o[cc.macro.KEY.d]?this.NowDirection="\u53f3":o[cc.macro.KEY.w]?this.NowDirection="\u4e0a":o[cc.macro.KEY.s]&&(this.NowDirection="\u4e0b"),void this.judgeMotion("\u79fb\u52d5");this.judgeMotion("\u5f85\u6a5f")}},Attack:function(){1!=this.Attacking&&1!=this.Charging&&1!=this.Teleporting&&(this.Attacking=!0,1!=this.Shift||100!=this.Sp?(this.judgeMotion("\u653b\u64ca"),"\u4e0b"==this.NowDirection?this.AttackRange[1].active=!0:"\u4e0a"==this.NowDirection?this.AttackRange[0].active=!0:"\u5de6"==this.NowDirection?this.AttackRange[2].active=!0:"\u53f3"==this.NowDirection&&(this.AttackRange[3].active=!0)):this.Ultimate())},onFinished:function(){for(var t=0;t<this.AttackRange.length;t++)this.AttackRange[t].active=!1;o[cc.macro.KEY.a]=0,o[cc.macro.KEY.d]=0,o[cc.macro.KEY.w]=0,o[cc.macro.KEY.s]=0,this.otherKeyDown=[],this.Attacking=!1,1==this.Teleporting&&this.Teleport(),this.judgeMotion("\u5f85\u6a5f")},judgeMotion:function(t){"\u4e0b"==this.NowDirection?this.RoleAni.play("\u5f80\u4e0b"+t):"\u4e0a"==this.NowDirection?this.RoleAni.play("\u5f80\u4e0a"+t):"\u5de6"==this.NowDirection?this.RoleAni.play("\u5f80\u5de6"+t):"\u53f3"==this.NowDirection&&this.RoleAni.play("\u5f80\u53f3"+t),this.currentAni="\u5f80"+this.NowDirection+t},Skill1:function(){1!=this.Attacking&&1!=this.Charging&&1!=this.Teleporting&&(this.Attacking=!0,this.Mp-=50,this.RoleAni.play("\u8ff4\u65cb\u76fe"),this.MpProgressBar())},Skill2:function(){1!=this.Attacking&&1!=this.Charging&&1!=this.Teleporting&&(this.Teleporting=!0,this.RoleAni.play("\u98db\u96f7\u795e"),this.MpProgressBar())},Ultimate:function(){this.Sp=0,this.RoleAni.play("\u5927\u62db"),this.SpProgressBar(),this.AttackRange[4].active=!0},Teleport:function(){var t=Math.floor(Math.random()*n.TpPosition.length);this.node.setPosition(this.node.parent.convertToNodeSpaceAR(n.TpPosition[t])),this.Teleporting=!1},MpProgressBar:function(){this.MpBar.fillRange=this.Mp/100,this.Mp<50?this.SkillBtn[0].interactable=!1:this.SkillBtn[0].interactable=!0,this.Mp<100?this.SkillBtn[1].interactable=!1:this.SkillBtn[1].interactable=!0},SpProgressBar:function(){this.SpBar.fillRange=this.Sp/100,100==this.Sp?this.SpBar.node.getComponent(i).OpenAni():(this.SpBar.node.getComponent(i).CloseAni(),this.SpBar.node.color=cc.color(255,200,0,255))},update:function(){var t=this.node.getComponent(cc.RigidBody).linearVelocity;if(1==this.Attacking)return t.y=0,t.x=0,void(this.node.getComponent(cc.RigidBody).linearVelocity=t);"\u5f80\u5de6\u79fb\u52d5"==this.currentAni?(t.y=0,t.x=-1e3):"\u5f80\u53f3\u79fb\u52d5"==this.currentAni?(t.y=0,t.x=1e3):t.x=0,"\u5f80\u4e0a\u79fb\u52d5"==this.currentAni?(t.y=1e3,t.x=0):"\u5f80\u4e0b\u79fb\u52d5"==this.currentAni?(t.y=-1e3,t.x=0):t.y=0,this.node.getComponent(cc.RigidBody).linearVelocity=t}}),cc._RF.pop()},{Ani_Color:"Ani_Color",Model:"Model"}],erase:[function(t,e){"use strict";cc._RF.push(e,"c74713WrW9Djrc4xueEjVWZ","erase");var o=t("Model");cc.Class({extends:cc.Component,properties:{},start:function(){},eraser:function(){"eraser"==o.MouseType&&this.node.destroy()}}),cc._RF.pop()},{Model:"Model"}],mapData:[function(t,e){"use strict";cc._RF.push(e,"e861e7gLbpAZ5M6GMcnluct","mapData");var o={mapName:"map_01",chineseName:"\u5730\u56fe\u7532",playerProperty:{life:3,gravity:1},blocks:null};cc.Class({extends:cc.Component,onLoad:function(){this.mapData=JSON.parse(JSON.stringify(o))},getMapData:function(){return this.mapData}}),cc._RF.pop()},{}],mapFileWrapper:[function(t,e,o){"use strict";cc._RF.push(e,"ee02bD191pFLoPOHFT/PJfS","mapFileWrapper"),o.__esModule=!0,o.default=void 0;var i={downloadJsonFile:function(t,e){var o=new Blob([t],{type:"text/plain"}),i=document.createElement("a"),n=e+".json";i.href=window.URL.createObjectURL(o),i.download=n,i.click(),window.URL.revokeObjectURL(i.href)},uploadJsonFile:function(){return new Promise(function(t,e){var o=document.createElement("input");o.type="file",o.onchange=function(o){var i=o.target.files[0];"application/json"!=i.type&&(console.log("\u8bf7\u4e0a\u4f20json\u6587\u4ef6"),e());var n=new FileReader;n.readAsText(i),n.onload=function(e){var o=e.target.result;t(o)}},o.click()})}};o.default=i,e.exports=o.default,cc._RF.pop()},{}],sideBarUi:[function(t,e){"use strict";cc._RF.push(e,"29993JBu85LAK66YTnt7ldj","sideBarUi");var o=t("mapFileWrapper");cc.Class({extends:cc.Component,onLoad:function(){this.mapDataManager=this.node.getComponent("mapData"),this.map=cc.find("\u756b\u5e03")},btn_DownloadMap:function(){this.mapDataManager.mapData.blocks=this.map,console.log(this.mapDataManager.mapData.blocks);var t=this.mapDataManager.getMapData(),e=JSON.stringify(t),i=t.mapName;(0,o.downloadJsonFile)(e,i)},btn_UploadMap:function(){var t=this;(0,o.uploadJsonFile)().then(function(e){t.btn_ClearMapBlocks(),t.mapDataManager.mapData=JSON.parse(e);var o=cc.director.getScene();cc.instantiate(t.mainMapData.mapData.blocks).parent=o})}}),cc._RF.pop()},{mapFileWrapper:"mapFileWrapper"}]},{},["3D_sign","AddObject","Ani_Color","AttackRange","CameraControl","ItemsData","LobbyControl","MapControl","Model","MouseControl","Role","erase","mapData","mapFileWrapper","sideBarUi"]);